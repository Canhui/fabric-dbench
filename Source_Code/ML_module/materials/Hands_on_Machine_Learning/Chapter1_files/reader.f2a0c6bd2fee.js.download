webpackJsonp([0],[function(e,t,n){(function(e,i){var r;(function(o){function dfl(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function hasOwnProp(e,t){return p.call(e,t)}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function printMsg(e){!1===a.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function deprecate(e,t){var n=!0;return extend(function(){return n&&(printMsg(e),n=!1),t.apply(this,arguments)},t)}function deprecateSimple(e,t){ie[e]||(printMsg(t),ie[e]=!0)}function padToken(e,t){return function(n){return leftZeroFill(e.call(this,n),t)}}function ordinalizeToken(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function monthDiff(e,t){var n,i,r=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(r,"months");return t-o<0?(n=e.clone().add(r-1,"months"),i=(t-o)/(o-n)):(n=e.clone().add(r+1,"months"),i=(t-o)/(n-o)),-(r+i)}function meridiemFixWrap(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function Locale(){}function Moment(e,t){!1!==t&&checkOverflow(e),copyConfig(this,e),this._d=new Date(+e._d),!1===oe&&(oe=!0,a.updateOffset(this),oe=!1)}function Duration(e){var t=normalizeObjectUnits(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||0,s=t.day||0,l=t.hour||0,c=t.minute||0,u=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*u+6e4*c+36e5*l,this._days=+s+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=a.localeData(),this._bubble()}function extend(e,t){for(var n in t)hasOwnProp(t,n)&&(e[n]=t[n]);return hasOwnProp(t,"toString")&&(e.toString=t.toString),hasOwnProp(t,"valueOf")&&(e.valueOf=t.valueOf),e}function copyConfig(e,t){var n,i,r;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=t._pf),void 0!==t._locale&&(e._locale=t._locale),T.length>0)for(n in T)i=T[n],void 0!==(r=t[i])&&(e[i]=r);return e}function absRound(e){return e<0?Math.ceil(e):Math.floor(e)}function leftZeroFill(e,t,n){for(var i=""+Math.abs(e),r=e>=0;i.length<t;)i="0"+i;return(r?n?"+":"":"-")+i}function positiveMomentsDifference(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function momentsDifference(e,t){var n;return t=makeAs(t,e),e.isBefore(t)?n=positiveMomentsDifference(e,t):(n=positiveMomentsDifference(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function createAdder(e,t){return function(n,i){var r,o;return null===i||isNaN(+i)||(deprecateSimple(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,r=a.duration(n,i),addOrSubtractDurationFromMoment(this,r,e),this}}function addOrSubtractDurationFromMoment(e,t,n,i){var r=t._milliseconds,o=t._days,s=t._months;i=null==i||i,r&&e._d.setTime(+e._d+r*n),o&&rawSetter(e,"Date",rawGetter(e,"Date")+o*n),s&&rawMonthSetter(e,rawGetter(e,"Month")+s*n),i&&a.updateOffset(e,o||s)}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function isDate(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function compareArrays(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&toInt(e[i])!==toInt(t[i]))&&a++;return a+o}function normalizeUnits(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=J[e]||X[t]||t}return e}function normalizeObjectUnits(e){var t,n,i={};for(n in e)hasOwnProp(e,n)&&(t=normalizeUnits(n))&&(i[t]=e[n]);return i}function makeList(e){var t,n;if(0===e.indexOf("week"))t=7,n="day";else{if(0!==e.indexOf("month"))return;t=12,n="month"}a[e]=function(i,r){var s,l,c=a._locale[e],u=[];if("number"==typeof i&&(r=i,i=o),l=function(e){var t=a().utc().set(n,e);return c.call(a._locale,t,i||"")},null!=r)return l(r);for(s=0;s<t;s++)u.push(l(s));return u}}function toInt(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function daysInMonth(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function weeksInYear(e,t,n){return weekOfYear(a([e,11,31+t-n]),t,n).week}function daysInYear(e){return isLeapYear(e)?366:365}function isLeapYear(e){return e%4==0&&e%100!=0||e%400==0}function checkOverflow(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[f]<0||e._a[f]>11?f:e._a[_]<1||e._a[_]>daysInMonth(e._a[h],e._a[f])?_:e._a[m]<0||e._a[m]>24||24===e._a[m]&&(0!==e._a[g]||0!==e._a[v]||0!==e._a[y])?m:e._a[g]<0||e._a[g]>59?g:e._a[v]<0||e._a[v]>59?v:e._a[y]<0||e._a[y]>999?y:-1,e._pf._overflowDayOfYear&&(t<h||t>_)&&(t=_),e._pf.overflow=t)}function isValid(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===o)),e._isValid}function normalizeLocale(e){return e?e.toLowerCase().replace("_","-"):e}function chooseLocale(e){for(var t,n,i,r,o=0;o<e.length;){for(r=normalizeLocale(e[o]).split("-"),t=r.length,n=normalizeLocale(e[o+1]),n=n?n.split("-"):null;t>0;){if(i=loadLocale(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&compareArrays(r,n,!0)>=t-1)break;t--}o++}return null}function loadLocale(e){var t=null;if(!b[e]&&w)try{t=a.locale(),n(139)("./"+e),a.locale(t)}catch(e){}return b[e]}function makeAs(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(a.isMoment(e)||isDate(e)?+e:+a(e))-+n,n._d.setTime(+n._d+i),a.updateOffset(n,!1),n):a(e).local()}function removeFormattingTokens(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function makeFormatFunction(e){var t,n,i=e.match(L);for(t=0,n=i.length;t<n;t++)ne[i[t]]?i[t]=ne[i[t]]:i[t]=removeFormattingTokens(i[t]);return function(r){var o="";for(t=0;t<n;t++)o+=i[t]instanceof Function?i[t].call(r,e):i[t];return o}}function formatMoment(e,t){return e.isValid()?(t=expandFormat(t,e.localeData()),Q[t]||(Q[t]=makeFormatFunction(t)),Q[t](e)):e.localeData().invalidDate()}function expandFormat(e,t){function replaceLongDateFormatTokens(e){return t.longDateFormat(e)||e}var n=5;for(E.lastIndex=0;n>=0&&E.test(e);)e=e.replace(E,replaceLongDateFormatTokens),E.lastIndex=0,n-=1;return e}function getParseRegexForToken(e,t){var n=t._strict;switch(e){case"Q":return N;case"DDDD":return q;case"YYYY":case"GGGG":case"gggg":return n?W:O;case"Y":case"G":case"g":return U;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?H:x;case"S":if(n)return N;case"SS":if(n)return F;case"SSS":if(n)return q;case"DDD":return D;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return A;case"a":case"A":return t._locale._meridiemParse;case"x":return I;case"X":return j;case"Z":case"ZZ":return P;case"T":return Y;case"SSSS":return R;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?F:S;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return S;case"Do":return n?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return new RegExp(regexpEscape(unescapeFormat(e.replace("\\","")),"i"))}}function utcOffsetFromString(e){e=e||"";var t=e.match(P)||[],n=t[t.length-1]||[],i=(n+"").match(G)||["-",0,0],r=60*i[1]+toInt(i[2]);return"+"===i[0]?r:-r}function addTimeToArrayFromToken(e,t,n){var i,r=n._a;switch(e){case"Q":null!=t&&(r[f]=3*(toInt(t)-1));break;case"M":case"MM":null!=t&&(r[f]=toInt(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t,e,n._strict),null!=i?r[f]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[_]=toInt(t));break;case"Do":null!=t&&(r[_]=toInt(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=toInt(t));break;case"YY":r[h]=a.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":r[h]=toInt(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":r[m]=toInt(t);break;case"m":case"mm":r[g]=toInt(t);break;case"s":case"ss":r[v]=toInt(t);break;case"S":case"SS":case"SSS":case"SSSS":r[y]=toInt(1e3*("0."+t));break;case"x":n._d=new Date(toInt(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=utcOffsetFromString(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=toInt(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=a.parseTwoDigitYear(t)}}function dayOfYearFromWeekInfo(e){var t,n,i,r,o,s,l;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,s=4,n=dfl(t.GG,e._a[h],weekOfYear(a(),1,4).year),i=dfl(t.W,1),r=dfl(t.E,1)):(o=e._locale._week.dow,s=e._locale._week.doy,n=dfl(t.gg,e._a[h],weekOfYear(a(),o,s).year),i=dfl(t.w,1),null!=t.d?(r=t.d)<o&&++i:r=null!=t.e?t.e+o:o),l=dayOfYearFromWeeks(n,i,r,s,o),e._a[h]=l.year,e._dayOfYear=l.dayOfYear}function dateFromConfig(e){var t,n,i,r,o=[];if(!e._d){for(i=currentDateArray(e),e._w&&null==e._a[_]&&null==e._a[f]&&dayOfYearFromWeekInfo(e),e._dayOfYear&&(r=dfl(e._a[h],i[h]),e._dayOfYear>daysInYear(r)&&(e._pf._overflowDayOfYear=!0),n=makeUTCDate(r,0,e._dayOfYear),e._a[f]=n.getUTCMonth(),e._a[_]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[m]&&0===e._a[g]&&0===e._a[v]&&0===e._a[y]&&(e._nextDay=!0,e._a[m]=0),e._d=(e._useUTC?makeUTCDate:makeDate).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[m]=24)}}function dateFromObject(e){var t;e._d||(t=normalizeObjectUnits(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],dateFromConfig(e))}function currentDateArray(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function makeDateFromStringAndFormat(e){if(e._f===a.ISO_8601)return void parseISO(e);e._a=[],e._pf.empty=!0;var t,n,i,r,s,l=""+e._i,c=l.length,u=0;for(i=expandFormat(e._f,e._locale).match(L)||[],t=0;t<i.length;t++)r=i[t],n=(l.match(getParseRegexForToken(r,e))||[])[0],n&&(s=l.substr(0,l.indexOf(n)),s.length>0&&e._pf.unusedInput.push(s),l=l.slice(l.indexOf(n)+n.length),u+=n.length),ne[r]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(r),addTimeToArrayFromToken(r,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(r);e._pf.charsLeftOver=c-u,l.length>0&&e._pf.unusedInput.push(l),!0===e._pf.bigHour&&e._a[m]<=12&&(e._pf.bigHour=o),e._a[m]=meridiemFixWrap(e._locale,e._a[m],e._meridiem),dateFromConfig(e),checkOverflow(e)}function unescapeFormat(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})}function regexpEscape(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function makeDateFromStringAndArray(e){var t,n,i,r,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)o=0,t=copyConfig({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=defaultParsingFlags(),t._f=e._f[r],makeDateFromStringAndFormat(t),isValid(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==i||o<i)&&(i=o,n=t));extend(e,n||t)}function parseISO(e){var t,n,i=e._i,r=z.exec(i);if(r){for(e._pf.iso=!0,t=0,n=$.length;t<n;t++)if($[t][1].exec(i)){e._f=$[t][0]+(r[6]||" ");break}for(t=0,n=V.length;t<n;t++)if(V[t][1].exec(i)){e._f+=V[t][0];break}i.match(P)&&(e._f+="Z"),makeDateFromStringAndFormat(e)}else e._isValid=!1}function makeDateFromString(e){parseISO(e),!1===e._isValid&&(delete e._isValid,a.createFromInputFallback(e))}function map(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function makeDateFromInput(e){var t,n=e._i;n===o?e._d=new Date:isDate(n)?e._d=new Date(+n):null!==(t=C.exec(n))?e._d=new Date(+t[1]):"string"==typeof n?makeDateFromString(e):isArray(n)?(e._a=map(n.slice(0),function(e){return parseInt(e,10)}),dateFromConfig(e)):"object"==typeof n?dateFromObject(e):"number"==typeof n?e._d=new Date(n):a.createFromInputFallback(e)}function makeDate(e,t,n,i,r,o,a){var s=new Date(e,t,n,i,r,o,a);return e<1970&&s.setFullYear(e),s}function makeUTCDate(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function parseWeekday(e,t){if("string"==typeof e)if(isNaN(e)){if("number"!=typeof(e=t.weekdaysParse(e)))return null}else e=parseInt(e,10);return e}function substituteTimeAgo(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function relativeTime(e,t,n){var i=a.duration(e).abs(),r=d(i.as("s")),o=d(i.as("m")),s=d(i.as("h")),l=d(i.as("d")),c=d(i.as("M")),u=d(i.as("y")),p=r<Z.s&&["s",r]||1===o&&["m"]||o<Z.m&&["mm",o]||1===s&&["h"]||s<Z.h&&["hh",s]||1===l&&["d"]||l<Z.d&&["dd",l]||1===c&&["M"]||c<Z.M&&["MM",c]||1===u&&["y"]||["yy",u];return p[2]=t,p[3]=+e>0,p[4]=n,substituteTimeAgo.apply({},p)}function weekOfYear(e,t,n){var i,r=n-t,o=n-e.day();return o>r&&(o-=7),o<r-7&&(o+=7),i=a(e).add(o,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function dayOfYearFromWeeks(e,t,n,i,r){var o,a,s=makeUTCDate(e,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:r,o=r-s+(s>i?7:0)-(s<r?7:0),a=7*(t-1)+(n-r)+o+1,{year:a>0?e:e-1,dayOfYear:a>0?a:daysInYear(e-1)+a}}function makeMoment(e){var t,n=e._i,i=e._f;return e._locale=e._locale||a.localeData(e._l),null===n||i===o&&""===n?a.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),a.isMoment(n)?new Moment(n,!0):(i?isArray(i)?makeDateFromStringAndArray(e):makeDateFromStringAndFormat(e):makeDateFromInput(e),t=new Moment(e),t._nextDay&&(t.add(1,"d"),t._nextDay=o),t))}function pickBy(e,t){var n,i;if(1===t.length&&isArray(t[0])&&(t=t[0]),!t.length)return a();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function rawMonthSetter(e,t){var n;return"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))?e:(n=Math.min(e.date(),daysInMonth(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function rawGetter(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function rawSetter(e,t,n){return"Month"===t?rawMonthSetter(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function makeAccessor(e,t){return function(n){return null!=n?(rawSetter(this,e,n),a.updateOffset(this,t),this):rawGetter(this,e)}}function daysToYears(e){return 400*e/146097}function yearsToDays(e){return 146097*e/400}function makeDurationGetter(e){a.duration.fn[e]=function(){return this._data[e]}}function makeGlobal(e){"undefined"==typeof ender&&(s=u.moment,u.moment=e?deprecate("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",a):a)}for(var a,s,l,c="2.9.0",u=void 0===e||"undefined"!=typeof window&&window!==e.window?this:e,d=Math.round,p=Object.prototype.hasOwnProperty,h=0,f=1,_=2,m=3,g=4,v=5,y=6,b={},T=[],w=void 0!==i&&i&&i.exports,C=/^\/?Date\((\-?\d+)/i,M=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,k=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,L=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,E=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,S=/\d\d?/,D=/\d{1,3}/,O=/\d{1,4}/,x=/[+\-]?\d{1,6}/,R=/\d+/,A=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,P=/Z|[\+\-]\d\d:?\d\d/gi,Y=/T/i,I=/[\+\-]?\d+/,j=/[\+\-]?\d+(\.\d{1,3})?/,N=/\d/,F=/\d\d/,q=/\d{3}/,W=/\d{4}/,H=/[+-]?\d{6}/,U=/[+-]?\d+/,z=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,B="YYYY-MM-DDTHH:mm:ssZ",$=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],V=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],G=/([\+\-]|\d\d)/gi,K=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),J={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},X={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Q={},Z={s:45,m:45,h:22,d:26,M:11},ee="DDD w W M D d".split(" "),te="M D H h m s w W".split(" "),ne={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},YYYYYY:function(){var e=this.year();return(e>=0?"+":"-")+leftZeroFill(Math.abs(e),6)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return leftZeroFill(this.weekYear(),4)},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return leftZeroFill(this.isoWeekYear(),4)},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},SSSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+leftZeroFill(toInt(e/60),2)+":"+leftZeroFill(toInt(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+leftZeroFill(toInt(e/60),2)+leftZeroFill(toInt(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},ie={},re=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],oe=!1;ee.length;)l=ee.pop(),ne[l+"o"]=ordinalizeToken(ne[l],l);for(;te.length;)l=te.pop(),ne[l+l]=padToken(ne[l],2);ne.DDDD=padToken(ne.DDD,3),extend(Locale.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,r,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=a.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;t<7;t++)if(this._weekdaysParse[t]||(n=a([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.apply(t,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return weekOfYear(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),a=function(e,t,n,i){var r;return"boolean"==typeof n&&(i=n,n=o),r={},r._isAMomentObject=!0,r._i=e,r._f=t,r._l=n,r._strict=i,r._isUTC=!1,r._pf=defaultParsingFlags(),makeMoment(r)},a.suppressDeprecationWarnings=!1,a.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),a.min=function(){return pickBy("isBefore",[].slice.call(arguments,0))},a.max=function(){return pickBy("isAfter",[].slice.call(arguments,0))},a.utc=function(e,t,n,i){var r;return"boolean"==typeof n&&(i=n,n=o),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=n,r._i=e,r._f=t,r._strict=i,r._pf=defaultParsingFlags(),makeMoment(r).utc()},a.unix=function(e){return a(1e3*e)},a.duration=function(e,t){var n,i,r,o,s=e,l=null;return a.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(l=M.exec(e))?(n="-"===l[1]?-1:1,s={y:0,d:toInt(l[_])*n,h:toInt(l[m])*n,m:toInt(l[g])*n,s:toInt(l[v])*n,ms:toInt(l[y])*n}):(l=k.exec(e))?(n="-"===l[1]?-1:1,r=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},s={y:r(l[2]),M:r(l[3]),d:r(l[4]),h:r(l[5]),m:r(l[6]),s:r(l[7]),w:r(l[8])}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(o=momentsDifference(a(s.from),a(s.to)),s={},s.ms=o.milliseconds,s.M=o.months),i=new Duration(s),a.isDuration(e)&&hasOwnProp(e,"_locale")&&(i._locale=e._locale),i},a.version=c,a.defaultFormat=B,a.ISO_8601=function(){},a.momentProperties=T,a.updateOffset=function(){},a.relativeTimeThreshold=function(e,t){return Z[e]!==o&&(t===o?Z[e]:(Z[e]=t,!0))},a.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return a.locale(e,t)}),a.locale=function(e,t){var n;return e&&(n=void 0!==t?a.defineLocale(e,t):a.localeData(e))&&(a.duration._locale=a._locale=n),a._locale._abbr},a.defineLocale=function(e,t){return null!==t?(t.abbr=e,b[e]||(b[e]=new Locale),b[e].set(t),a.locale(e),b[e]):(delete b[e],null)},a.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",function(e){return a.localeData(e)}),a.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return a._locale;if(!isArray(e)){if(t=loadLocale(e))return t;e=[e]}return chooseLocale(e)},a.isMoment=function(e){return e instanceof Moment||null!=e&&hasOwnProp(e,"_isAMomentObject")},a.isDuration=function(e){return e instanceof Duration};for(l=re.length-1;l>=0;--l)makeList(re[l]);a.normalizeUnits=function(e){return normalizeUnits(e)},a.invalid=function(e){var t=a.utc(NaN);return null!=e?extend(t._pf,e):t._pf.userInvalidated=!0,t},a.parseZone=function(){return a.apply(null,arguments).parseZone()},a.parseTwoDigitYear=function(e){return toInt(e)+(toInt(e)>68?1900:2e3)},a.isDate=isDate,extend(a.fn=Moment.prototype,{clone:function(){return a(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=a(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():formatMoment(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&compareArrays(this._a,(this._isUTC?a.utc(this._a):a(this._a)).toArray())>0)},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=formatMoment(this,e||a.defaultFormat);return this.localeData().postformat(t)},add:createAdder(1,"add"),subtract:createAdder(-1,"subtract"),diff:function(e,t,n){var i,r,o=makeAs(e,this),a=6e4*(o.utcOffset()-this.utcOffset());return t=normalizeUnits(t),"year"===t||"month"===t||"quarter"===t?(r=monthDiff(this,o),"quarter"===t?r/=3:"year"===t&&(r/=12)):(i=this-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-a)/864e5:"week"===t?(i-a)/6048e5:i),n?r:absRound(r)},from:function(e,t){return a.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(a(),e)},calendar:function(e){var t=e||a(),n=makeAs(t,this).startOf("day"),i=this.diff(n,"days",!0),r=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,a(t)))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=parseWeekday(e,this.localeData()),this.add(e-t,"d")):t},month:makeAccessor("Month",!0),startOf:function(e){switch(e=normalizeUnits(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=normalizeUnits(e),e===o||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return t=normalizeUnits(void 0!==t?t:"millisecond"),"millisecond"===t?(e=a.isMoment(e)?e:a(e),+this>+e):(a.isMoment(e)?+e:+a(e))<+this.clone().startOf(t)},isBefore:function(e,t){var n;return t=normalizeUnits(void 0!==t?t:"millisecond"),"millisecond"===t?(e=a.isMoment(e)?e:a(e),+this<+e):(n=a.isMoment(e)?+e:+a(e),+this.clone().endOf(t)<n)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return t=normalizeUnits(t||"millisecond"),"millisecond"===t?(e=a.isMoment(e)?e:a(e),+this==+e):(n=+a(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=a.apply(null,arguments),e<this?this:e}),max:deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=a.apply(null,arguments),e>this?this:e}),zone:deprecate("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n,i=this._offset||0;return null!=e?("string"==typeof e&&(e=utcOffsetFromString(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(n=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==e&&(!t||this._changeInProgress?addOrSubtractDurationFromMoment(this,a.duration(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(utcOffsetFromString(this._i)),this},hasAlignedHourOffset:function(e){return e=e?a(e).utcOffset():0,(this.utcOffset()-e)%60==0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(e){var t=d((a(this).startOf("day")-a(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=weekOfYear(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=weekOfYear(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return weeksInYear(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return weeksInYear(this.year(),e.dow,e.doy)},get:function(e){return e=normalizeUnits(e),this[e]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else e=normalizeUnits(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(e){var t;return e===o?this._locale._abbr:(t=a.localeData(e),null!=t&&(this._locale=t),this)},lang:deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===o?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),a.fn.millisecond=a.fn.milliseconds=makeAccessor("Milliseconds",!1),a.fn.second=a.fn.seconds=makeAccessor("Seconds",!1),a.fn.minute=a.fn.minutes=makeAccessor("Minutes",!1),a.fn.hour=a.fn.hours=makeAccessor("Hours",!0),a.fn.date=makeAccessor("Date",!0),a.fn.dates=deprecate("dates accessor is deprecated. Use date instead.",makeAccessor("Date",!0)),a.fn.year=makeAccessor("FullYear",!0),a.fn.years=deprecate("years accessor is deprecated. Use year instead.",makeAccessor("FullYear",!0)),a.fn.days=a.fn.day,a.fn.months=a.fn.month,a.fn.weeks=a.fn.week,a.fn.isoWeeks=a.fn.isoWeek,a.fn.quarters=a.fn.quarter,a.fn.toJSON=a.fn.toISOString,a.fn.isUTC=a.fn.isUtc,extend(a.duration.fn=Duration.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,r=this._days,o=this._months,a=this._data,s=0;a.milliseconds=i%1e3,e=absRound(i/1e3),a.seconds=e%60,t=absRound(e/60),a.minutes=t%60,n=absRound(t/60),a.hours=n%24,r+=absRound(n/24),s=absRound(daysToYears(r)),r-=absRound(yearsToDays(s)),o+=absRound(r/30),r%=30,s+=absRound(o/12),o%=12,a.days=r,a.months=o,a.years=s},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)},humanize:function(e){var t=relativeTime(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=a.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=a.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=normalizeUnits(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if("month"===(e=normalizeUnits(e))||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*daysToYears(t),"month"===e?n:n/12;switch(t=this._days+Math.round(yearsToDays(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:a.fn.lang,locale:a.fn.locale,toIsoString:deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||o?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),a.duration.fn.toString=a.duration.fn.toISOString;for(l in K)hasOwnProp(K,l)&&makeDurationGetter(l.toLowerCase());a.duration.fn.asMilliseconds=function(){return this.as("ms")},a.duration.fn.asSeconds=function(){return this.as("s")},a.duration.fn.asMinutes=function(){return this.as("m")},a.duration.fn.asHours=function(){return this.as("h")},a.duration.fn.asDays=function(){return this.as("d")},a.duration.fn.asWeeks=function(){return this.as("weeks")},a.duration.fn.asMonths=function(){return this.as("M")},a.duration.fn.asYears=function(){return this.as("y")},a.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===toInt(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),w?i.exports=a:((r=function(e,t,n){return n.config&&n.config()&&!0===n.config().noGlobal&&(u.moment=s),a}.call(t,n,t,i))!==o&&(i.exports=r),makeGlobal(!0))}).call(this)}).call(t,n(29),n(124)(e))},,,,,function(e,t,n){"use strict";(function(e){e.cookie=function(t,n,i){if(void 0===n){var r=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),a=0;a<o.length;a++){var s=e.trim(o[a]);if(s.substring(0,t.length+1)==t+"="){r=decodeURIComponent(s.substring(t.length+1));break}}return r}i=i||{},null===n&&(n="",i.expires=-1);var l="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var c;"number"==typeof i.expires?(c=new Date,c.setTime(c.getTime()+24*i.expires*60*60*1e3)):c=i.expires,l="; expires="+c.toUTCString()}var u=i.path?"; path="+i.path:"",d=i.domain?"; domain="+i.domain:"",p=i.secure?"; secure":"";return document.cookie=[t,"=",encodeURIComponent(n),l,u,d,p].join(""),!1}}).call(t,n(1))},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a,s,l,c,u,d,p,h,f,_,m,g,v,y,b,T,w,C=n(1),M=n(115),k=n(2),L=n(21),E=n(12),S=9;return n(5),t=function(e){return C.ajax({type:e.type,url:e.url,success:e.success})},i=function(e){var t=e.data.el,n=e.data.closeBtn.selector?e.data.closeBtn.selector:e.data.closeBtn[0],i=t.find(n),r=e.data.active_class,o=t.filter("."+r),a=C(e.target);o.length&&(C.contains(o.get(0),e.target)||a.is(t)||i.click())},r=function(e){var t,n,i,r,o=e.removeDelay?e.removeDelay:15e3,a=e.$el||C("#container article header#lead");if(a.length<1&&(a=C(".nav-container")),void 0===e.message)return!1;void 0!==e.unescaped&&!1!==e.unescaped||(e.message=e.message.replace(/[<>]/g,""),e.message=C("<div />").html(e.message).text()),void 0===e.type&&(e.type="info"),r={success:"success",info:"info",error:"error",alert:"alert",true:"success",false:"error"},i=r[e.type],t=C("ul.django-messages"),t.length<1&&(C("<ul class='django-messages'></ul>").insertAfter(a),t=C("ul.django-messages")),e.fixedPosition&&(i+=" fixed-position "),n=C("<li class='"+i+" t-django-message'>"+e.message+' <a class="close" href="#" title="close"><span>Close</span></a></li>'),t.append(n),n.children(".close").click(function(){n.exists=!1,n.fadeOut("fast",function(){n.remove()})}),"success"!==e.type&&"info"!==e.type||setTimeout(function(){!1!==n.exists&&n.fadeOut("fast",function(){n.remove()})},o)},y=function(e,t){var n,i;return void 0===e||""===e?M:(void 0===t&&(t={}),n=L["logentries-tokens"],void 0!==(i=n[e]||!1)&&(t.token=i,M.init(t),M))},a=function(){function get_from_cache(t){return e[t]||(e[t]=C(t)),e[t]}var e={};return{get:get_from_cache}},o=new a,c=function(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},s=function(){var e=C("ul.django-messages"),t=e.find("li"),n=t.filter(".info, .success");if("perma-close"===e.attr("data-option")&&"closed"===localStorage.getItem("django-message"))return!1;t.length&&(t.each(function(e){t.eq(e).fadeIn("fast")}),t.find(".close").on("click",e,function(t){t.preventDefault(),C(this).closest("li").fadeOut("fast",function(){e.remove(),localStorage.setItem("django-message","closed")}),"welcome-close"===C(this).attr("id")&&C.cookie("welcome_dismissed",!0)})),n.length&&setTimeout(function(){n.length&&n.each(function(t){n.eq(t).fadeOut("fast"),e.remove()})},15e3)},l=function(e,t){var n=e.find("a[href], area[href], input:not([disabled]),select:not([disabled]), textarea:not([disabled]),button:not([disabled]), iframe, object, embed, *[tabindex],*[contenteditable],.tabbable-item");t=t||{},n.each(function(e){t.remove?C(this).attr("tabindex",-1):C(this).attr("tabindex",e+1)})},p=function(e){e.off("keydown.tabs").on("keydown.tabs",function(e){if((e.keyCode||e.which)===S){e.preventDefault();var t=this.selectionStart,n=this.selectionEnd,i=this.value,r=i.substring(t,n),o=/^/gm,a=r.match(o).length;this.value=i.substring(0,t)+r.replace(o,"\t")+i.substring(n),this.selectionStart=t,this.selectionEnd=n+a}})},u=function(e){var t=new Date(e);return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getUTCMonth()]+" "+t.getUTCDate()+", "+t.getUTCFullYear()},d=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""},b=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:e[1]||""}):"Chrome"===n[1]&&null!==(e=t.match(/\bOPR\/(\d+)/))?{name:"Opera",version:e[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})},h=function(e,t){return t=t||{},!!e&&("undefined"==typeof ga||(!ga.hasOwnProperty("loaded")||!0!==ga.loaded||(t.store?(k.has(k.last(e),"title")||e.push({title:document.title.replace("|","")}),void this.storeAnalyticsCall(e)):void ga.apply(null,e))))},f=function(e){var t;e=JSON.stringify(e),Modernizr.localstorage?localStorage[L.analytics_key]=localStorage[L.analytics_key]?localStorage[L.analytics_key]+"|"+e:e:(t=C.cookie(L.analytics_key)?C.cookie(L.analytics_key)+"|"+e:e,C.cookie(L.analytics_key,t))},_=function(e,t){var n=e&&t?"|":"";return t=t?t+" days":void 0,[e,t].join(n)||"none"},m=function(e,t){var n=_(e,t);window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"eventTracker",eventCat:"learning platform sign up",eventAct:"free trial",eventLbl:n,eventVal:0,nonInteraction:0})},g=function(e){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"eventTracker",eventCat:"how did you hear about us",eventAct:e,eventLbl:"free trial",eventVal:0,nonInteraction:0})},v=function(){var e,t,n=E.browser.get(L.analytics_key);n&&(e=n.split("|"),k.each(e,function(e){t=JSON.parse(e),ga.apply(null,t)}),E.browser.remove(L.analytics_key))},T=function(e){return C(e).find("a[href]:not(.get-safari-modal), area[href], input:not(:hidden,:disabled), select:not(:hidden,:disabled), textarea:not(:hidden,:disabled), button:not(:disabled), iframe, object, embed, *[tabindex], *[contenteditable]")},w=function(e){for(var t=window.location.search.substring(1),n=t.split("&"),i=0;i<n.length;i+=1){var r=n[i].split("=");if(r[0]===e)return r[1]}return!1},{ajaxHandler:t,bodyClick:i,callStoredAnalytics:v,getBrowser:b,getFocusableElements:T,getFriendlyUTCTime:u,getQueryParameter:w,gtmEventLabel:_,gtmTrackRegistration:m,gtmTrackReferrer:g,logentries:y,notify:r,selectors:o,sendAnalyticsEvent:h,setTabIndex:l,showMessages:s,storeAnalyticsCall:f,stripHtmlFromString:d,textareaTabs:p,validEmail:c}}.call(t,n,t,e))&&(e.exports=i)},,function(e,t,n){"use strict";var i;void 0!==(i=function(){var e,t=document.getElementsByTagName("html")[0],n=t.getAttribute("data-debug"),i=t.getAttribute("data-testing"),r=t.getAttribute("data-csrf-cookie")||"csrftoken",o=t.getAttribute("data-dashboard-url"),a=t.getAttribute("data-terms-url"),s=t.getAttribute("data-privacy-url"),l=t.getAttribute("data-login-url"),c=function(e){return!!Number(e)};return e={DASHBOARD_URL:o,TERMS_URL:a,PRIVACY_URL:s,LOGIN_URL:l,DEBUG:c(null===n||n),TESTING:c(null===i||i),BASE_API_URL:"/nest/api",BASE_API_PATH:"/nest/api",LOGIN_COOKIE_NAME:"logged_in",CSRF_COOKIE_NAME:r,TOC_STATE_COOKIE_NAME:"creativeforge_toc_open",IS_IPHONE:-1!==navigator.appVersion.indexOf("iPhone OS "),IS_IPAD:-1!==navigator.appVersion.indexOf("iPad"),IS_ANDROID:-1!==navigator.appVersion.indexOf("Android"),IS_NEXUS_7:-1!==navigator.appVersion.indexOf("Nexus 7"),IS_IE8:(" "+t.className+" ").indexOf(" ie8 ")>-1,SUPPORTS_PAGED_READING:Modernizr.csscolumns,BACKBONE_URL_ROOT:"/",LOCALSTORE_USAGE_KEY:"sbo_usage_data",LOCALSTORE_KALTURA_SESSION_KEY:"sbo_video_session_data",COOKIE_READER_PREFERENCES_KEY:"reader_preferences",IBIS_BOOK_CLASS:"#sbo-rt-content",KALTURA_PLAYER_ID:"#js-kaltura-player-region",LOGENTRIES_TOKEN:"0509ee1a-2e53-4916-a7fa-9848b003e2cb",FONT_NAME_DEFAULT:"Georgia",FONT_SIZE_DEFAULT:1,FONT_SIZE_MIN:.35,FONT_SIZE_MAX:1.85,READER_COLUMN_WIDTH_DEFAULT:65,READER_COLUMN_WIDTH_MIN:25,READER_COLUMN_WIDTH_MAX:95,READING_MODE_DEFAULT:"day-mode",ZOOM_FACTOR_DEFAULT:1.5,ZOOM_FACTOR_STEP_MULTIPLE:1.2,ZOOM_FACTOR_MIN:.75,ZOOM_FACTOR_MAX:3,LOADING_DELAY:2e3,MAX_NUM_ITEMS_IN_BOOK_LIST:25,SHRINK_TITLE_THRESHOLD:60,ELIDE_TITLE_THRESHOLD:60,ELIDE_DESCRIPTION_THRESHOLD:500,ICON_WIDTH:75,COVER_INFO_PAGE_HEIGHT:120,BOOKMARK_WIDTH:40,BOOKMARK_HEIGHT:40,LAST_SELECTOR:"#ibis-final-content",BRIGHTNESS_STEP_VALUE:25,BRIGHTNESS_MIN:50,BRIGHTNESS_MAX:255,HREF_SEPARATOR:",",PAGINATION_HINT_DISPLAY_MS:500,MAX_EVENTS_PER_REQUEST:20,VIRTUAL_PAGES_READ_UPDATE_INTERVAL:15e3,USAGE_EVENT_SYNC_INTERVAL:1,USAGE_UPDATE_INTERVAL:15e3,USAGE_TIMER_INTERVAL:6e4,SCROLL_READING_DEBOUNCE:500,PAGE_SKIM_TIME:3e3,SHORT_DATE_FORMAT:"%b %e",LONG_DATE_FORMAT:"%B %e %Y",TOOLBAR_HEIGHT:61},e.FIRST_SELECTOR=e.IBIS_BOOK_CLASS+" *:first",e.IS_IOS=e.IS_IPHONE||e.IS_IPAD,e.IS_IPHONE5=e.IS_IPHONE&&568===window.screen.height,e.IS_WEBKIT=-1!==navigator.appVersion.indexOf("WebKit")&&!e.IS_IPHONE&&!e.IS_ANDROID&&!e.IS_IPAD,e.IS_MOBILE_HTML5_COMPATIBLE=e.IS_IPHONE||e.IS_ANDROID,e.IS_MOBILE=e.IS_MOBILE_HTML5_COMPATIBLE,e.FONT_DEFAULT_PREFERENCES={font_size:e.FONT_SIZE_DEFAULT,font_name:e.FONT_NAME_DEFAULT},e.VIDEO_PREFERENCE_STORAGE_KEY={playback_rate:"video_preference_playback_rate",playback_quality:"video_preference_playback_quality"},e.DEVICES={device:{galaxy_tab:{portrait:[400,657],landscape:[683,400],navBarHeight:56,is_ua:!1},nexus_7:{portrait:[603,796],landscape:[965,443],navBarHeight:void 0,is_ua:!1},xoom:{portrait:[void 0,void 0],landscape:[void 0,void 0],navBarHeight:void 0,is_ua:!1},desire:{portrait:[void 0,void 0],landscape:[void 0,void 0],navBarHeight:void 0,is_ua:!1},iphone:{portrait:[320,356],landscape:[480,208],navBarHeight:60,is_ua:!1},iphone5:{portrait:[320,444],landscape:[568,208],navBarHeight:60,is_ua:!1},other:{portrait:[void 0,void 0],landscape:[void 0,void 0],navBarHeight:void 0,is_ua:!1}},current_device_name:"other"},e.KEYCODE={RIGHT_ARROW:39,LEFT_ARROW:37,SPACEBAR:32,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57},e.IPAD={WIDTH:768,HEIGHT:1024,STATUS_BAR:20},-1!==navigator.appVersion.indexOf("SCH-I800")&&(e.DEVICES.device.galaxy_tab.is_ua=!0,e.DEVICES.current_device_name="galaxy_tab"),-1!==navigator.appVersion.indexOf("Nexus 7")&&(e.DEVICES.device.nexus_7.is_ua=!0,e.DEVICES.current_device_name="nexus_7"),e.USER_AGENT=navigator.userAgent,e}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=i.PropTypes.array,o=i.PropTypes.arrayOf,a=i.PropTypes.bool,s=i.PropTypes.func,l=i.PropTypes.node,c=i.PropTypes.number,u=i.PropTypes.object,d=i.PropTypes.shape,p=i.PropTypes.string,h=d({name:p.isRequired,slug:p.isRequired}),f=o(h),_=d({topics:f}),m=d({api_url:p.isRequired,authors:o(p),content_format:p.isRequired,continue_url:p.isRequired,cover_image_url:p,identifier:p.isRequired,issued:p,publishers:o(p),title:p.isRequired,topics:f,url:p.isRequired}),g=d({api_url:p.isRequired,metadata:_}),v=d({id:p.isRequired,name:p.isRequired,description:p.isRequired,is_default:a.isRequired,content:o(g)}),y=o(v),b=d({exists:a.isRequired,description:p,css_class:p}),T=d({exists:a.isRequired,description:p,css_class:p,url:p}),w=d({didError:a,errorLevel:p,message:p,responseText:p,statusCode:c,timestamp:c,url:p});t.default={array:r,arrayOf:o,bool:a,bowerbirdContent:g,bowerbirdMetadata:_,combinedMetadata:m,collection:v,collectionList:y,errorObject:b,errorsObject:w,func:s,node:l,number:c,object:u,shape:d,string:p,successObject:T,topic:h,topicList:f},e.exports=t.default},function(e,t,n){(function(e,i){var r;(function(){function baseCompareAscending(e,t){if(e!==t){var n=null===e,i=e===o,r=e===e,a=null===t,s=t===o,l=t===t;if(e>t&&!a||!r||n&&!s&&l||i&&l)return 1;if(e<t&&!n||!l||a&&!i&&r||s&&r)return-1}return 0}function baseFindIndex(e,t,n){for(var i=e.length,r=n?i:-1;n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}function baseIndexOf(e,t,n){if(t!==t)return indexOfNaN(e,n);for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function baseIsFunction(e){return"function"==typeof e||!1}function baseToString(e){return null==e?"":e+""}function charsLeftIndex(e,t){for(var n=-1,i=e.length;++n<i&&t.indexOf(e.charAt(n))>-1;);return n}function charsRightIndex(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function compareAscending(e,t){return baseCompareAscending(e.criteria,t.criteria)||e.index-t.index}function compareMultiple(e,t,n){for(var i=-1,r=e.criteria,o=t.criteria,a=r.length,s=n.length;++i<a;){var l=baseCompareAscending(r[i],o[i]);if(l){if(i>=s)return l;var c=n[i];return l*("asc"===c||!0===c?1:-1)}}return e.index-t.index}function deburrLetter(e){return Me[e]}function escapeHtmlChar(e){return ke[e]}function escapeRegExpChar(e,t,n){return t?e=Se[e]:n&&(e=De[e]),"\\"+e}function escapeStringChar(e){return"\\"+De[e]}function indexOfNaN(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var o=e[r];if(o!==o)return r}return-1}function isObjectLike(e){return!!e&&"object"==typeof e}function isSpace(e){return e<=160&&e>=9&&e<=13||32==e||160==e||5760==e||6158==e||e>=8192&&(e<=8202||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function replaceHolders(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;)e[n]===t&&(e[n]=M,o[++r]=n);return o}function sortedUniq(e,t){for(var n,i=-1,r=e.length,o=-1,a=[];++i<r;){var s=e[i],l=t?t(s,i,e):s;i&&n===l||(n=l,a[++o]=s)}return a}function trimmedLeftIndex(e){for(var t=-1,n=e.length;++t<n&&isSpace(e.charCodeAt(t)););return t}function trimmedRightIndex(e){for(var t=e.length;t--&&isSpace(e.charCodeAt(t)););return t}function unescapeHtmlChar(e){return Le[e]}function runInContext(e){function lodash(e){if(isObjectLike(e)&&!un(e)&&!(e instanceof LazyWrapper)){if(e instanceof LodashWrapper)return e;if(xe.call(e,"__chain__")&&xe.call(e,"__wrapped__"))return wrapperClone(e)}return new LodashWrapper(e)}function baseLodash(){}function LodashWrapper(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function LazyWrapper(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=at,this.__views__=[]}function lazyClone(){var e=new LazyWrapper(this.__wrapped__);return e.__actions__=arrayCopy(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=arrayCopy(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=arrayCopy(this.__views__),e}function lazyReverse(){if(this.__filtered__){var e=new LazyWrapper(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function lazyValue(){var e=this.__wrapped__.value(),t=this.__dir__,n=un(e),i=t<0,r=n?e.length:0,o=getView(0,r,this.__views__),a=o.start,s=o.end,l=s-a,c=i?s:a-1,u=this.__iteratees__,d=u.length,p=0,h=tt(l,this.__takeCount__);if(!n||r<b||r==l&&h==l)return baseWrapperValue(i&&n?e.reverse():e,this.__actions__);var f=[];e:for(;l--&&p<h;){c+=t;for(var _=-1,m=e[c];++_<d;){var g=u[_],v=g.iteratee,y=g.type,C=v(m);if(y==w)m=C;else if(!C){if(y==T)continue e;break e}}f[p++]=m}return f}function MapCache(){this.__data__={}}function mapDelete(e){return this.has(e)&&delete this.__data__[e]}function mapGet(e){return"__proto__"==e?o:this.__data__[e]}function mapHas(e){return"__proto__"!=e&&xe.call(this.__data__,e)}function mapSet(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function SetCache(e){var t=e?e.length:0;for(this.data={hash:Ke(null),set:new Ue};t--;)this.push(e[t])}function cacheIndexOf(e,t){var n=e.data;return("string"==typeof t||isObject(t)?n.set.has(t):n.hash[t])?0:-1}function cachePush(e){var t=this.data;"string"==typeof e||isObject(e)?t.set.add(e):t.hash[e]=!0}function arrayConcat(e,n){for(var i=-1,r=e.length,o=-1,a=n.length,s=t(r+a);++i<r;)s[i]=e[i];for(;++o<a;)s[i++]=n[o];return s}function arrayCopy(e,n){var i=-1,r=e.length;for(n||(n=t(r));++i<r;)n[i]=e[i];return n}function arrayEach(e,t){for(var n=-1,i=e.length;++n<i&&!1!==t(e[n],n,e););return e}function arrayEachRight(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e}function arrayEvery(e,t){for(var n=-1,i=e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function arrayExtremum(e,t,n,i){for(var r=-1,o=e.length,a=i,s=a;++r<o;){var l=e[r],c=+t(l);n(c,a)&&(a=c,s=l)}return s}function arrayFilter(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[++r]=a)}return o}function arrayMap(e,n){for(var i=-1,r=e.length,o=t(r);++i<r;)o[i]=n(e[i],i,e);return o}function arrayPush(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function arrayReduce(e,t,n,i){var r=-1,o=e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function arrayReduceRight(e,t,n,i){var r=e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function arraySome(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function arraySum(e,t){for(var n=e.length,i=0;n--;)i+=+t(e[n])||0;return i}function assignDefaults(e,t){return e===o?t:e}function assignOwnDefaults(e,t,n,i){return e!==o&&xe.call(i,n)?e:t}function assignWith(e,t,n){for(var i=-1,r=Tn(t),a=r.length;++i<a;){var s=r[i],l=e[s],c=n(l,t[s],s,e,t);(c===c?c===l:l!==l)&&(l!==o||s in e)||(e[s]=c)}return e}function baseAssign(e,t){return null==t?e:baseCopy(t,Tn(t),e)}function baseAt(e,n){for(var i=-1,r=null==e,a=!r&&isArrayLike(e),s=a?e.length:0,l=n.length,c=t(l);++i<l;){var u=n[i];c[i]=a?isIndex(u,s)?e[u]:o:r?o:e[u]}return c}function baseCopy(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}function baseCallback(e,t,n){var i=typeof e;return"function"==i?t===o?e:bindCallback(e,t,n):null==e?identity:"object"==i?baseMatches(e):t===o?property(e):baseMatchesProperty(e,t)}function baseClone(e,t,n,i,r,a,s){var l;if(n&&(l=r?n(e,i,r):n(e)),l!==o)return l;if(!isObject(e))return e;var c=un(e);if(c){if(l=initCloneArray(e),!t)return arrayCopy(e,l)}else{var u=Ae.call(e),d=u==O;if(u!=A&&u!=k&&(!d||r))return Ce[u]?initCloneByTag(e,u,t):r?e:{};if(l=initCloneObject(d?{}:e),!t)return baseAssign(l,e)}a||(a=[]),s||(s=[]);for(var p=a.length;p--;)if(a[p]==e)return s[p];return a.push(e),s.push(l),(c?arrayEach:baseForOwn)(e,function(i,r){l[r]=baseClone(i,t,n,r,e,a,s)}),l}function baseDelay(e,t,n){if("function"!=typeof e)throw new Le(C);return ze(function(){e.apply(o,n)},t)}function baseDifference(e,t){var n=e?e.length:0,i=[];if(!n)return i;var r=-1,o=getIndexOf(),a=o==baseIndexOf,s=a&&t.length>=b?createCache(t):null,l=t.length;s&&(o=cacheIndexOf,a=!1,t=s);e:for(;++r<n;){var c=e[r];if(a&&c===c){for(var u=l;u--;)if(t[u]===c)continue e;i.push(c)}else o(t,c,0)<0&&i.push(c)}return i}function baseEvery(e,t){var n=!0;return _t(e,function(e,i,r){return n=!!t(e,i,r)}),n}function baseExtremum(e,t,n,i){var r=i,o=r;return _t(e,function(e,a,s){var l=+t(e,a,s);(n(l,r)||l===i&&l===o)&&(r=l,o=e)}),o}function baseFill(e,t,n,i){var r=e.length;for(n=null==n?0:+n||0,n<0&&(n=-n>r?0:r+n),i=i===o||i>r?r:+i||0,i<0&&(i+=r),r=n>i?0:i>>>0,n>>>=0;n<r;)e[n++]=t;return e}function baseFilter(e,t){var n=[];return _t(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function baseFind(e,t,n,i){var r;return n(e,function(e,n,o){if(t(e,n,o))return r=i?n:e,!1}),r}function baseFlatten(e,t,n,i){i||(i=[]);for(var r=-1,o=e.length;++r<o;){var a=e[r];isObjectLike(a)&&isArrayLike(a)&&(n||un(a)||isArguments(a))?t?baseFlatten(a,t,n,i):arrayPush(i,a):n||(i[i.length]=a)}return i}function baseForIn(e,t){return vt(e,t,keysIn)}function baseForOwn(e,t){return vt(e,t,Tn)}function baseForOwnRight(e,t){return yt(e,t,Tn)}function baseFunctions(e,t){for(var n=-1,i=t.length,r=-1,o=[];++n<i;){var a=t[n];isFunction(e[a])&&(o[++r]=a)}return o}function baseGet(e,t,n){if(null!=e){n!==o&&n in toObject(e)&&(t=[n]);for(var i=0,r=t.length;null!=e&&i<r;)e=e[t[i++]];return i&&i==r?e:o}}function baseIsEqual(e,t,n,i,r,o){return e===t||(null==e||null==t||!isObject(e)&&!isObjectLike(t)?e!==e&&t!==t:baseIsEqualDeep(e,t,baseIsEqual,n,i,r,o))}function baseIsEqualDeep(e,t,n,i,r,o,a){var s=un(e),l=un(t),c=L,u=L;s||(c=Ae.call(e),c==k?c=A:c!=A&&(s=isTypedArray(e))),l||(u=Ae.call(t),u==k?u=A:u!=A&&(l=isTypedArray(t)));var d=c==A,p=u==A,h=c==u;if(h&&!s&&!d)return equalByTag(e,t,c);if(!r){var f=d&&xe.call(e,"__wrapped__"),_=p&&xe.call(t,"__wrapped__");if(f||_)return n(f?e.value():e,_?t.value():t,i,r,o,a)}if(!h)return!1;o||(o=[]),a||(a=[]);for(var m=o.length;m--;)if(o[m]==e)return a[m]==t;o.push(e),a.push(t);var g=(s?equalArrays:equalObjects)(e,t,n,i,r,o,a);return o.pop(),a.pop(),g}function baseIsMatch(e,t,n){var i=t.length,r=i,a=!n;if(null==e)return!r;for(e=toObject(e);i--;){var s=t[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<r;){s=t[i];var l=s[0],c=e[l],u=s[1];if(a&&s[2]){if(c===o&&!(l in e))return!1}else{var d=n?n(c,u,l):o;if(!(d===o?baseIsEqual(u,c,n,!0):d))return!1}}return!0}function baseMap(e,n){var i=-1,r=isArrayLike(e)?t(e.length):[];return _t(e,function(e,t,o){r[++i]=n(e,t,o)}),r}function baseMatches(e){var t=getMatchData(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null!=e&&(e[n]===i&&(i!==o||n in toObject(e)))}}return function(e){return baseIsMatch(e,t)}}function baseMatchesProperty(e,t){var n=un(e),i=isKey(e)&&isStrictComparable(t),r=e+"";return e=toPath(e),function(a){if(null==a)return!1;var s=r;if(a=toObject(a),(n||!i)&&!(s in a)){if(null==(a=1==e.length?a:baseGet(a,baseSlice(e,0,-1))))return!1;s=last(e),a=toObject(a)}return a[s]===t?t!==o||s in a:baseIsEqual(t,a[s],o,!0)}}function baseMerge(e,t,n,i,r){if(!isObject(e))return e;var a=isArrayLike(t)&&(un(t)||isTypedArray(t)),s=a?o:Tn(t);return arrayEach(s||t,function(l,c){if(s&&(c=l,l=t[c]),isObjectLike(l))i||(i=[]),r||(r=[]),baseMergeDeep(e,t,c,baseMerge,n,i,r);else{var u=e[c],d=n?n(u,l,c,e,t):o,p=d===o;p&&(d=l),d===o&&(!a||c in e)||!p&&(d===d?d===u:u!==u)||(e[c]=d)}}),e}function baseMergeDeep(e,t,n,i,r,a,s){for(var l=a.length,c=t[n];l--;)if(a[l]==c)return void(e[n]=s[l]);var u=e[n],d=r?r(u,c,n,e,t):o,p=d===o;p&&(d=c,isArrayLike(c)&&(un(c)||isTypedArray(c))?d=un(u)?u:isArrayLike(u)?arrayCopy(u):[]:isPlainObject(c)||isArguments(c)?d=isArguments(u)?toPlainObject(u):isPlainObject(u)?u:{}:p=!1),a.push(c),s.push(d),p?e[n]=i(d,c,r,a,s):(d===d?d!==u:u===u)&&(e[n]=d)}function baseProperty(e){return function(t){return null==t?o:t[e]}}function basePropertyDeep(e){var t=e+"";return e=toPath(e),function(n){return baseGet(n,e,t)}}function basePullAt(e,t){for(var n=e?t.length:0;n--;){var i=t[n];if(i!=r&&isIndex(i)){var r=i;Be.call(e,i,1)}}return e}function baseRandom(e,t){return e+Je(rt()*(t-e+1))}function baseReduce(e,t,n,i,r){return r(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}function baseSlice(e,n,i){var r=-1,a=e.length;n=null==n?0:+n||0,n<0&&(n=-n>a?0:a+n),i=i===o||i>a?a:+i||0,i<0&&(i+=a),a=n>i?0:i-n>>>0,n>>>=0;for(var s=t(a);++r<a;)s[r]=e[r+n];return s}function baseSome(e,t){var n;return _t(e,function(e,i,r){return!(n=t(e,i,r))}),!!n}function baseSortBy(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function baseSortByOrder(e,t,n){var i=getCallback(),r=-1;return t=arrayMap(t,function(e){return i(e)}),baseSortBy(baseMap(e,function(e){return{criteria:arrayMap(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return compareMultiple(e,t,n)})}function baseSum(e,t){var n=0;return _t(e,function(e,i,r){n+=+t(e,i,r)||0}),n}function baseUniq(e,t){var n=-1,i=getIndexOf(),r=e.length,o=i==baseIndexOf,a=o&&r>=b,s=a?createCache():null,l=[];s?(i=cacheIndexOf,o=!1):(a=!1,s=t?[]:l);e:for(;++n<r;){var c=e[n],u=t?t(c,n,e):c;if(o&&c===c){for(var d=s.length;d--;)if(s[d]===u)continue e;t&&s.push(u),l.push(c)}else i(s,u,0)<0&&((t||a)&&s.push(u),l.push(c))}return l}function baseValues(e,n){for(var i=-1,r=n.length,o=t(r);++i<r;)o[i]=e[n[i]];return o}function baseWhile(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?baseSlice(e,i?0:o,i?o+1:r):baseSlice(e,i?o+1:0,i?r:o)}function baseWrapperValue(e,t){var n=e;n instanceof LazyWrapper&&(n=n.value());for(var i=-1,r=t.length;++i<r;){var o=t[i];n=o.func.apply(o.thisArg,arrayPush([n],o.args))}return n}function binaryIndex(e,t,n){var i=0,r=e?e.length:i;if("number"==typeof t&&t===t&&r<=ut){for(;i<r;){var o=i+r>>>1,a=e[o];(n?a<=t:a<t)&&null!==a?i=o+1:r=o}return r}return binaryIndexBy(e,t,identity,n)}function binaryIndexBy(e,t,n,i){t=n(t);for(var r=0,a=e?e.length:0,s=t!==t,l=null===t,c=t===o;r<a;){var u=Je((r+a)/2),d=n(e[u]),p=d!==o,h=d===d;if(s)var f=h||i;else f=l?h&&p&&(i||null!=d):c?h&&(i||p):null!=d&&(i?d<=t:d<t);f?r=u+1:a=u}return tt(a,ct)}function bindCallback(e,t,n){if("function"!=typeof e)return identity;if(t===o)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,a){return e.call(t,n,i,r,o,a)}}return function(){return e.apply(t,arguments)}}function bufferClone(e){var t=new Ne(e.byteLength);return new $e(t).set(new $e(e)),t}function composeArgs(e,n,i){for(var r=i.length,o=-1,a=et(e.length-r,0),s=-1,l=n.length,c=t(l+a);++s<l;)c[s]=n[s];for(;++o<r;)c[i[o]]=e[o];for(;a--;)c[s++]=e[o++];return c}function composeArgsRight(e,n,i){for(var r=-1,o=i.length,a=-1,s=et(e.length-o,0),l=-1,c=n.length,u=t(s+c);++a<s;)u[a]=e[a];for(var d=a;++l<c;)u[d+l]=n[l];for(;++r<o;)u[d+i[r]]=e[a++];return u}function createAggregator(e,t){return function(n,i,r){var o=t?t():{};if(i=getCallback(i,r,3),un(n))for(var a=-1,s=n.length;++a<s;){var l=n[a];e(o,l,i(l,a,n),n)}else _t(n,function(t,n,r){e(o,t,i(t,n,r),r)});return o}}function createAssigner(e){return restParam(function(t,n){var i=-1,r=null==t?0:n.length,a=r>2?n[r-2]:o,s=r>2?n[2]:o,l=r>1?n[r-1]:o;for("function"==typeof a?(a=bindCallback(a,l,5),r-=2):(a="function"==typeof l?l:o,r-=a?1:0),s&&isIterateeCall(n[0],n[1],s)&&(a=r<3?o:a,r=1);++i<r;){var c=n[i];c&&e(t,c,a)}return t})}function createBaseEach(e,t){return function(n,i){var r=n?wt(n):0;if(!isLength(r))return e(n,i);for(var o=t?r:-1,a=toObject(n);(t?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function createBaseFor(e){return function(t,n,i){for(var r=toObject(t),o=i(t),a=o.length,s=e?a:-1;e?s--:++s<a;){var l=o[s];if(!1===n(r[l],l,r))break}return t}}function createBindWrapper(e,t){function wrapper(){return(this&&this!==Ye&&this instanceof wrapper?n:e).apply(t,arguments)}var n=createCtorWrapper(e);return wrapper}function createCache(e){return Ke&&Ue?new SetCache(e):null}function createCompounder(e){return function(t){for(var n=-1,i=words(deburr(t)),r=i.length,o="";++n<r;)o=e(o,i[n],n);return o}}function createCtorWrapper(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=ft(e.prototype),i=e.apply(n,t);return isObject(i)?i:n}}function createCurry(e){function curryFunc(t,n,i){i&&isIterateeCall(t,n,i)&&(n=o);var r=createWrapper(t,e,o,o,o,o,o,n);return r.placeholder=curryFunc.placeholder,r}return curryFunc}function createDefaults(e,t){return restParam(function(n){var i=n[0];return null==i?i:(n.push(t),e.apply(o,n))})}function createExtremum(e,t){return function(n,i,r){if(r&&isIterateeCall(n,i,r)&&(i=o),i=getCallback(i,r,3),1==i.length){n=un(n)?n:toIterable(n);var a=arrayExtremum(n,i,e,t);if(!n.length||a!==t)return a}return baseExtremum(n,i,e,t)}}function createFind(e,t){return function(n,i,r){if(i=getCallback(i,r,3),un(n)){var a=baseFindIndex(n,i,t);return a>-1?n[a]:o}return baseFind(n,i,e)}}function createFindIndex(e){return function(t,n,i){return t&&t.length?(n=getCallback(n,i,3),baseFindIndex(t,n,e)):-1}}function createFindKey(e){return function(t,n,i){return n=getCallback(n,i,3),baseFind(t,n,e,!0)}}function createFlow(e){return function(){for(var n,i=arguments.length,r=e?i:-1,a=0,s=t(i);e?r--:++r<i;){var l=s[a++]=arguments[r];if("function"!=typeof l)throw new Le(C);!n&&LodashWrapper.prototype.thru&&"wrapper"==getFuncName(l)&&(n=new LodashWrapper([],!0))}for(r=n?-1:i;++r<i;){l=s[r];var c=getFuncName(l),d="wrapper"==c?Tt(l):o;n=d&&isLaziable(d[0])&&d[1]==(f|u|p|_)&&!d[4].length&&1==d[9]?n[getFuncName(d[0])].apply(n,d[3]):1==l.length&&isLaziable(l)?n[c]():n.thru(l)}return function(){var e=arguments,t=e[0];if(n&&1==e.length&&un(t)&&t.length>=b)return n.plant(t).value();for(var r=0,o=i?s[r].apply(this,e):t;++r<i;)o=s[r].call(this,o);return o}}}function createForEach(e,t){return function(n,i,r){return"function"==typeof i&&r===o&&un(n)?e(n,i):t(n,bindCallback(i,r,3))}}function createForIn(e){return function(t,n,i){return"function"==typeof n&&i===o||(n=bindCallback(n,i,3)),e(t,n,keysIn)}}function createForOwn(e){return function(t,n,i){return"function"==typeof n&&i===o||(n=bindCallback(n,i,3)),e(t,n)}}function createObjectMapper(e){return function(t,n,i){var r={};return n=getCallback(n,i,3),baseForOwn(t,function(t,i,o){var a=n(t,i,o);i=e?a:i,t=e?t:a,r[i]=t}),r}}function createPadDir(e){return function(t,n,i){return t=baseToString(t),(e?t:"")+createPadding(t,n,i)+(e?"":t)}}function createPartial(e){var t=restParam(function(n,i){var r=replaceHolders(i,t.placeholder);return createWrapper(n,e,o,i,r)});return t}function createReduce(e,t){return function(n,i,r,a){var s=arguments.length<3;return"function"==typeof i&&a===o&&un(n)?e(n,i,r,s):baseReduce(n,getCallback(i,a,4),r,s,t)}}function createHybridWrapper(e,n,i,r,a,_,m,g,v,y){function wrapper(){for(var c=arguments.length,u=c,d=t(c);u--;)d[u]=arguments[u];if(r&&(d=composeArgs(d,r,a)),_&&(d=composeArgsRight(d,_,m)),C||k){var f=wrapper.placeholder,E=replaceHolders(d,f);if((c-=E.length)<y){var S=g?arrayCopy(g):o,D=et(y-c,0),O=C?E:o,x=C?o:E,R=C?d:o,A=C?o:d;n|=C?p:h,n&=~(C?h:p),M||(n&=~(s|l));var P=[e,n,i,R,O,A,x,S,v,D],Y=createHybridWrapper.apply(o,P);return isLaziable(e)&&Ct(Y,P),Y.placeholder=f,Y}}var I=T?i:this,j=w?I[e]:e;return g&&(d=reorder(d,g)),b&&v<d.length&&(d.length=v),this&&this!==Ye&&this instanceof wrapper&&(j=L||createCtorWrapper(e)),j.apply(I,d)}var b=n&f,T=n&s,w=n&l,C=n&u,M=n&c,k=n&d,L=w?o:createCtorWrapper(e);return wrapper}function createPadding(e,t,n){var i=e.length;if(t=+t,i>=t||!Qe(t))return"";var r=t-i;return n=null==n?" ":n+"",repeat(n,Ge(r/n.length)).slice(0,r)}function createPartialWrapper(e,n,i,r){function wrapper(){for(var n=-1,s=arguments.length,l=-1,c=r.length,u=t(c+s);++l<c;)u[l]=r[l];for(;s--;)u[l++]=arguments[++n];return(this&&this!==Ye&&this instanceof wrapper?a:e).apply(o?i:this,u)}var o=n&s,a=createCtorWrapper(e);return wrapper}function createRound(e){var t=x[e];return function(e,n){return n=n===o?0:+n||0,n?(n=We(10,n),t(e*n)/n):t(e)}}function createSortedIndex(e){return function(t,n,i,r){var o=getCallback(i);return null==i&&o===baseCallback?binaryIndex(t,n,e):binaryIndexBy(t,n,o(i,r,1),e)}}function createWrapper(e,t,n,i,r,a,c,u){var d=t&l;if(!d&&"function"!=typeof e)throw new Le(C);var f=i?i.length:0;if(f||(t&=~(p|h),i=r=o),f-=r?r.length:0,t&h){var _=i,m=r;i=r=o}var g=d?o:Tt(e),v=[e,t,n,i,r,_,m,a,c,u];if(g&&(mergeData(v,g),t=v[1],u=v[9]),v[9]=null==u?d?0:e.length:et(u-f,0)||0,t==s)var y=createBindWrapper(v[0],v[2]);else y=t!=p&&t!=(s|p)||v[4].length?createHybridWrapper.apply(o,v):createPartialWrapper.apply(o,v);return(g?bt:Ct)(y,v)}function equalArrays(e,t,n,i,r,a,s){var l=-1,c=e.length,u=t.length;if(c!=u&&!(r&&u>c))return!1;for(;++l<c;){var d=e[l],p=t[l],h=i?i(r?p:d,r?d:p,l):o;if(h!==o){if(h)continue;return!1}if(r){if(!arraySome(t,function(e){return d===e||n(d,e,i,r,a,s)}))return!1}else if(d!==p&&!n(d,p,i,r,a,s))return!1}return!0}function equalByTag(e,t,n){switch(n){case E:case S:return+e==+t;case D:return e.name==t.name&&e.message==t.message;case R:return e!=+e?t!=+t:e==+t;case P:case I:return e==t+""}return!1}function equalObjects(e,t,n,i,r,a,s){var l=Tn(e),c=l.length;if(c!=Tn(t).length&&!r)return!1;for(var u=c;u--;){var d=l[u];if(!(r?d in t:xe.call(t,d)))return!1}for(var p=r;++u<c;){d=l[u];var h=e[d],f=t[d],_=i?i(r?f:h,r?h:f,d):o;if(!(_===o?n(h,f,i,r,a,s):_))return!1;p||(p="constructor"==d)}if(!p){var m=e.constructor,g=t.constructor;if(m!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g))return!1}return!0}function getCallback(e,t,n){var i=lodash.callback||callback;return i=i===callback?baseCallback:i,n?i(e,t,n):i}function getFuncName(e){for(var t=e.name,n=ht[t],i=n?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function getIndexOf(e,t,n){var i=lodash.indexOf||indexOf;return i=i===indexOf?baseIndexOf:i,e?i(e,t,n):i}function getMatchData(e){for(var t=pairs(e),n=t.length;n--;)t[n][2]=isStrictComparable(t[n][1]);return t}function getNative(e,t){var n=null==e?o:e[t];return isNative(n)?n:o}function getView(e,t,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=tt(t,e+a);break;case"takeRight":e=et(e,t-a)}}return{start:e,end:t}}function initCloneArray(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&xe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function initCloneObject(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=j),new t}function initCloneByTag(e,t,n){var i=e.constructor;switch(t){case N:return bufferClone(e);case E:case S:return new i(+e);case F:case q:case W:case H:case U:case z:case B:case $:case V:var r=e.buffer;return new i(n?bufferClone(r):r,e.byteOffset,e.length);case R:case I:return new i(e);case P:var o=new i(e.source,pe.exec(e));o.lastIndex=e.lastIndex}return o}function invokePath(e,t,n){null==e||isKey(t,e)||(t=toPath(t),e=1==t.length?e:baseGet(e,baseSlice(t,0,-1)),t=last(t));var i=null==e?e:e[t];return null==i?o:i.apply(e,n)}function isArrayLike(e){return null!=e&&isLength(wt(e))}function isIndex(e,t){return e="number"==typeof e||_e.test(e)?+e:-1,t=null==t?dt:t,e>-1&&e%1==0&&e<t}function isIterateeCall(e,t,n){if(!isObject(n))return!1;var i=typeof t;if("number"==i?isArrayLike(n)&&isIndex(t,n.length):"string"==i&&t in n){var r=n[t];return e===e?e===r:r!==r}return!1}function isKey(e,t){var n=typeof e;return!!("string"==n&&oe.test(e)||"number"==n)||!un(e)&&(!re.test(e)||null!=t&&e in toObject(t))}function isLaziable(e){var t=getFuncName(e);if(!(t in LazyWrapper.prototype))return!1;var n=lodash[t];if(e===n)return!0;var i=Tt(n);return!!i&&e===i[0]}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=dt}function isStrictComparable(e){return e===e&&!isObject(e)}function mergeData(e,t){var n=e[1],i=t[1],r=n|i,o=r<f,a=i==f&&n==u||i==f&&n==_&&e[7].length<=t[8]||i==(f|_)&&n==u;if(!o&&!a)return e;i&s&&(e[2]=t[2],r|=n&s?0:c);var l=t[3];if(l){var d=e[3];e[3]=d?composeArgs(d,l,t[4]):arrayCopy(l),e[4]=d?replaceHolders(e[3],M):arrayCopy(t[4])}return l=t[5],l&&(d=e[5],e[5]=d?composeArgsRight(d,l,t[6]):arrayCopy(l),e[6]=d?replaceHolders(e[5],M):arrayCopy(t[6])),l=t[7],l&&(e[7]=arrayCopy(l)),i&f&&(e[8]=null==e[8]?t[8]:tt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}function mergeDefaults(e,t){return e===o?t:dn(e,t,mergeDefaults)}function pickByArray(e,t){e=toObject(e);for(var n=-1,i=t.length,r={};++n<i;){var o=t[n];o in e&&(r[o]=e[o])}return r}function pickByCallback(e,t){var n={};return baseForIn(e,function(e,i,r){t(e,i,r)&&(n[i]=e)}),n}function reorder(e,t){for(var n=e.length,i=tt(t.length,n),r=arrayCopy(e);i--;){var a=t[i];e[i]=isIndex(a,n)?r[a]:o}return e}function shimKeys(e){for(var t=keysIn(e),n=t.length,i=n&&e.length,r=!!i&&isLength(i)&&(un(e)||isArguments(e)),o=-1,a=[];++o<n;){var s=t[o];(r&&isIndex(s,i)||xe.call(e,s))&&a.push(s)}return a}function toIterable(e){return null==e?[]:isArrayLike(e)?isObject(e)?e:j(e):values(e)}function toObject(e){return isObject(e)?e:j(e)}function toPath(e){if(un(e))return e;var t=[];return baseToString(e).replace(ae,function(e,n,i,r){t.push(i?r.replace(ue,"$1"):n||e)}),t}function wrapperClone(e){return e instanceof LazyWrapper?e.clone():new LodashWrapper(e.__wrapped__,e.__chain__,arrayCopy(e.__actions__))}function chunk(e,n,i){n=(i?isIterateeCall(e,n,i):null==n)?1:et(Je(n)||1,1);for(var r=0,o=e?e.length:0,a=-1,s=t(Ge(o/n));r<o;)s[++a]=baseSlice(e,r,r+=n);return s}function compact(e){for(var t=-1,n=e?e.length:0,i=-1,r=[];++t<n;){var o=e[t];o&&(r[++i]=o)}return r}function drop(e,t,n){return(e?e.length:0)?((n?isIterateeCall(e,t,n):null==t)&&(t=1),baseSlice(e,t<0?0:t)):[]}function dropRight(e,t,n){var i=e?e.length:0;return i?((n?isIterateeCall(e,t,n):null==t)&&(t=1),t=i-(+t||0),baseSlice(e,0,t<0?0:t)):[]}function dropRightWhile(e,t,n){return e&&e.length?baseWhile(e,getCallback(t,n,3),!0,!0):[]}function dropWhile(e,t,n){return e&&e.length?baseWhile(e,getCallback(t,n,3),!0):[]}function fill(e,t,n,i){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&isIterateeCall(e,t,n)&&(n=0,i=r),baseFill(e,t,n,i)):[]}function first(e){return e?e[0]:o}function flatten(e,t,n){var i=e?e.length:0;return n&&isIterateeCall(e,t,n)&&(t=!1),i?baseFlatten(e,t):[]}function flattenDeep(e){return(e?e.length:0)?baseFlatten(e,!0):[]}function indexOf(e,t,n){var i=e?e.length:0;if(!i)return-1;if("number"==typeof n)n=n<0?et(i+n,0):n;else if(n){var r=binaryIndex(e,t);return r<i&&(t===t?t===e[r]:e[r]!==e[r])?r:-1}return baseIndexOf(e,t,n||0)}function initial(e){return dropRight(e,1)}function last(e){var t=e?e.length:0;return t?e[t-1]:o}function lastIndexOf(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=i;if("number"==typeof n)r=(n<0?et(i+n,0):tt(n||0,i-1))+1;else if(n){r=binaryIndex(e,t,!0)-1;var o=e[r];return(t===t?t===o:o!==o)?r:-1}if(t!==t)return indexOfNaN(e,r,!0);for(;r--;)if(e[r]===t)return r;return-1}function pull(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,i=getIndexOf(),r=e.length;++n<r;)for(var o=0,a=e[n];(o=i(t,a,o))>-1;)Be.call(t,o,1);return t}function remove(e,t,n){var i=[];if(!e||!e.length)return i;var r=-1,o=[],a=e.length;for(t=getCallback(t,n,3);++r<a;){var s=e[r];t(s,r,e)&&(i.push(s),o.push(r))}return basePullAt(e,o),i}function rest(e){return drop(e,1)}function slice(e,t,n){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&isIterateeCall(e,t,n)&&(t=0,n=i),baseSlice(e,t,n)):[]}function take(e,t,n){return(e?e.length:0)?((n?isIterateeCall(e,t,n):null==t)&&(t=1),baseSlice(e,0,t<0?0:t)):[]}function takeRight(e,t,n){var i=e?e.length:0;return i?((n?isIterateeCall(e,t,n):null==t)&&(t=1),t=i-(+t||0),baseSlice(e,t<0?0:t)):[]}function takeRightWhile(e,t,n){return e&&e.length?baseWhile(e,getCallback(t,n,3),!1,!0):[]}function takeWhile(e,t,n){return e&&e.length?baseWhile(e,getCallback(t,n,3)):[]}function uniq(e,t,n,i){if(!(e?e.length:0))return[];null!=t&&"boolean"!=typeof t&&(i=n,n=isIterateeCall(e,t,i)?o:t,t=!1);var r=getCallback();return null==n&&r===baseCallback||(n=r(n,i,3)),t&&getIndexOf()==baseIndexOf?sortedUniq(e,n):baseUniq(e,n)}function unzip(e){if(!e||!e.length)return[];var n=-1,i=0;e=arrayFilter(e,function(e){if(isArrayLike(e))return i=et(e.length,i),!0});for(var r=t(i);++n<i;)r[n]=arrayMap(e,baseProperty(n));return r}function unzipWith(e,t,n){if(!(e?e.length:0))return[];var i=unzip(e);return null==t?i:(t=bindCallback(t,n,4),arrayMap(i,function(e){return arrayReduce(e,t,o,!0)}))}function xor(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(isArrayLike(n))var i=i?arrayPush(baseDifference(i,n),baseDifference(n,i)):n}return i?baseUniq(i):[]}function zipObject(e,t){var n=-1,i=e?e.length:0,r={};for(!i||t||un(e[0])||(t=[]);++n<i;){var o=e[n];t?r[o]=t[n]:o&&(r[o[0]]=o[1])}return r}function chain(e){var t=lodash(e);return t.__chain__=!0,t}function tap(e,t,n){return t.call(n,e),e}function thru(e,t,n){return t.call(n,e)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperPlant(e){for(var t,n=this;n instanceof baseLodash;){var i=wrapperClone(n);t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t}function wrapperReverse(){var e=this.__wrapped__,t=function(e){return n&&n.__dir__<0?e:e.reverse()};if(e instanceof LazyWrapper){var n=e;return this.__actions__.length&&(n=new LazyWrapper(this)),n=n.reverse(),n.__actions__.push({func:thru,args:[t],thisArg:o}),new LodashWrapper(n,this.__chain__)}return this.thru(t)}function wrapperToString(){return this.value()+""}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}function every(e,t,n){var i=un(e)?arrayEvery:baseEvery;return n&&isIterateeCall(e,t,n)&&(t=o),"function"==typeof t&&n===o||(t=getCallback(t,n,3)),i(e,t)}function filter(e,t,n){var i=un(e)?arrayFilter:baseFilter;return t=getCallback(t,n,3),i(e,t)}function findWhere(e,t){return Nt(e,baseMatches(t))}function includes(e,t,n,i){var r=e?wt(e):0;return isLength(r)||(e=values(e),r=e.length),n="number"!=typeof n||i&&isIterateeCall(t,n,i)?0:n<0?et(r+n,0):n||0,"string"==typeof e||!un(e)&&isString(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&getIndexOf(e,t,n)>-1}function map(e,t,n){var i=un(e)?arrayMap:baseMap;return t=getCallback(t,n,3),i(e,t)}function pluck(e,t){return map(e,property(t))}function reject(e,t,n){var i=un(e)?arrayFilter:baseFilter;return t=getCallback(t,n,3),i(e,function(e,n,i){return!t(e,n,i)})}function sample(e,t,n){if(n?isIterateeCall(e,t,n):null==t){e=toIterable(e);var i=e.length;return i>0?e[baseRandom(0,i-1)]:o}var r=-1,a=toArray(e),i=a.length,s=i-1;for(t=tt(t<0?0:+t||0,i);++r<t;){var l=baseRandom(r,s),c=a[l];a[l]=a[r],a[r]=c}return a.length=t,a}function shuffle(e){return sample(e,at)}function size(e){var t=e?wt(e):0;return isLength(t)?t:Tn(e).length}function some(e,t,n){var i=un(e)?arraySome:baseSome;return n&&isIterateeCall(e,t,n)&&(t=o),"function"==typeof t&&n===o||(t=getCallback(t,n,3)),i(e,t)}function sortBy(e,t,n){if(null==e)return[];n&&isIterateeCall(e,t,n)&&(t=o);var i=-1;return t=getCallback(t,n,3),baseSortBy(baseMap(e,function(e,n,r){return{criteria:t(e,n,r),index:++i,value:e}}),compareAscending)}function sortByOrder(e,t,n,i){return null==e?[]:(i&&isIterateeCall(t,n,i)&&(n=o),un(t)||(t=null==t?[]:[t]),un(n)||(n=null==n?[]:[n]),baseSortByOrder(e,t,n))}function where(e,t){return filter(e,baseMatches(t))}function after(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Le(C);var n=e;e=t,t=n}return e=Qe(e=+e)?e:0,function(){if(--e<1)return t.apply(this,arguments)}}function ary(e,t,n){return n&&isIterateeCall(e,t,n)&&(t=o),t=e&&null==t?e.length:et(+t||0,0),createWrapper(e,f,o,o,o,o,t)}function before(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Le(C);var i=e;e=t,t=i}return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}function debounce(e,t,n){function cancel(){c&&Fe(c),r&&Fe(r),d=0,r=c=u=o}function complete(t,n){n&&Fe(n),r=c=u=o,t&&(d=Kt(),a=e.apply(l,i),c||r||(i=l=o))}function delayed(){var e=t-(Kt()-s);e<=0||e>t?complete(u,r):c=ze(delayed,e)}function maxDelayed(){complete(h,c)}function debounced(){if(i=arguments,s=Kt(),l=this,u=h&&(c||!f),!1===p)var n=f&&!c;else{r||f||(d=s);var _=p-(s-d),m=_<=0||_>p;m?(r&&(r=Fe(r)),d=s,a=e.apply(l,i)):r||(r=ze(maxDelayed,_))}return m&&c?c=Fe(c):c||t===p||(c=ze(delayed,t)),n&&(m=!0,a=e.apply(l,i)),!m||c||r||(i=l=o),a}var i,r,a,s,l,c,u,d=0,p=!1,h=!0;if("function"!=typeof e)throw new Le(C);if(t=t<0?0:+t||0,!0===n){var f=!0;h=!1}else isObject(n)&&(f=!!n.leading,p="maxWait"in n&&et(+n.maxWait||0,t),h="trailing"in n?!!n.trailing:h);return debounced.cancel=cancel,debounced}function memoize(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Le(C);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a),a};return n.cache=new memoize.Cache,n}function negate(e){if("function"!=typeof e)throw new Le(C);return function(){return!e.apply(this,arguments)}}function once(e){return before(2,e)}function restParam(e,n){if("function"!=typeof e)throw new Le(C);return n=et(n===o?e.length-1:+n||0,0),function(){for(var i=arguments,r=-1,o=et(i.length-n,0),a=t(o);++r<o;)a[r]=i[n+r];switch(n){case 0:return e.call(this,a);case 1:return e.call(this,i[0],a);case 2:return e.call(this,i[0],i[1],a)}var s=t(n+1);for(r=-1;++r<n;)s[r]=i[r];return s[n]=a,e.apply(this,s)}}function spread(e){if("function"!=typeof e)throw new Le(C);return function(t){return e.apply(this,t)}}function throttle(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Le(C);return!1===n?i=!1:isObject(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),debounce(e,t,{leading:i,maxWait:+t,trailing:r})}function wrap(e,t){return t=null==t?identity:t,createWrapper(t,p,o,[e],[])}function clone(e,t,n,i){return t&&"boolean"!=typeof t&&isIterateeCall(e,t,n)?t=!1:"function"==typeof t&&(i=n,n=t,t=!1),"function"==typeof n?baseClone(e,t,bindCallback(n,i,1)):baseClone(e,t)}function cloneDeep(e,t,n){return"function"==typeof t?baseClone(e,!0,bindCallback(t,n,1)):baseClone(e,!0)}function gt(e,t){return e>t}function gte(e,t){return e>=t}function isArguments(e){return isObjectLike(e)&&isArrayLike(e)&&xe.call(e,"callee")&&!He.call(e,"callee")}function isBoolean(e){return!0===e||!1===e||isObjectLike(e)&&Ae.call(e)==E}function isDate(e){return isObjectLike(e)&&Ae.call(e)==S}function isElement(e){return!!e&&1===e.nodeType&&isObjectLike(e)&&!isPlainObject(e)}function isEmpty(e){return null==e||(isArrayLike(e)&&(un(e)||isString(e)||isArguments(e)||isObjectLike(e)&&isFunction(e.splice))?!e.length:!Tn(e).length)}function isEqual(e,t,n,i){n="function"==typeof n?bindCallback(n,i,3):o;var r=n?n(e,t):o;return r===o?baseIsEqual(e,t,n):!!r}function isError(e){return isObjectLike(e)&&"string"==typeof e.message&&Ae.call(e)==D}function isFinite(e){return"number"==typeof e&&Qe(e)}function isFunction(e){return isObject(e)&&Ae.call(e)==O}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isMatch(e,t,n,i){return n="function"==typeof n?bindCallback(n,i,3):o,baseIsMatch(e,getMatchData(t),n)}function isNaN(e){return isNumber(e)&&e!=+e}function isNative(e){return null!=e&&(isFunction(e)?je.test(Oe.call(e)):isObjectLike(e)&&fe.test(e))}function isNull(e){return null===e}function isNumber(e){return"number"==typeof e||isObjectLike(e)&&Ae.call(e)==R}function isPlainObject(e){var t;if(!isObjectLike(e)||Ae.call(e)!=A||isArguments(e)||!xe.call(e,"constructor")&&"function"==typeof(t=e.constructor)&&!(t instanceof t))return!1;var n;return baseForIn(e,function(e,t){n=t}),n===o||xe.call(e,n)}function isRegExp(e){return isObject(e)&&Ae.call(e)==P}function isString(e){return"string"==typeof e||isObjectLike(e)&&Ae.call(e)==I}function isTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!we[Ae.call(e)]}function isUndefined(e){return e===o}function lt(e,t){return e<t}function lte(e,t){return e<=t}function toArray(e){var t=e?wt(e):0;return isLength(t)?t?arrayCopy(e):[]:values(e)}function toPlainObject(e){return baseCopy(e,keysIn(e))}function create(e,t,n){var i=ft(e);return n&&isIterateeCall(e,t,n)&&(t=o),t?baseAssign(i,t):i}function functions(e){return baseFunctions(e,keysIn(e))}function get(e,t,n){var i=null==e?o:baseGet(e,toPath(t),t+"");return i===o?n:i}function has(e,t){if(null==e)return!1;var n=xe.call(e,t);if(!n&&!isKey(t)){if(t=toPath(t),null==(e=1==t.length?e:baseGet(e,baseSlice(t,0,-1))))return!1;t=last(t),n=xe.call(e,t)}return n||isLength(e.length)&&isIndex(t,e.length)&&(un(e)||isArguments(e))}function invert(e,t,n){n&&isIterateeCall(e,t,n)&&(t=o);for(var i=-1,r=Tn(e),a=r.length,s={};++i<a;){var l=r[i],c=e[l];t?xe.call(s,c)?s[c].push(l):s[c]=[l]:s[c]=l}return s}function keysIn(e){if(null==e)return[];isObject(e)||(e=j(e));var n=e.length;n=n&&isLength(n)&&(un(e)||isArguments(e))&&n||0;for(var i=e.constructor,r=-1,o="function"==typeof i&&i.prototype===e,a=t(n),s=n>0;++r<n;)a[r]=r+"";for(var l in e)s&&isIndex(l,n)||"constructor"==l&&(o||!xe.call(e,l))||a.push(l);return a}function pairs(e){e=toObject(e);for(var n=-1,i=Tn(e),r=i.length,o=t(r);++n<r;){var a=i[n];o[n]=[a,e[a]]}return o}function result(e,t,n){var i=null==e?o:e[t];return i===o&&(null==e||isKey(t,e)||(t=toPath(t),e=1==t.length?e:baseGet(e,baseSlice(t,0,-1)),i=null==e?o:e[last(t)]),i=i===o?n:i),isFunction(i)?i.call(e):i}function set(e,t,n){if(null==e)return e;var i=t+"";t=null!=e[i]||isKey(t,e)?[i]:toPath(t);for(var r=-1,o=t.length,a=o-1,s=e;null!=s&&++r<o;){var l=t[r];isObject(s)&&(r==a?s[l]=n:null==s[l]&&(s[l]=isIndex(t[r+1])?[]:{})),s=s[l]}return e}function transform(e,t,n,i){var r=un(e)||isTypedArray(e);if(t=getCallback(t,i,4),null==n)if(r||isObject(e)){var a=e.constructor;n=r?un(e)?new a:[]:ft(isFunction(a)?a.prototype:o)}else n={};return(r?arrayEach:baseForOwn)(e,function(e,i,r){return t(n,e,i,r)}),n}function values(e){return baseValues(e,Tn(e))}function valuesIn(e){return baseValues(e,keysIn(e))}function inRange(e,t,n){return t=+t||0,n===o?(n=t,t=0):n=+n||0,e>=tt(t,n)&&e<et(t,n)}function random(e,t,n){n&&isIterateeCall(e,t,n)&&(t=n=o);var i=null==e,r=null==t;if(null==n&&(r&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,r=!0)),i&&r&&(t=1,r=!1),e=+e||0,r?(t=e,e=0):t=+t||0,n||e%1||t%1){var a=rt();return tt(e+a*(t-e+qe("1e-"+((a+"").length-1))),t)}return baseRandom(e,t)}function capitalize(e){return(e=baseToString(e))&&e.charAt(0).toUpperCase()+e.slice(1)}function deburr(e){return(e=baseToString(e))&&e.replace(me,deburrLetter).replace(ce,"")}function endsWith(e,t,n){e=baseToString(e),t+="";var i=e.length;return n=n===o?i:tt(n<0?0:+n||0,i),(n-=t.length)>=0&&e.indexOf(t,n)==n}function escape(e){return e=baseToString(e),e&&ee.test(e)?e.replace(Q,escapeHtmlChar):e}function escapeRegExp(e){return e=baseToString(e),e&&le.test(e)?e.replace(se,escapeRegExpChar):e||"(?:)"}function pad(e,t,n){e=baseToString(e),t=+t;var i=e.length;if(i>=t||!Qe(t))return e;var r=(t-i)/2,o=Je(r);return n=createPadding("",Ge(r),n),n.slice(0,o)+e+n}function parseInt(e,t,n){return(n?isIterateeCall(e,t,n):null==t)?t=0:t&&(t=+t),e=trim(e),it(e,t||(he.test(e)?16:10))}function repeat(e,t){var n="";if(e=baseToString(e),(t=+t)<1||!e||!Qe(t))return n;do{t%2&&(n+=e),t=Je(t/2),e+=e}while(t);return n}function startsWith(e,t,n){return e=baseToString(e),n=null==n?0:tt(n<0?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function template(e,t,n){var i=lodash.templateSettings;n&&isIterateeCall(e,t,n)&&(t=n=o),e=baseToString(e),t=assignWith(baseAssign({},n||t),i,assignOwnDefaults);var a,s,l=assignWith(baseAssign({},t.imports),i.imports,assignOwnDefaults),c=Tn(l),u=baseValues(l,c),d=0,p=t.interpolate||ge,h="__p += '",f=Me((t.escape||ge).source+"|"+p.source+"|"+(p===ie?de:ge).source+"|"+(t.evaluate||ge).source+"|$","g"),_="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Te+"]")+"\n";e.replace(f,function(t,n,i,r,o,l){return i||(i=r),h+=e.slice(d,l).replace(ve,escapeStringChar),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),o&&(s=!0,h+="';\n"+o+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),d=l+t.length,t}),h+="';\n";var m=t.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(s?h.replace(G,""):h).replace(K,"$1").replace(J,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Rn(function(){return r(c,_+"return "+h).apply(o,u)});if(g.source=h,isError(g))throw g;return g}function trim(e,t,n){var i=e;return(e=baseToString(e))?(n?isIterateeCall(i,t,n):null==t)?e.slice(trimmedLeftIndex(e),trimmedRightIndex(e)+1):(t+="",e.slice(charsLeftIndex(e,t),charsRightIndex(e,t)+1)):e}function trimLeft(e,t,n){var i=e;return e=baseToString(e),e?(n?isIterateeCall(i,t,n):null==t)?e.slice(trimmedLeftIndex(e)):e.slice(charsLeftIndex(e,t+"")):e}function trimRight(e,t,n){var i=e;return e=baseToString(e),e?(n?isIterateeCall(i,t,n):null==t)?e.slice(0,trimmedRightIndex(e)+1):e.slice(0,charsRightIndex(e,t+"")+1):e}function trunc(e,t,n){n&&isIterateeCall(e,t,n)&&(t=o);var i=m,r=g;if(null!=t)if(isObject(t)){var a="separator"in t?t.separator:a;i="length"in t?+t.length||0:i,r="omission"in t?baseToString(t.omission):r}else i=+t||0;if(e=baseToString(e),i>=e.length)return e;var s=i-r.length;if(s<1)return r;var l=e.slice(0,s);if(null==a)return l+r;if(isRegExp(a)){if(e.slice(s).search(a)){var c,u,d=e.slice(0,s);for(a.global||(a=Me(a.source,(pe.exec(a)||"")+"g")),a.lastIndex=0;c=a.exec(d);)u=c.index;l=l.slice(0,null==u?s:u)}}else if(e.indexOf(a,s)!=s){var p=l.lastIndexOf(a);p>-1&&(l=l.slice(0,p))}return l+r}function unescape(e){return e=baseToString(e),e&&Z.test(e)?e.replace(X,unescapeHtmlChar):e}function words(e,t,n){return n&&isIterateeCall(e,t,n)&&(t=o),e=baseToString(e),e.match(t||ye)||[]}function callback(e,t,n){return n&&isIterateeCall(e,t,n)&&(t=o),isObjectLike(e)?matches(e):baseCallback(e,t)}function constant(e){return function(){return e}}function identity(e){return e}function matches(e){return baseMatches(baseClone(e,!0))}function matchesProperty(e,t){return baseMatchesProperty(e,baseClone(t,!0))}function mixin(e,t,n){if(null==n){var i=isObject(t),r=i?Tn(t):o,a=r&&r.length?baseFunctions(t,r):o;(a?a.length:i)||(a=!1,n=t,t=e,e=this)}a||(a=baseFunctions(t,Tn(t)));var s=!0,l=-1,c=isFunction(e),u=a.length;!1===n?s=!1:isObject(n)&&"chain"in n&&(s=n.chain);for(;++l<u;){var d=a[l],p=t[d];e[d]=p,c&&(e.prototype[d]=function(t){return function(){var n=this.__chain__;if(s||n){var i=e(this.__wrapped__);return(i.__actions__=arrayCopy(this.__actions__)).push({func:t,args:arguments,thisArg:e}),i.__chain__=n,i}return t.apply(e,arrayPush([this.value()],arguments))}}(p))}return e}function noConflict(){return Ye._=Pe,this}function noop(){}function property(e){return isKey(e)?baseProperty(e):basePropertyDeep(e)}function propertyOf(e){return function(t){return baseGet(e,toPath(t),t+"")}}function range(e,n,i){i&&isIterateeCall(e,n,i)&&(n=i=o),e=+e||0,i=null==i?1:+i||0,null==n?(n=e,e=0):n=+n||0;for(var r=-1,a=et(Ge((n-e)/(i||1)),0),s=t(a);++r<a;)s[r]=e,e+=i;return s}function times(e,n,i){if((e=Je(e))<1||!Qe(e))return[];var r=-1,o=t(tt(e,st));for(n=bindCallback(n,i,1);++r<e;)r<st?o[r]=n(r):n(r);return o}function uniqueId(e){var t=++Re;return baseToString(e)+t}function add(e,t){return(+e||0)+(+t||0)}function sum(e,t,n){return n&&isIterateeCall(e,t,n)&&(t=o),t=getCallback(t,n,3),1==t.length?arraySum(un(e)?e:toIterable(e),t):baseSum(e,t)}e=e?Ie.defaults(Ye.Object(),e,Ie.pick(Ye,be)):Ye;var t=e.Array,n=e.Date,i=e.Error,r=e.Function,x=e.Math,Y=e.Number,j=e.Object,Me=e.RegExp,ke=e.String,Le=e.TypeError,Ee=t.prototype,Se=j.prototype,De=ke.prototype,Oe=r.prototype.toString,xe=Se.hasOwnProperty,Re=0,Ae=Se.toString,Pe=Ye._,je=Me("^"+Oe.call(xe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=e.ArrayBuffer,Fe=e.clearTimeout,qe=e.parseFloat,We=x.pow,He=Se.propertyIsEnumerable,Ue=getNative(e,"Set"),ze=e.setTimeout,Be=Ee.splice,$e=e.Uint8Array,Ve=getNative(e,"WeakMap"),Ge=x.ceil,Ke=getNative(j,"create"),Je=x.floor,Xe=getNative(t,"isArray"),Qe=e.isFinite,Ze=getNative(j,"keys"),et=x.max,tt=x.min,nt=getNative(n,"now"),it=e.parseInt,rt=x.random,ot=Y.NEGATIVE_INFINITY,at=Y.POSITIVE_INFINITY,st=4294967295,ct=st-1,ut=st>>>1,dt=9007199254740991,pt=Ve&&new Ve,ht={};lodash.support={};lodash.templateSettings={escape:te,evaluate:ne,interpolate:ie,variable:"",imports:{_:lodash}};var ft=function(){function object(){}return function(e){if(isObject(e)){object.prototype=e;var t=new object;object.prototype=o}return t||{}}}(),_t=createBaseEach(baseForOwn),mt=createBaseEach(baseForOwnRight,!0),vt=createBaseFor(),yt=createBaseFor(!0),bt=pt?function(e,t){return pt.set(e,t),e}:identity,Tt=pt?function(e){return pt.get(e)}:noop,wt=baseProperty("length"),Ct=function(){var e=0,t=0;return function(n,i){var r=Kt(),o=y-(r-t);if(t=r,o>0){if(++e>=v)return n}else e=0;return bt(n,i)}}(),Mt=restParam(function(e,t){return isObjectLike(e)&&isArrayLike(e)?baseDifference(e,baseFlatten(t,!1,!0)):[]}),kt=createFindIndex(),Lt=createFindIndex(!0),Et=restParam(function(e){for(var n=e.length,i=n,r=t(d),o=getIndexOf(),a=o==baseIndexOf,s=[];i--;){var l=e[i]=isArrayLike(l=e[i])?l:[];r[i]=a&&l.length>=120?createCache(i&&l):null}var c=e[0],u=-1,d=c?c.length:0,p=r[0];e:for(;++u<d;)if(l=c[u],(p?cacheIndexOf(p,l):o(s,l,0))<0){for(var i=n;--i;){var h=r[i];if((h?cacheIndexOf(h,l):o(e[i],l,0))<0)continue e}p&&p.push(l),s.push(l)}return s}),St=restParam(function(e,t){t=baseFlatten(t);var n=baseAt(e,t);return basePullAt(e,t.sort(baseCompareAscending)),n}),Dt=createSortedIndex(),Ot=createSortedIndex(!0),xt=restParam(function(e){return baseUniq(baseFlatten(e,!1,!0))}),Rt=restParam(function(e,t){return isArrayLike(e)?baseDifference(e,t):[]}),At=restParam(unzip),Pt=restParam(function(e){var t=e.length,n=t>2?e[t-2]:o,i=t>1?e[t-1]:o;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof i?(--t,i):o,i=o),e.length=t,unzipWith(e,n,i)}),Yt=restParam(function(e){return e=baseFlatten(e),this.thru(function(t){return arrayConcat(un(t)?t:[toObject(t)],e)})}),It=restParam(function(e,t){return baseAt(e,baseFlatten(t))}),jt=createAggregator(function(e,t,n){xe.call(e,n)?++e[n]:e[n]=1}),Nt=createFind(_t),Ft=createFind(mt,!0),qt=createForEach(arrayEach,_t),Wt=createForEach(arrayEachRight,mt),Ht=createAggregator(function(e,t,n){xe.call(e,n)?e[n].push(t):e[n]=[t]}),Ut=createAggregator(function(e,t,n){e[n]=t}),zt=restParam(function(e,n,i){var r=-1,a="function"==typeof n,s=isKey(n),l=isArrayLike(e)?t(e.length):[];return _t(e,function(e){var t=a?n:s&&null!=e?e[n]:o;l[++r]=t?t.apply(e,i):invokePath(e,n,i)}),l}),Bt=createAggregator(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),$t=createReduce(arrayReduce,_t),Vt=createReduce(arrayReduceRight,mt),Gt=restParam(function(e,t){if(null==e)return[];var n=t[2];return n&&isIterateeCall(t[0],t[1],n)&&(t.length=1),baseSortByOrder(e,baseFlatten(t),[])}),Kt=nt||function(){return(new n).getTime()},Jt=restParam(function(e,t,n){var i=s;if(n.length){var r=replaceHolders(n,Jt.placeholder);i|=p}return createWrapper(e,i,t,n,r)}),Xt=restParam(function(e,t){t=t.length?baseFlatten(t):functions(e);for(var n=-1,i=t.length;++n<i;){var r=t[n];e[r]=createWrapper(e[r],s,e)}return e}),Qt=restParam(function(e,t,n){var i=s|l;if(n.length){var r=replaceHolders(n,Qt.placeholder);i|=p}return createWrapper(t,i,e,n,r)}),Zt=createCurry(u),en=createCurry(d),tn=restParam(function(e,t){return baseDelay(e,1,t)}),nn=restParam(function(e,t,n){return baseDelay(e,t,n)}),rn=createFlow(),on=createFlow(!0),an=restParam(function(e,t){if(t=baseFlatten(t),"function"!=typeof e||!arrayEvery(t,baseIsFunction))throw new Le(C);var n=t.length;return restParam(function(i){for(var r=tt(i.length,n);r--;)i[r]=t[r](i[r]);return e.apply(this,i)})}),sn=createPartial(p),ln=createPartial(h),cn=restParam(function(e,t){return createWrapper(e,_,o,o,o,baseFlatten(t))}),un=Xe||function(e){return isObjectLike(e)&&isLength(e.length)&&Ae.call(e)==L},dn=createAssigner(baseMerge),pn=createAssigner(function(e,t,n){return n?assignWith(e,t,n):baseAssign(e,t)}),hn=createDefaults(pn,assignDefaults),fn=createDefaults(dn,mergeDefaults),_n=createFindKey(baseForOwn),mn=createFindKey(baseForOwnRight),gn=createForIn(vt),vn=createForIn(yt),yn=createForOwn(baseForOwn),bn=createForOwn(baseForOwnRight),Tn=Ze?function(e){var t=null==e?o:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&isArrayLike(e)?shimKeys(e):isObject(e)?Ze(e):[]}:shimKeys,wn=createObjectMapper(!0),Cn=createObjectMapper(),Mn=restParam(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=arrayMap(baseFlatten(t),ke);return pickByArray(e,baseDifference(keysIn(e),t))}var n=bindCallback(t[0],t[1],3);return pickByCallback(e,function(e,t,i){return!n(e,t,i)})}),kn=restParam(function(e,t){return null==e?{}:"function"==typeof t[0]?pickByCallback(e,bindCallback(t[0],t[1],3)):pickByArray(e,baseFlatten(t))}),Ln=createCompounder(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),En=createCompounder(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Sn=createPadDir(),Dn=createPadDir(!0),On=createCompounder(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),xn=createCompounder(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Rn=restParam(function(e,t){try{return e.apply(o,t)}catch(e){return isError(e)?e:new i(e)}}),An=restParam(function(e,t){return function(n){return invokePath(n,e,t)}}),Pn=restParam(function(e,t){return function(n){return invokePath(e,n,t)}}),Yn=createRound("ceil"),In=createRound("floor"),jn=createExtremum(gt,ot),Nn=createExtremum(lt,at),Fn=createRound("round");return lodash.prototype=baseLodash.prototype,LodashWrapper.prototype=ft(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=ft(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,MapCache.prototype.delete=mapDelete,MapCache.prototype.get=mapGet,MapCache.prototype.has=mapHas,MapCache.prototype.set=mapSet,SetCache.prototype.push=cachePush,memoize.Cache=MapCache,lodash.after=after,lodash.ary=ary,lodash.assign=pn,lodash.at=It,lodash.before=before,lodash.bind=Jt,lodash.bindAll=Xt,lodash.bindKey=Qt,lodash.callback=callback,lodash.chain=chain,lodash.chunk=chunk,lodash.compact=compact,lodash.constant=constant,lodash.countBy=jt,lodash.create=create,lodash.curry=Zt,lodash.curryRight=en,lodash.debounce=debounce,lodash.defaults=hn,lodash.defaultsDeep=fn,lodash.defer=tn,lodash.delay=nn,lodash.difference=Mt,lodash.drop=drop,lodash.dropRight=dropRight,lodash.dropRightWhile=dropRightWhile,lodash.dropWhile=dropWhile,lodash.fill=fill,lodash.filter=filter,lodash.flatten=flatten,lodash.flattenDeep=flattenDeep,lodash.flow=rn,lodash.flowRight=on,lodash.forEach=qt,lodash.forEachRight=Wt,lodash.forIn=gn,lodash.forInRight=vn,lodash.forOwn=yn,lodash.forOwnRight=bn,lodash.functions=functions,lodash.groupBy=Ht,lodash.indexBy=Ut,lodash.initial=initial,lodash.intersection=Et,lodash.invert=invert,lodash.invoke=zt,lodash.keys=Tn,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=wn,lodash.mapValues=Cn,lodash.matches=matches,lodash.matchesProperty=matchesProperty,lodash.memoize=memoize,lodash.merge=dn,lodash.method=An,lodash.methodOf=Pn,lodash.mixin=mixin,lodash.modArgs=an,lodash.negate=negate,lodash.omit=Mn,lodash.once=once,lodash.pairs=pairs,lodash.partial=sn,lodash.partialRight=ln,lodash.partition=Bt,lodash.pick=kn,lodash.pluck=pluck,lodash.property=property,lodash.propertyOf=propertyOf,lodash.pull=pull,lodash.pullAt=St,lodash.range=range,lodash.rearg=cn,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.restParam=restParam,lodash.set=set,lodash.shuffle=shuffle,lodash.slice=slice,lodash.sortBy=sortBy,lodash.sortByAll=Gt,lodash.sortByOrder=sortByOrder,lodash.spread=spread,lodash.take=take,lodash.takeRight=takeRight,lodash.takeRightWhile=takeRightWhile,lodash.takeWhile=takeWhile,lodash.tap=tap,lodash.throttle=throttle,lodash.thru=thru,lodash.times=times,lodash.toArray=toArray,lodash.toPlainObject=toPlainObject,lodash.transform=transform,lodash.union=xt,lodash.uniq=uniq,lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.values=values,lodash.valuesIn=valuesIn,lodash.where=where,lodash.without=Rt,lodash.wrap=wrap,lodash.xor=xor,lodash.zip=At,lodash.zipObject=zipObject,lodash.zipWith=Pt,lodash.backflow=on,lodash.collect=map,lodash.compose=on,lodash.each=qt,lodash.eachRight=Wt,lodash.extend=pn,lodash.iteratee=callback,lodash.methods=functions,lodash.object=zipObject,lodash.select=filter,lodash.tail=rest,lodash.unique=uniq,mixin(lodash,lodash),lodash.add=add,lodash.attempt=Rn,lodash.camelCase=Ln,lodash.capitalize=capitalize,lodash.ceil=Yn,lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.deburr=deburr,lodash.endsWith=endsWith,lodash.escape=escape,lodash.escapeRegExp=escapeRegExp,lodash.every=every,lodash.find=Nt,lodash.findIndex=kt,lodash.findKey=_n,lodash.findLast=Ft,lodash.findLastIndex=Lt,lodash.findLastKey=mn,lodash.findWhere=findWhere,lodash.first=first,lodash.floor=In,lodash.get=get,lodash.gt=gt,lodash.gte=gte,lodash.has=has,lodash.identity=identity,lodash.includes=includes,lodash.indexOf=indexOf,lodash.inRange=inRange,lodash.isArguments=isArguments,lodash.isArray=un,lodash.isBoolean=isBoolean,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isError=isError,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isMatch=isMatch,lodash.isNaN=isNaN,lodash.isNative=isNative,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isString=isString,lodash.isTypedArray=isTypedArray,lodash.isUndefined=isUndefined,lodash.kebabCase=En,lodash.last=last,lodash.lastIndexOf=lastIndexOf,lodash.lt=lt,lodash.lte=lte,lodash.max=jn,lodash.min=Nn,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=Kt,lodash.pad=pad,lodash.padLeft=Sn,lodash.padRight=Dn,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=$t,lodash.reduceRight=Vt,lodash.repeat=repeat,lodash.result=result,lodash.round=Fn,lodash.runInContext=runInContext,lodash.size=size,lodash.snakeCase=On,lodash.some=some,lodash.sortedIndex=Dt,lodash.sortedLastIndex=Ot,lodash.startCase=xn,lodash.startsWith=startsWith,lodash.sum=sum,lodash.template=template,lodash.trim=trim,lodash.trimLeft=trimLeft,lodash.trimRight=trimRight,lodash.trunc=trunc,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.words=words,lodash.all=every,lodash.any=some,lodash.contains=includes,lodash.eq=isEqual,lodash.detect=Nt,lodash.foldl=$t,lodash.foldr=Vt,lodash.head=first,lodash.include=includes,lodash.inject=$t,mixin(lodash,function(){var e={};return baseForOwn(lodash,function(t,n){lodash.prototype[n]||(e[n]=t)}),e}(),!1),lodash.sample=sample,lodash.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return sample(t,e)}):sample(this.value())},lodash.VERSION=a,arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){lodash[e].placeholder=lodash}),arrayEach(["drop","take"],function(e,t){LazyWrapper.prototype[e]=function(n){var i=this.__filtered__;if(i&&!t)return new LazyWrapper(this);n=null==n?1:et(Je(n)||0,0);var r=this.clone();return i?r.__takeCount__=tt(r.__takeCount__,n):r.__views__.push({size:n,type:e+(r.__dir__<0?"Right":"")}),r},LazyWrapper.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),arrayEach(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n!=w;LazyWrapper.prototype[e]=function(e,t){var r=this.clone();return r.__iteratees__.push({iteratee:getCallback(e,t,1),type:n}),r.__filtered__=r.__filtered__||i,r}}),arrayEach(["first","last"],function(e,t){var n="take"+(t?"Right":"");LazyWrapper.prototype[e]=function(){return this[n](1).value()[0]}}),arrayEach(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");LazyWrapper.prototype[e]=function(){return this.__filtered__?new LazyWrapper(this):this[n](1)}}),arrayEach(["pluck","where"],function(e,t){var n=t?"filter":"map",i=t?baseMatches:property;LazyWrapper.prototype[e]=function(e){return this[n](i(e))}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.reject=function(e,t){return e=getCallback(e,t,1),this.filter(function(t){return!e(t)})},LazyWrapper.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||t<0)?new LazyWrapper(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(t=+t||0,n=t<0?n.dropRight(-t):n.take(t-e)),n)},LazyWrapper.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(at)},baseForOwn(LazyWrapper.prototype,function(e,t){var n=/^(?:filter|map|reject)|While$/.test(t),i=/^(?:first|last)$/.test(t),r=lodash[i?"take"+("last"==t?"Right":""):t];r&&(lodash.prototype[t]=function(){var t=i?[1]:arguments,a=this.__chain__,s=this.__wrapped__,l=!!this.__actions__.length,c=s instanceof LazyWrapper,u=t[0],d=c||un(s);d&&n&&"function"==typeof u&&1!=u.length&&(c=d=!1);var p=function(e){return i&&a?r(e,1)[0]:r.apply(o,arrayPush([e],t))},h={func:thru,args:[p],thisArg:o},f=c&&!l;if(i&&!a)return f?(s=s.clone(),s.__actions__.push(h),e.call(s)):r.call(o,this.value())[0];if(!i&&d){s=f?s:new LazyWrapper(this);var _=e.apply(s,t);return _.__actions__.push(h),new LodashWrapper(_,a)}return this.thru(p)})}),arrayEach(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?De:Ee)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(e);lodash.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),baseForOwn(LazyWrapper.prototype,function(e,t){var n=lodash[t];if(n){var i=n.name;(ht[i]||(ht[i]=[])).push({name:t,func:n})}}),ht[createHybridWrapper(o,l).name]=[{name:"wrapper",func:o}],LazyWrapper.prototype.clone=lazyClone,LazyWrapper.prototype.reverse=lazyReverse,LazyWrapper.prototype.value=lazyValue,lodash.prototype.chain=wrapperChain,lodash.prototype.commit=wrapperCommit,lodash.prototype.concat=Yt,lodash.prototype.plant=wrapperPlant,lodash.prototype.reverse=wrapperReverse,lodash.prototype.toString=wrapperToString,lodash.prototype.run=lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue,lodash.prototype.collect=lodash.prototype.map,lodash.prototype.head=lodash.prototype.first,lodash.prototype.select=lodash.prototype.filter,lodash.prototype.tail=lodash.prototype.rest,lodash}var o,a="3.10.1",s=1,l=2,c=4,u=8,d=16,p=32,h=64,f=128,_=256,m=30,g="...",v=150,y=16,b=200,T=1,w=2,C="Expected a function",M="__lodash_placeholder__",k="[object Arguments]",L="[object Array]",E="[object Boolean]",S="[object Date]",D="[object Error]",O="[object Function]",x="[object Map]",R="[object Number]",A="[object Object]",P="[object RegExp]",Y="[object Set]",I="[object String]",j="[object WeakMap]",N="[object ArrayBuffer]",F="[object Float32Array]",q="[object Float64Array]",W="[object Int8Array]",H="[object Int16Array]",U="[object Int32Array]",z="[object Uint8Array]",B="[object Uint8ClampedArray]",$="[object Uint16Array]",V="[object Uint32Array]",G=/\b__p \+= '';/g,K=/\b(__p \+=) '' \+/g,J=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39|#96);/g,Q=/[&<>"'`]/g,Z=RegExp(X.source),ee=RegExp(Q.source),te=/<%-([\s\S]+?)%>/g,ne=/<%([\s\S]+?)%>/g,ie=/<%=([\s\S]+?)%>/g,re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,oe=/^\w*$/,ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,se=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,le=RegExp(se.source),ce=/[\u0300-\u036f\ufe20-\ufe23]/g,ue=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,he=/^0[xX]/,fe=/^\[object .+?Constructor\]$/,_e=/^\d+$/,me=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,ge=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,ye=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),be=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Te=-1,we={};we[F]=we[q]=we[W]=we[H]=we[U]=we[z]=we[B]=we[$]=we[V]=!0,we[k]=we[L]=we[N]=we[E]=we[S]=we[D]=we[O]=we[x]=we[R]=we[A]=we[P]=we[Y]=we[I]=we[j]=!1;var Ce={};Ce[k]=Ce[L]=Ce[N]=Ce[E]=Ce[S]=Ce[F]=Ce[q]=Ce[W]=Ce[H]=Ce[U]=Ce[R]=Ce[A]=Ce[P]=Ce[I]=Ce[z]=Ce[B]=Ce[$]=Ce[V]=!0,Ce[D]=Ce[O]=Ce[x]=Ce[Y]=Ce[j]=!1;var Me={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},ke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Le={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ee={function:!0,object:!0},Se={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},De={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Oe=Ee[typeof t]&&t&&!t.nodeType&&t,xe=Ee[typeof e]&&e&&!e.nodeType&&e,Re=Oe&&xe&&"object"==typeof i&&i&&i.Object&&i,Ae=Ee[typeof self]&&self&&self.Object&&self,Pe=Ee[typeof window]&&window&&window.Object&&window,Ye=(xe&&xe.exports,Re||Pe!==(this&&this.window)&&Pe||Ae||this),Ie=runInContext();Ye._=Ie,(r=function(){return Ie}.call(t,n,t,e))!==o&&(e.exports=r)}).call(this)}).call(t,n(124)(e),n(29))},function(e,t,n){"use strict";var i,r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o,a){i=[n(4),n(10)],void 0!==(r=function(e,t){return a(e,t)}.apply(t,i))&&(e.exports=r)}(0,function(e,t){function removeHandler(e,t,n,i){var r=e[t];if(!(n&&n!==r.callback&&n!==r.callback._callback||i&&i!==r.context))return delete e[t],!0}function removeHandlers(e,n,i,r){e||(e={});for(var o=n?[n]:t.keys(e),a=!1,s=0,l=o.length;s<l;s++)n=o[s],e[n]&&removeHandler(e,n,i,r)&&(a=!0);return a}function _partial(e){return a[e]||(a[e]=t.partial(i.log,e))}function makeCallback(e){return t.isFunction(e)?e:function(){return e}}var n=e.Radio,i=e.Radio={};i.VERSION="0.9.0",i.noConflict=function(){return e.Radio=n,this},i.DEBUG=!1,i._debugText=function(e,t,n){return e+(n?" on the "+n+" channel":"")+': "'+t+'"'},i.debugLog=function(e,t,n){i.DEBUG&&console&&console.warn&&console.warn(i._debugText(e,t,n))};var r=/\s+/;i._eventsApi=function(e,n,i,a){if(!i)return!1;var s={};if("object"===(void 0===i?"undefined":o(i))){for(var l in i){var c=e[n].apply(e,[l,i[l]].concat(a));r.test(l)?t.extend(s,c):s[l]=c}return s}if(r.test(i)){for(var u=i.split(r),d=0,p=u.length;d<p;d++)s[u[d]]=e[n].apply(e,[u[d]].concat(a));return s}return!1},i._callHandler=function(e,t,n){var i=n[0],r=n[1],o=n[2];switch(n.length){case 0:return e.call(t);case 1:return e.call(t,i);case 2:return e.call(t,i,r);case 3:return e.call(t,i,r,o);default:return e.apply(t,n)}};var a={};t.extend(i,{log:function(e,n){var i=t.rest(arguments,2);console.log("["+e+'] "'+n+'"',i)},tuneIn:function(e){var t=i.channel(e);return t._tunedIn=!0,t.on("all",_partial(e)),this},tuneOut:function(e){var t=i.channel(e);return t._tunedIn=!1,t.off("all",_partial(e)),delete a[e],this}}),i.Commands={command:function(e){var n=t.rest(arguments);if(i._eventsApi(this,"command",e,n))return this;var r=this.channelName,o=this._commands;if(r&&this._tunedIn&&i.log.apply(this,[r,e].concat(n)),o&&(o[e]||o.default)){var a=o[e]||o.default;n=o[e]?n:arguments,i._callHandler(a.callback,a.context,n)}else i.debugLog("An unhandled command was fired",e,r);return this},comply:function(e,t,n){return i._eventsApi(this,"comply",e,[t,n])?this:(this._commands||(this._commands={}),this._commands[e]&&i.debugLog("A command was overwritten",e,this.channelName),this._commands[e]={callback:t,context:n||this},this)},complyOnce:function(e,n,r){if(i._eventsApi(this,"complyOnce",e,[n,r]))return this;var o=this,a=t.once(function(){return o.stopComplying(e),n.apply(this,arguments)});return this.comply(e,a,r)},stopComplying:function(e,t,n){return i._eventsApi(this,"stopComplying",e)?this:(e||t||n?removeHandlers(this._commands,e,t,n)||i.debugLog("Attempted to remove the unregistered command",e,this.channelName):delete this._commands,this)}},i.Requests={request:function(e){var n=t.rest(arguments),r=i._eventsApi(this,"request",e,n);if(r)return r;var o=this.channelName,a=this._requests;if(o&&this._tunedIn&&i.log.apply(this,[o,e].concat(n)),a&&(a[e]||a.default)){var s=a[e]||a.default;return n=a[e]?n:arguments,i._callHandler(s.callback,s.context,n)}i.debugLog("An unhandled request was fired",e,o)},reply:function(e,t,n){return i._eventsApi(this,"reply",e,[t,n])?this:(this._requests||(this._requests={}),this._requests[e]&&i.debugLog("A request was overwritten",e,this.channelName),this._requests[e]={callback:makeCallback(t),context:n||this},this)},replyOnce:function(e,n,r){if(i._eventsApi(this,"replyOnce",e,[n,r]))return this;var o=this,a=t.once(function(){return o.stopReplying(e),makeCallback(n).apply(this,arguments)});return this.reply(e,a,r)},stopReplying:function(e,t,n){return i._eventsApi(this,"stopReplying",e)?this:(e||t||n?removeHandlers(this._requests,e,t,n)||i.debugLog("Attempted to remove the unregistered request",e,this.channelName):delete this._requests,this)}},i._channels={},i.channel=function(e){if(!e)throw new Error("You must provide a name for the channel.");return i._channels[e]?i._channels[e]:i._channels[e]=new i.Channel(e)},i.Channel=function(e){this.channelName=e},t.extend(i.Channel.prototype,e.Events,i.Commands,i.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopComplying(),this.stopReplying(),this}});var s,l,c=[e.Events,i.Commands,i.Requests];return t.each(c,function(e){t.each(e,function(e,n){i[n]=function(e){return l=t.rest(arguments),s=this.channel(e),s[n].apply(s,l)}})}),i.reset=function(e){var n=e?[this._channels[e]]:this._channels;t.invoke(n,"reset")},i})},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a,s,l,c,u,d,p,h,f,_,m,g,v,y=n(10),b=n(18),T=n(8),w=n(1),C=b.hasLocalStorage();return n(5),i=function(){var e,t,n;return C?(e=function(e){return localStorage.getItem(e)},t=function(e,t){return null!=t&&localStorage.setItem(e,t)},n=function(e){localStorage.removeItem(e)}):(e=function(e){return w.cookie(e)},t=function(e,t){return null!=t&&w.cookie(e,t)},n=function(e){w.cookie(e,null)}),{remove:n,get:e,set:t}},t=i(),s=function(){var e={};try{e=JSON.parse(w.cookie(T.COOKIE_READER_PREFERENCES_KEY))||{}}catch(e){w.cookie(T.COOKIE_READER_PREFERENCES_KEY,null)}return e.font_size=e.font_size?parseFloat(e.font_size):T.FONT_SIZE_DEFAULT,e.column_width=e.column_width?parseFloat(e.column_width):T.READER_COLUMN_WIDTH_DEFAULT,e.reading_mode=e.reading_mode?e.reading_mode:T.READING_MODE_DEFAULT,e},_=function(e,t){var n=s();y.isObject(n)&&(n[e]=t,w.cookie(T.COOKIE_READER_PREFERENCES_KEY,JSON.stringify(n),{expires:365,path:"/"}))},m=function(){w.cookie(T.COOKIE_READER_PREFERENCES_KEY,null,{expires:365,path:"/"})},l=function(e){t.set("brightness",e),r=e},u=function(){return r||(r=t.get("brightness")),r},d=function(e){t.set("pagination",e),o=e},p=function(){return o||(o=t.get("pagination")),"undefined"===o?void 0:o},h=function(e){t.set("zoom_factor",e.toFixed(3)),a=e},f=function(){return a||(a=1*t.get("zoom_factor")),a},g=function(){var e,t,n;return e=function(){function _p8(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return _p8()+_p8(!0)+_p8(!0)+_p8()},t=function(e){return e===Object(e)?JSON.stringify(e):e},n=function(e){var t;if(e){try{t=JSON.parse(e)}catch(e){console.warn("storage#serializer#deserialize: Problem parsing JSON from localStorage.")}return t||{}}},{guuid:e,serialize:t,deserialize:n}},g=g(),v=function(){var e,t,n,i,r,o,a,s,l,c,u;return s=function(e,t){C?localStorage.setItem(e,t.join(",")):w.cookie(e,t.join(","))},l=function(e){var t;return t=C?localStorage.getItem(e):w.cookie(e),y.uniq(t&&t.split(","))||[]},c=function(e,t){return e+"-"+t},e=function(e){for(var t=[],n=l(e),i=0;i<n.length;i++){var r,o,a=n[i];r=C?localStorage.getItem(c(e,a)):w.cookie(c(e,a)),o=g.deserialize(r),null!=o&&t.push(o)}return t},t=function(t,n,i){var r,o=y.cloneDeep(e(t)),a=y.cloneDeep(n);return i=i||{},y.each(o,function(e){delete e.id}),i.idKey&&delete a.item[i.idKey],r=y.filter(o,y.matches(a.item)),!(r.length>0)},u=function(e,n,i){return n.id?e?t(e,n,i)?void 0:"storage#browserStore#create attempted to create a storage Object that was not unique.":"storage#browserStore#create attempted to create a storage Object without a namespace.":"storage#browserStore#create attempted to create a storage Object without an identifier."},n=function(e,t,n){var i,r=u(e,t,n);return n=n||{},r?!!n.error&&n.error():(i=l(e),i.push(t.id.toString()),C?localStorage.setItem(c(e,t.id),g.serialize(t.item)):w.cookie(c(e,t.id),g.serialize(t.item)),s(e,i),n.success?n.success(t.item):void 0)},r=function(e,t){t.id&&(-1===y.indexOf(l(e))&&n(e,t),C?localStorage.setItem(c(e,t.id),g.serialize(t.item)):w.cookie(c(e,t.id),g.serialize(t.item)))},i=function(e,t){var n=l(e),i=t.id.toString();C?localStorage.removeItem(c(e,i)):w.cookie(c(e,i),null);for(var r=0;r<n.length;r++)n[r]===i&&n.splice(r,1);s(e,n)},o=function(e){var t=new RegExp("^"+e+"-");C?localStorage.removeItem(e):w.cookie(e,null);for(var n in localStorage)t.test(n)&&(C?localStorage.removeItem(n):w.cookie(n,null))},{records:a,update:r,reset:o,read:e,create:n,destroy:i}},v=v(),{serializer:g,browserStore:v,browser:t,destroyReaderPreferences:m,storeReaderPreferences:_,destroyFontPreferences:c,retrieveReaderPreferences:s,storeBrightnessPreferences:l,retrieveBrightnessPreferences:u,storePaginationPreferences:d,retrievePaginationPreferences:p,storeZoomPreferences:h,retrieveZoomPreferences:f}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(t.NEW_COLLECTION_TITLE="Name your new playlist",t.NEW_COLLECTION_DESCRIPTION="Click here to add a playlist description",t.DEFAULT_COLLECTION_TITLE="New playlist",t.DUPLICATE_COLLECTION_PREPEND_TITLE="Copy of",t.HOME_URL="/home/",t.ROOT_URL="/c/"),r=(t.BOWERBIRD_API_VERSION="v2",t.BOWERBIRD_ENDPOINT="/api/v2",t.CONTENT_METADATA_ENDPOINT="/api/v1/metadata/",t.QUEUE_ENDPOINT="/api/v1/queue-simple/",t.USER_PROGRESS_ENDPOINT="/api/v1/user_progress/",t.VIEW_COLLECTION_ROUTE=i+"collection/:collection_id/",t.EDIT_COLLECTION_ROUTE=i+"edit-collection/:collection_id/",t.NEW_COLLECTION_ROUTE=i+"new-collection/",t.FORM_ERROR_CLASS="error",t.FORM_SUCCESS_CLASS="success",t.TITLE_CARD_CLASS="title-card",t.EXISTING_COLLECTION_NAME_ERROR="Oops! You've already used this name.",t.PLAYLIST_NAME_MAX_LENGTH=65),o=(t.PLAYLIST_NAME_TOO_LONG_ERROR="Playlist names are limited to "+r+" characters.",t.PLAYLIST_DESCRIPTION_MAX_LENGTH=160),a=(t.PLAYLIST_DESCRIPTION_TOO_LONG_ERROR="Playlist descriptions are limited to "+o+" characters.",t.CONTENT_REQUEST_DID_ERROR_TEXT="Error, the machines failed. Please try again soon.",t.MAX_TOPICS=5,t.DEFAULT_TOPIC={name:"All",slug:"all"},t.CONTENT_ITEMS_PER_PAGINATION=10,t.ERROR_NO_COLLECTION_NAME="Oops. You didn't name your playlist.",t.ERROR_GENERIC_COLLECTION="There was a problem creating your playlist.",t.LOCAL_STORAGE_ETAG_KEY="collections_etag_v2",t.LOCAL_STORAGE_COLLECTIONS_KEY="collections_collections_data",t.ADD_TO_ANOTHER_COLLECTION_BUTTON_TEXT="Add to another playlist",t.ADD_TO_A_NEW_COLLECTION_BUTTON_TEXT="Add to new playlist","Please try again soon.");t.ERROR_CREATE_COLLECTION="There was a problem creating your playlist. "+a,t.ERROR_UPDATE_COLLECTION="There was a problem updating your playlist. "+a,t.ERROR_ADD_CONTENT_TO_COLLECTION="There was a problem adding content to your playlist. "+a,t.ERROR_REMOVE_CONTENT_FROM_COLLECTION="There was a problem removing content from your playlist. "+a,t.ERROR_DELETE_SINGLE_COLLECTION="There was a problem deleting your playlist. "+a,t.ERROR_ADD_QUEUE="There was a problem adding content to your queue. "+a,t.ERROR_REMOVE_QUEUE="There was a problem removing content from your queue. "+a,t.ERROR_FATAL="Something has gone wrong and we can't display your playlists. "+a,t.ERROR_COLLECTION_NOT_FOUND="We could not find the playlist that you requested. "+a,t.METADATA_EXPIRATION=2592e6,t.UPDATE_COLLECTION_DELAY_MS=1350,t.EDIT_COLLECTION_ACTIONS={DELETE:"DELETE",DUPLICATE:"DUPLICATE",UPDATE:"UPDATE"}},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i=n(4),r=n(10);return t={},r.extend(t,i.Events),t}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeContentUriList=t.normalizeContentUri=t.redirectToCollection=t.cleanSuccessState=t.activeSuccessState=t.cleanErrorDescriptionState=t.cleanErrorState=t.activeErrorDescriptionState=t.activeErrorState=t.anyCollectionHasContent=t.collectionHasContent=t.collectionNameIsUnique=t.moveCollectionToFront=t.removeContentFromCollectionsState=t.addContentToCollectionsState=t.getCollectionByIdOrDefault=t.getCollectionById=t.getDefaultCollection=t.isEmpty=t.buildEditCollectionRoute=t.buildShowCollectionRouteWithTopic=t.buildShowCollectionRoute=t.removeItemFromArray=t.caseInsensitiveSortFunction=t.sortedCollections=void 0;var i=n(13),r=_interopRequireWildcard(i),o=n(2),a=_interopRequireDefault(o),s=n(119),l=(t.sortedCollections=function(e){return a.default.sortByOrder(e,["is_default",function(e){return e.name.toLowerCase()}],[!1,!0])},t.caseInsensitiveSortFunction=function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0},t.removeItemFromArray=function(e,t){return[].concat(_toConsumableArray(e.slice(0,t)),_toConsumableArray(e.slice(t+1)))},t.buildShowCollectionRoute=function(e){return e&&!e.is_default?r.ROOT_URL+"collection/"+e.id+"/":""+r.ROOT_URL}),c=(t.buildShowCollectionRouteWithTopic=function(e,t){return r.ROOT_URL+"collection/"+t.id+"/topic/"+e.slug+"/"},t.buildEditCollectionRoute=function(e){return r.ROOT_URL+"edit-collection/"+e.id+"/"},t.isEmpty=function(e){return 0===Object.keys(e).length&&e.constructor===Object},t.getDefaultCollection=function(e){return a.default.find(e,"is_default")}),u=t.getCollectionById=function(e,t){return a.default.find(e,{id:t})},d=(t.getCollectionByIdOrDefault=function(e,t){return t?u(e,t):c(e)},t.addContentToCollectionsState=function(e,t,n){var i=a.default.cloneDeep(e),r=i.findIndex(function(e){return e.id===t});return-1!==r&&a.default.map(n,function(e){i[r].content.unshift({api_url:e})}),i},t.removeContentFromCollectionsState=function(e,t,n){var i=a.default.cloneDeep(e),r=i.findIndex(function(e){return e.id===t});return-1!==r&&(i[r].content=a.default.filter(i[r].content,function(e){return!a.default.includes(n,e.api_url)})),i},t.moveCollectionToFront=function(e,t){var n=e.findIndex(function(e){return e.id===t});if(n>0){var i=e.splice(n,1)[0];e.unshift(i)}return e},t.collectionNameIsUnique=function(e,t){var n=a.default.map(e,function(e){return e.name.toLowerCase()});return!a.default.includes(n,t.toLowerCase())},t.collectionHasContent=function(e,t){return-1!==a.default.findIndex(e.content,{api_url:t})}),p=(t.anyCollectionHasContent=function(e,t){for(var n=0;n<e.length;n+=1)if(d(e[n],t))return!0;return!1},t.activeErrorState=function(e){return{exists:!0,description:e,css_class:r.FORM_ERROR_CLASS}},t.activeErrorDescriptionState=function(e){return{exists:!0,description:e,css_class:r.FORM_ERROR_CLASS}},t.cleanErrorState=function(){return{exists:!1,description:"",css_class:""}},t.cleanErrorDescriptionState=function(){return{exists:!1,description:"",css_class:""}},t.activeSuccessState=function(e,t){return{exists:!0,description:e,css_class:r.FORM_SUCCESS_CLASS,url:t}},t.cleanSuccessState=function(){return{exists:!1,description:"",css_class:"",url:""}},t.redirectToCollection=function(e){s.browserHistory.push(l(e))},t.normalizeContentUri=function(e){var t=document.createElement("a");t.href=e;var n=t.pathname;return n.startsWith("/")?n:"/"+n});t.normalizeContentUriList=function(e){return e.map(function(e){return p(e)})}},,,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a,s,l,c,u,d,p,h,f,_,m,g,v,y,b,T,w=n(1),C=n(8);return n(5),T=function(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}},t=function(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)},w.ajaxSetup({crossDomain:!1,beforeSend:function(e,n){t(n.type)||(i=w.cookie(C.CSRF_COOKIE_NAME),e.setRequestHeader("X-CSRFToken",i))}}),f=function(){var e=_();return{height:Math.floor(.8*e.height),width:Math.floor(.9*e.width)}},b=function(e){var t=C.LOGIN_URL,n=e||"Please log in to continue.";alert(gettext(n)),window.location=t},m=function(){return C.IS_IE8?document.documentElement.clientHeight:window.innerHeight},g=function(){return C.IS_IE8?document.documentElement.clientWidth:window.innerWidth},o=function(){var e=m(),t=g(),n=C.DEVICES.device;return(C.DEBUG||C.TESTING)&&C.IS_WEBKIT?(t=n.iphone.portrait[0],e=n.iphone.portrait[1]):C.IS_IPHONE5?(t=n.iphone5.portrait[0],e=n.iphone5.portrait[1]):C.IS_IPHONE?(t=n.iphone.portrait[0],e=n.iphone.portrait[1]):C.IS_IPAD?(t=C.IPAD.WIDTH,e=C.IPAD.HEIGHT):(e=m(),t=g()),{height:e,width:t}},h=function(){return window.orientation&&90===Math.abs(window.orientation)?"landscape":"portrait"},_=function(){var e,t,n=h(),i=C.DEVICES.device;return C.IS_IPAD?(t=window.innerWidth,e=window.innerHeight):C.IS_IPHONE5?(t=i.iphone5[n][0],e=i.iphone5[n][1]+i.iphone5.navBarHeight):C.IS_IPHONE?(t=i.iphone[n][0],e=i.iphone[n][1]+i.iphone.navBarHeight):"nexus_7"===C.DEVICES.current_device_name?(t=i.nexus_7[n][0],e=i.nexus_7[n][1]):(t=g(),e=m()),{height:e,width:t}},function(e){return e.getTime()+6e4*e.getTimezoneOffset()},a=function(e){var t=e.replace(/[TZ]/g," ").replace(/\..*/,"").replace(/-/g,"/");return new Date(t)},s=function(e){var t=e.replace(/[TZ]/g," ").replace(/\..*/,""),n=new Date,i=t.split(" "),r=i[0].split("-"),o=i[1].split(":");return n.setUTCFullYear(Number(r[0])),n.setUTCDate(Number(r[2])),n.setUTCMonth(Number(r[1])-1),n.setUTCHours(Number(o[0])),n.setUTCMinutes(Number(o[1])),n.setUTCSeconds(Number(o[2])),n},y=function(e){var t,n,i;if(C.DEBUG){if(arguments.length>1)for(t=1,n=arguments.length;t<n;t++)e+=" "+arguments[t];i=(new Date).getTime(),e="["+i+"] "+e,window.console&&console.log&&console.log(e),w.post("/debug/",{message:e})}},c=function(e){C.TESTING&&(window.console&&console.log&&console.log(e),w.post("/debug/",{message:e}))},function(e){var t=null;return w.each(e,function(e,n){null!==n&&null!==n.substring&&(t+=n.substring(1,25)+" |  ")}),t},function(e){var t;return w.each(window.getComputedStyle(e),function(n,i){t+=i+" = "+window.getComputedStyle(e).getPropertyValue(i)+"\n"}),w.each(e,function(e,n){t+=e+" = "+n+"\n"}),t},p=function(){return(new Date).toISOString()},d=function(e){return new Date(e.replace(/-/g,"/").replace(/[TZ]/g," "))},v=function(e){return"#"+e.replace(/(:|\.)/g,"\\$1")},u=/^["'](.+)["']$/,r=function(e){return e.replace(u,"$1")},l=function(){var e=new Date,t=-e.getTimezoneOffset(),n=t>=0?"+":"-",i=function(e){var t=Math.abs(Math.floor(e));return(t<10?"0":"")+t};return e.getFullYear()+"-"+i(e.getMonth()+1)+"-"+i(e.getDate())+"T"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())+"."+i(e.getMilliseconds())+n+i(t/60)+":"+i(t%60)},{debug:y,formatLocalDate:l,currentDatetime:p,dateFromISO:d,dbDatetimeToDate:a,getImageSize:f,getScreenSize:o,getViewport:_,getOrientation:h,hasLocalStorage:T,jq:v,noQuotes:r,test:c,redirectToLogin:b,utcISO8601ToDate:s}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(1),i=n(8);return n(5),{loggedIn:function(){return null!==t.cookie(i.LOGIN_COOKIE_NAME)},isPreview:function(){return t("body").hasClass("js-preview-content")}}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i,r;!function(o,a){i=[n(7),n(11),n(10)],void 0!==(r=function(e,t,n){return a(e,t,n)}.apply(t,i))&&(e.exports=r)}(0,function(e,t,n){e.Application.prototype._initChannel=function(){this.channelName=n.result(this,"channelName")||"global",this.channel=n.result(this,"channel")||t.channel(this.channelName)}})},function(e,t){e.exports={"logentries-tokens":{heron:"0509ee1a-2e53-4916-a7fa-9848b003e2cb"},analytics_key:"flow-ga"}},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function sendEvent(e,t){e.unshift("send","event"),l.default.sendAnalyticsEvent(e,t)}function getPageTitle(){var e,t={"body.homepage":"home",".js-title-detail-page":"title_page"};return a.default.forEach(t,function(t,n){return(0,r.default)(n).length?(e=t,!1):void 0}),e||((0,r.default)("#page-title").length?r.default.trim((0,r.default)("#page-title").text()).toLowerCase().split(" ").join("_"):void 0)}function getHomePageModule(e){var t=e.closest(".js-dashboard-module");if(t.length>0)return t.find(".dashboard__module__header-title").text()}function getDropdownMenuIndex(e){var t=(0,r.default)(".js-menu-dropdown-wrapper");return 1===t.length?void 0:t.index(e)+1}function trackCollectionAccessed(e){sendEvent(["your_collections","view_collection","",e])}function trackContentAccessed(e){sendEvent(["collection_page","Cover","",e],{store:!0})}function trackCreateNewCollection(){sendEvent(["your_collections","create_new_collection"])}function trackDeleteCollection(){sendEvent(["your_collections","delete_collection"])}function trackFilterByTopic(e,t){sendEvent(["your_collections","filter_collection",e,t])}function trackNewButtonClick(){sendEvent(["your_collections","create_collection"])}function getDropdownWrapperFromNode(e){return(0,r.default)(e).closest(".js-menu-dropdown-wrapper")}function trackAddContentToCollection(e){sendEvent([getPageTitle(),"add_to_collection","collections_dropdown_menu",e])}function trackAddContentToAnotherCollection(e){(0,c.track)({event:"eventTracker",eventCat:"playlists",eventAct:"dropdown",eventLbl:"dropdown|add to another playlist",eventVal:0,nonInteraction:0}),sendEvent([getPageTitle(),"add_to_other_collection","collections_dropdown_menu",e])}function trackAddContentToNewCollection(e){(0,c.track)({event:"eventTracker",eventCat:"playlists",eventAct:"dropdown",eventLbl:"dropdown|add to new playlist",eventVal:0,nonInteraction:0}),sendEvent([getPageTitle(),"add_to_new_collection","collections_dropdown_menu",e])}function trackCreateCollectionButtonClick(){(0,c.track)({event:"eventTracker",eventCat:"playlists",eventAct:"modal",eventLbl:"modal|add to new playlist",eventVal:0,nonInteraction:0}),sendEvent(["dropdown_menu_popout","create_collection",getPageTitle()])}function trackQueueIconClick(e){var t=getDropdownWrapperFromNode(e);sendEvent([getPageTitle(),"Queue",getHomePageModule(t),getDropdownMenuIndex(t)])}function trackPlaylistIconClick(e){var t=getDropdownWrapperFromNode(e);sendEvent([getPageTitle(),"Title_Dropdown",getHomePageModule(t),getDropdownMenuIndex(t)])}function trackRemoveContentFromCollection(e){sendEvent([getPageTitle(),"remove_from_collection","collections_dropdown_menu",e])}function trackVisitNowLinkClick(){sendEvent(["dropdown_menu_popout","visit_collection",getPageTitle()],{store:!0})}Object.defineProperty(t,"__esModule",{value:!0}),t.sendEvent=sendEvent,t.getPageTitle=getPageTitle,t.trackCollectionAccessed=trackCollectionAccessed,t.trackContentAccessed=trackContentAccessed,t.trackCreateNewCollection=trackCreateNewCollection,t.trackDeleteCollection=trackDeleteCollection,t.trackFilterByTopic=trackFilterByTopic,t.trackNewButtonClick=trackNewButtonClick,t.trackAddContentToCollection=trackAddContentToCollection,t.trackAddContentToAnotherCollection=trackAddContentToAnotherCollection,t.trackAddContentToNewCollection=trackAddContentToNewCollection,t.trackCreateCollectionButtonClick=trackCreateCollectionButtonClick,t.trackQueueIconClick=trackQueueIconClick,t.trackPlaylistIconClick=trackPlaylistIconClick,t.trackRemoveContentFromCollection=trackRemoveContentFromCollection,t.trackVisitNowLinkClick=trackVisitNowLinkClick;var i=n(1),r=_interopRequireDefault(i),o=n(2),a=_interopRequireDefault(o),s=n(6),l=_interopRequireDefault(s),c=n(181);(0,r.default)(function(){"function"==typeof window.ga&&l.default.callStoredAnalytics()})},function(e,t,n){"use strict";var i;void 0!==(i=function(){var e=function(e,t){return(window.SBO?window.SBO.constants[e]:t)||t};return{FALCON_ENDPOINT:window.SBO?window.SBO.constants.SEARCH_ENDPOINT:{},SUGGEST_ENDPOINT:window.SBO?window.SBO.constants.SUGGEST_ENDPOINT:{},SEARCH_SELECT_ENDPOINT:window.SBO?window.SBO.constants.SEARCH_SELECT_ENDPOINT:{},SEARCH_SELECT_TIMEOUT:e("SEARCH_SELECT_TIMEOUT",1500),SITB_ENDPOINT:window.SBO?window.SBO.constants.SITB_ENDPOINT:{},ACADEMIC_INSTITUTION_ACCOUNT:window.SBO?window.SBO.constants.ACADEMIC_INSTITUTION_ACCOUNT:{},QUEUE_ENDPOINT:"/api/v1/queue-simple/",LIVE_URL:"https://www.safaribooksonline.com",DEFAULT_SEARCH:"*",SEARCH_TRACK_STORE_KEY:"search_track_data",BI_TRACK_KEY:"search_result_rank",SUGGESTION_CHOSEN_STORE_KEY:"search-suggestion-chosen",DEFAULT_DEBOUNCE_RATE:1200,AUTH_DEBOUNCE_RATE:240,TOPIC_GRAPH_ENDPOINT:window.SBO?window.SBO.constants.TOPIC_GRAPH_ENDPOINT:"",keys:{BACKSPACE_KEY:8,ENTER_KEY:13,DOWN_KEY:40,UP_KEY:38,ESCAPE_KEY:27},ENABLE_CASE_STUDIES:!0,ENABLE_ONLINE_TRAINING:window.SBO?window.SBO.constants.ENABLE_ONLINE_TRAINING:{},SELF_ASSESSMENT_SWITCH:!0}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(218),r=_interopRequireDefault(i),o=n(265),a=_interopRequireDefault(o),s=n(195),l=!0===window.DEBUG&&void 0!==window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,c=l?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:s.compose,u=(0,s.createStore)(r.default,c((0,s.applyMiddleware)(a.default)));t.default=u,e.exports=t.default},,,function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisplayedContentMetadata=t.getDisplayedContentUrisWithoutMetadata=t.getCollectionHasMoreContent=t.getDisplayedContentUris=t.getSelectedCollectionContentCountFilteredByTopic=t.getSelectedCollectionContentUrisFilteredByTopic=t.getSelectedTopic=t.getSelectedCollectionTopics=t.getSelectedCollectionContentUris=t.getSelectedCollection=t.getDefaultCollection=t.getDidFatallyError=t.getTopicsByContentUri=t.getStoredContentMetadata=t.getSelectedTopicSlug=t.getSelectedCollectionId=t.getRequestedContentUris=t.getPageSize=t.getIsFetching=t.getErrors=t.getDidError=t.getCollections=t.getAnimateCollectionContent=void 0;var i=n(2),r=_interopRequireDefault(i),o=n(266),a=n(13),s=_interopRequireWildcard(a),l=n(120),c=(t.getAnimateCollectionContent=function(e){return e.contentState.animateCollectionContent},t.getCollections=function(e){return e.collectionsState.collections}),u=(t.getDidError=function(e){return e.collectionsState.didError},t.getErrors=function(e){return e.errorState},t.getIsFetching=function(e){return e.collectionsState.isFetching},t.getPageSize=function(e){return e.contentState.pageSize}),d=t.getRequestedContentUris=function(e){return e.collectionsState.requestedContentUris},p=t.getSelectedCollectionId=function(e){return e.contentState.selectedCollectionId},h=t.getSelectedTopicSlug=function(e){return e.contentState.selectedTopicSlug},f=t.getStoredContentMetadata=function(e){return e.collectionsState.contentMetadata},_=t.getTopicsByContentUri=function(e){return e.collectionsState.topicsByContentUri},m=(t.getDidFatallyError=function(e){var t=e.errorState;return!(!t.didError||t.errorLevel!==l.errorLevel.FATAL)},t.getDefaultCollection=function(e){var t=c(e);return r.default.find(t,{is_default:!0})}),g=t.getSelectedCollection=function(e){var t=p(e),n=c(e);return t?r.default.find(n,{id:t}):m(e)},v=t.getSelectedCollectionContentUris=function(e){var t=g(e);return t?r.default.pluck(t.content,"api_url"):[]},y=t.getSelectedCollectionTopics=(0,o.createSelector)([v,_],function(e,t){var n={};return e.forEach(function(e){t[e]&&t[e].forEach(function(e){n[e.slug]?n[e.slug].count+=1:n[e.slug]={topic:e,count:1}})}),r.default.map(r.default.sortByOrder(r.default.values(n),["count","topic.name"],[!1,!0]),function(e){return e.topic})}),b=t.getSelectedTopic=(0,o.createSelector)([h,y],function(e,t){return r.default.find(t,{slug:e})||s.DEFAULT_TOPIC}),T=t.getSelectedCollectionContentUrisFilteredByTopic=(0,o.createSelector)([v,b,_],function(e,t,n){return r.default.filter(e,function(e){return t===s.DEFAULT_TOPIC||r.default.some(n[e],t)})}),w=(t.getSelectedCollectionContentCountFilteredByTopic=(0,o.createSelector)([T,d,f],function(e,t,n){var i=r.default.intersection(e,t),o=r.default.filter(i,function(e){return!n[e]});return e.length-o.length}),t.getDisplayedContentUris=(0,o.createSelector)([T,u],function(e,t){return e.slice(0,t)}));t.getCollectionHasMoreContent=(0,o.createSelector)([T,u],function(e,t){return e.length>t}),t.getDisplayedContentUrisWithoutMetadata=(0,o.createSelector)([f,w,d],function(e,t,n){var i=r.default.difference(t,n);return r.default.filter(i,function(t){return!r.default.has(e,t)})}),t.getDisplayedContentMetadata=(0,o.createSelector)([f,w,_],function(e,t,n){return r.default.filter(r.default.map(t,function(t){var i=e[t];return i?(i.topics=n[t]||[],i):void 0}))})},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=(n(1),n(11),n(2)),i=(n(21),n(6)),r=(n(12),n(7));return n(5),r.Behavior.extend({triggers:{track:this.onTrack},initialize:function(e){t.bindAll(this),e=e||{},"function"==typeof window.ga&&i.callStoredAnalytics()},onTrack:function(e,t){i.sendAnalyticsEvent(e,t)}})}.call(t,n,t,e))&&(e.exports=i)},,function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},week:{dow:6,doy:12}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},r={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},o=function(e){return function(t,n,o,a){var s=i(t),l=r[e][i(t)];return 2===s&&(l=l[n?0:1]),l.replace(/%d/i,t)}},a=["  "," "," "," "," "," "," "," "," ","  ","  ","  "];return e.defineLocale("ar",{months:a,monthsShort:a,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},week:{dow:6,doy:12}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};return e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniyy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(e){return/^(gndz|axam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gec":e<12?"shr":e<17?"gndz":"axam"},ordinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(e){if(0===e)return e+"-nc";var n=e%10,i=e%100-n,r=e>=100?100:null;return e+(t[n]||t[i]||t[r])},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function plural(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function relativeTimeWithPlural(e,t,n){var i={mm:t?"__":"__",hh:t?"__":"__",dd:"__",MM:"__",yy:"__"};return"m"===n?t?"":"":"h"===n?t?"":"":e+" "+plural(i[n],+e)}function monthsCaseReplace(e,t){return{nominative:"___________".split("_"),accusative:"___________".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function weekdaysCaseReplace(e,t){return{nominative:"______".split("_"),accusative:"______".split("_")}[/\[ ?[] ?(?:|)? ?\] ?dddd/.test(t)?"accusative":"nominative"][e.day()]}return e.defineLocale("be",{months:monthsCaseReplace,monthsShort:"___________".split("_"),weekdays:weekdaysCaseReplace,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:relativeTimeWithPlural,mm:relativeTimeWithPlural,h:relativeTimeWithPlural,hh:relativeTimeWithPlural,d:"",dd:relativeTimeWithPlural,M:"",MM:relativeTimeWithPlural,y:"",yy:relativeTimeWithPlural},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},ordinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-":e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&n<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/||||/,isPM:function(e){return/^(||)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("bo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/||||/,isPM:function(e){return/^(||)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function relativeTimeWithMutation(e,t,n){return e+" "+mutation({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}function specialMutationForYears(e){switch(lastNumber(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function lastNumber(e){return e>9?lastNumber(e%10):e}function mutation(e,t){return 2===t?softMutation(e):e}function softMutation(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}return e.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY LT",LLLL:"dddd, D [a viz] MMMM YYYY LT"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:relativeTimeWithMutation,h:"un eur",hh:"%d eur",d:"un devezh",dd:relativeTimeWithMutation,M:"ur miz",MM:relativeTimeWithMutation,y:"ur bloaz",yy:specialMutationForYears},ordinalParse:/\d{1,2}(a|vet)/,ordinal:function(e){return e+(1===e?"a":"vet")},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function translate(e,t,n){var i=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return i+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return i+=1===e?"dan":"dana";case"MM":return i+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return i+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}return e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:translate,mm:translate,h:translate,hh:translate,d:"dan",dd:translate,M:"mjesec",MM:translate,y:"godinu",yy:translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("ca",{months:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function plural(e){return e>1&&e<5&&1!=~~(e/10)}function translate(e,t,n,i){var r=e+" ";switch(n){case"s":return t||i?"pr sekund":"pr sekundami";case"m":return t?"minuta":i?"minutu":"minutou";case"mm":return t||i?r+(plural(e)?"minuty":"minut"):r+"minutami";case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":return t||i?r+(plural(e)?"hodiny":"hodin"):r+"hodinami";case"d":return t||i?"den":"dnem";case"dd":return t||i?r+(plural(e)?"dny":"dn"):r+"dny";case"M":return t||i?"msc":"mscem";case"MM":return t||i?r+(plural(e)?"msce":"msc"):r+"msci";case"y":return t||i?"rok":"rokem";case"yy":return t||i?r+(plural(e)?"roky":"let"):r+"lety"}}var t="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),n="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_");return e.defineLocale("cs",{months:t,monthsShort:n,monthsParse:function(e,t){var n,i=[];for(n=0;n<12;n++)i[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i");return i}(t,n),weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], LT",LLLL:"dddd, YYYY [] MMMM [] D[-], LT"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(e){return e+(/$/i.exec(e)?"":/$/i.exec(e)?"":"")},past:"%s ",s:"- ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t=e,n="",i=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return t>20?n=40===t||50===t||60===t||80===t||100===t?"fed":"ain":t>0&&(n=i[t]),e+n},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd [d.] D. MMMM YYYY LT"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gr kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function processRelativeTime(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}return e.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:processRelativeTime,mm:"%d Minuten",h:processRelativeTime,hh:"%d Stunden",d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function processRelativeTime(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}return e.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:processRelativeTime,mm:"%d Minuten",h:processRelativeTime,hh:"%d Stunden",d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(e,t){return/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(e,t,n){return e>11?n?"":"":n?"":""},isPM:function(e){return""===(e+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var n=this._calendarEl[e],i=t&&t.hours();return"function"==typeof n&&(n=n.apply(t)),n.replace("{}",i%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY LT",LLLL:"dddd, D MMMM, YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"Dimano_Lundo_Mardo_Merkredo_ado_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_a_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY LT",LLLL:"dddd, [la] D[-an de] MMMM, YYYY LT"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return/-MMM-/.test(i)?n[e.month()]:t[e.month()]},weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function processRelativeTime(e,t,n,i){var r={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:[e+" minuti",e+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[e+" tunni",e+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[e+" kuu",e+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[e+" aasta",e+" aastat"]};return t?r[n][2]?r[n][2]:r[n][1]:i?r[n][0]:r[n][1]}return e.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:processRelativeTime,m:processRelativeTime,mm:processRelativeTime,h:processRelativeTime,hh:processRelativeTime,d:processRelativeTime,dd:"%d peva",M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] LT",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] LT",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] LT",llll:"ddd, YYYY[ko] MMM D[a] LT"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiemParse:/  |  /,isPM:function(e){return/  /.test(e)},meridiem:function(e,t,n){return e<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[-]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function translate(e,t,n,i){var r="";switch(n){case"s":return i?"muutaman sekunnin":"muutama sekunti";case"m":return i?"minuutin":"minuutti";case"mm":r=i?"minuutin":"minuuttia";break;case"h":return i?"tunnin":"tunti";case"hh":r=i?"tunnin":"tuntia";break;case"d":return i?"pivn":"piv";case"dd":r=i?"pivn":"piv";break;case"M":return i?"kuukauden":"kuukausi";case"MM":r=i?"kuukauden":"kuukautta";break;case"y":return i?"vuoden":"vuosi";case"yy":r=i?"vuoden":"vuotta"}return r=verbalNumber(e,i)+" "+r}function verbalNumber(e,i){return e<10?i?n[e]:t[e]:e}var t="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),n=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",t[7],t[8],t[9]];return e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] LT",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] LT",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] LT",llll:"ddd, Do MMM YYYY, [klo] LT"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnai",MM:"%d mnair",y:"eitt r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(1===e?"er":"")}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(1===e?"er":"")},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");return e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,i){return/-MMM-/.test(i)?n[e.month()]:t[e.month()]},weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuo_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xu._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mrcores_Xoves_Venres_Sbado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mr._Xov._Ven._Sb.".split("_"),weekdaysMin:"Do_Lu_Ma_M_Xo_Ve_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return"uns segundos"===e?"nuns segundos":"en "+e},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY LT",LLLL:"dddd, D []MMMM YYYY LT",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:function(e){return 2===e?"":e+" "},d:"",dd:function(e){return 2===e?"":e+" "},M:"",MM:function(e){return 2===e?"":e+" "},y:"",yy:function(e){return 2===e?"":e%10==0&&10!==e?e+" ":e+" "}}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function translate(e,t,n){var i=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return i+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return i+=1===e?"dan":"dana";case"MM":return i+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return i+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}return e.defineLocale("hr",{months:"sjeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sje._vel._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:translate,mm:translate,h:translate,hh:translate,d:"dan",dd:translate,M:"mjesec",MM:translate,y:"godinu",yy:translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function translate(e,t,n,i){var r=e;switch(n){case"s":return i||t?"nhny msodperc":"nhny msodperce";case"m":return"egy"+(i||t?" perc":" perce");case"mm":return r+(i||t?" perc":" perce");case"h":return"egy"+(i||t?" ra":" rja");case"hh":return r+(i||t?" ra":" rja");case"d":return"egy"+(i||t?" nap":" napja");case"dd":return r+(i||t?" nap":" napja");case"M":return"egy"+(i||t?" hnap":" hnapja");case"MM":return r+(i||t?" hnap":" hnapja");case"y":return"egy"+(i||t?" v":" ve");case"yy":return r+(i||t?" v":" ve")}return""}function week(e){return(e?"":"[mlt] ")+"["+t[this.day()]+"] LT[-kor]"}var t="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");return e.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D., LT",LLLL:"YYYY. MMMM D., dddd LT"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return week.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return week.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function monthsCaseReplace(e,t){return{nominative:"___________".split("_"),accusative:"___________".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function monthsShortCaseReplace(e,t){return"___________".split("_")[e.month()]}function weekdaysCaseReplace(e,t){return"______".split("_")[e.day()]}return e.defineLocale("hy-am",{months:monthsCaseReplace,monthsShort:monthsShortCaseReplace,weekdays:weekdaysCaseReplace,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e){return e<4?"":e<12?"":e<17?"":""},ordinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-":e+"-";default:return e}},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"LT.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function plural(e){return e%100==11||e%10!=1}function translate(e,t,n,i){var r=e+" ";switch(n){case"s":return t||i?"nokkrar sekndur":"nokkrum sekndum";case"m":return t?"mnta":"mntu";case"mm":return plural(e)?r+(t||i?"mntur":"mntum"):t?r+"mnta":r+"mntu";case"hh":return plural(e)?r+(t||i?"klukkustundir":"klukkustundum"):r+"klukkustund";case"d":return t?"dagur":i?"dag":"degi";case"dd":return plural(e)?t?r+"dagar":r+(i?"daga":"dgum"):t?r+"dagur":r+(i?"dag":"degi");case"M":return t?"mnuur":i?"mnu":"mnui";case"MM":return plural(e)?t?r+"mnuir":r+(i?"mnui":"mnuum"):t?r+"mnuur":r+(i?"mnu":"mnui");case"y":return t||i?"r":"ri";case"yy":return plural(e)?r+(t||i?"r":"rum"):r+(t||i?"r":"ri")}}return e.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd, D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:translate,m:translate,mm:translate,h:"klukkustund",hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("ja",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahm",LTS:"LTs",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDLT",LLLL:"YYYYMDLT dddd"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function monthsCaseReplace(e,t){return{nominative:"___________".split("_"),accusative:"___________".split("_")}[/D[oD] *MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function weekdaysCaseReplace(e,t){return{nominative:"______".split("_"),accusative:"______".split("_")}[/(|)/.test(t)?"accusative":"nominative"][e.day()]}return e.defineLocale("ka",{months:monthsCaseReplace,monthsShort:"___________".split("_"),weekdays:weekdaysCaseReplace,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(e){return/(|||)/.test(e)?e.replace(/$/,""):e+""},past:function(e){return/(||||)/.test(e)?e.replace(/(|)$/," ")://.test(e)?e.replace(/$/," "):void 0},s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(e){return 0===e?e:1===e?e+"-":e<20||e<=100&&e%20==0||e%100==0?"-"+e:e+"-"},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h m",LTS:"A h m s",L:"YYYY.MM.DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D LT",LLLL:"YYYY MMMM D dddd LT"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function processRelativeTime(e,t,n,i){var r={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?r[n][0]:r[n][1]}function processFutureTime(e){return eifelerRegelAppliesToNumber(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e}function processPastTime(e){return eifelerRegelAppliesToNumber(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e}function eifelerRegelAppliesToNumber(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10,n=e/10;return eifelerRegelAppliesToNumber(0===t?n:t)}if(e<1e4){for(;e>=10;)e/=10;return eifelerRegelAppliesToNumber(e)}return e/=1e3,eifelerRegelAppliesToNumber(e)}return e.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:processFutureTime,past:processPastTime,s:"e puer Sekonnen",m:processRelativeTime,mm:"%d Minutten",h:processRelativeTime,hh:"%d Stonnen",d:processRelativeTime,dd:"%d Deeg",M:processRelativeTime,MM:"%d Mint",y:processRelativeTime,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function translateSeconds(e,t,n,i){return t?"kelios sekunds":i?"keli sekundi":"kelias sekundes"}function translateSingular(e,t,n,i){return t?forms(n)[0]:i?forms(n)[1]:forms(n)[2]}function special(e){return e%10==0||e>10&&e<20}function forms(e){return t[e].split("_")}function translate(e,t,n,i){var r=e+" ";return 1===e?r+translateSingular(e,t,n[0],i):t?r+(special(e)?forms(n)[1]:forms(n)[0]):i?r+forms(n)[1]:r+(special(e)?forms(n)[1]:forms(n)[2])}function relativeWeekDay(e,t){var i=-1===t.indexOf("dddd HH:mm"),r=n[e.day()];return i?r:r.substring(0,r.length-2)+""}var t={m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"},n="sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_");return e.defineLocale("lt",{months:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:relativeWeekDay,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], LT [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, LT [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], LT [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, LT [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:translateSeconds,m:translateSingular,mm:translate,h:translateSingular,hh:translate,d:translateSingular,dd:translate,M:translateSingular,MM:translate,y:translateSingular,yy:translate},ordinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function format(e,t,n){var i=e.split("_");return n?t%10==1&&11!==t?i[2]:i[3]:t%10==1&&11!==t?i[0]:i[1]}function relativeTimeWithPlural(e,n,i){return e+" "+format(t[i],e,n)}var t={mm:"minti_mintes_minte_mintes",hh:"stundu_stundas_stunda_stundas",dd:"dienu_dienas_diena_dienas",MM:"mnesi_mneus_mnesis_mnei",yy:"gadu_gadus_gads_gadi"};return e.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, LT",LLLL:"YYYY. [gada] D. MMMM, dddd, LT"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"%s vlk",past:"%s agrk",s:"daas sekundes",m:"minti",mm:relativeTimeWithPlural,h:"stundu",hh:relativeTimeWithPlural,d:"dienu",dd:relativeTimeWithPlural,M:"mnesi",MM:relativeTimeWithPlural,y:"gadu",yy:relativeTimeWithPlural},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&n<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,isPM:function(e){return/^( ||)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?" ":e<20?"":""}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"LT.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tirs_ons_tors_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"H.mm",LTS:"LT.ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._.__._._._.".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<3?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"":e<10?"":e<15?"":e<18?"":e<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");return e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return/-MMM-/.test(i)?n[e.month()]:t[e.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function plural(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function translate(e,t,n){var i=e+" ";switch(n){case"m":return t?"minuta":"minut";case"mm":return i+(plural(e)?"minuty":"minut");case"h":return t?"godzina":"godzin";case"hh":return i+(plural(e)?"godziny":"godzin");case"MM":return i+(plural(e)?"miesice":"miesicy");case"yy":return i+(plural(e)?"lata":"lat")}}var t="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");return e.defineLocale("pl",{months:function(e,i){return/D MMMM/.test(i)?n[e.month()]:t[e.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"nie_pon_wt_r_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:translate,mm:translate,h:translate,hh:translate,d:"1 dzie",dd:"%d dni",M:"miesic",MM:translate,y:"rok",yy:translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("pt-br",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"dom_2_3_4_5_6_sb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] LT",LLLL:"dddd, D [de] MMMM [de] YYYY [s] LT"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d"})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("pt",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"dom_2_3_4_5_6_sb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function relativeTimeWithPlural(e,t,n){var i={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},r=" ";return(e%100>=20||e>=100&&e%100==0)&&(r=" de "),e+r+i[n]}return e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",m:"un minut",mm:relativeTimeWithPlural,h:"o or",hh:relativeTimeWithPlural,d:"o zi",dd:relativeTimeWithPlural,M:"o lun",MM:relativeTimeWithPlural,y:"un an",yy:relativeTimeWithPlural},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function plural(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function relativeTimeWithPlural(e,t,n){var i={mm:t?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"};return"m"===n?t?"":"":e+" "+plural(i[n],+e)}function monthsCaseReplace(e,t){return{nominative:"___________".split("_"),accusative:"___________".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function monthsShortCaseReplace(e,t){return{nominative:"___________".split("_"),accusative:"___________".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function weekdaysCaseReplace(e,t){return{nominative:"______".split("_"),accusative:"______".split("_")}[/\[ ?[] ?(?:||)? ?\] ?dddd/.test(t)?"accusative":"nominative"][e.day()]}return e.defineLocale("ru",{months:monthsCaseReplace,monthsShort:monthsShortCaseReplace,weekdays:weekdaysCaseReplace,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:[/^/i,/^/i,/^/i,/^/i,/^[|]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT"},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT";switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:relativeTimeWithPlural,mm:relativeTimeWithPlural,h:"",hh:relativeTimeWithPlural,d:"",dd:relativeTimeWithPlural,M:"",MM:relativeTimeWithPlural,y:"",yy:relativeTimeWithPlural},meridiemParse:/|||/i,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},ordinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function plural(e){return e>1&&e<5}function translate(e,t,n,i){var r=e+" ";switch(n){case"s":return t||i?"pr seknd":"pr sekundami";case"m":return t?"minta":i?"mintu":"mintou";case"mm":return t||i?r+(plural(e)?"minty":"mint"):r+"mintami";case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":return t||i?r+(plural(e)?"hodiny":"hodn"):r+"hodinami";case"d":return t||i?"de":"dom";case"dd":return t||i?r+(plural(e)?"dni":"dn"):r+"dami";case"M":return t||i?"mesiac":"mesiacom";case"MM":return t||i?r+(plural(e)?"mesiace":"mesiacov"):r+"mesiacmi";case"y":return t||i?"rok":"rokom";case"yy":return t||i?r+(plural(e)?"roky":"rokov"):r+"rokmi"}}var t="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),n="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");return e.defineLocale("sk",{months:t,monthsShort:n,monthsParse:function(e,t){var n,i=[];for(n=0;n<12;n++)i[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i");return i}(t,n),weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:translate,m:translate,mm:translate,h:translate,hh:translate,d:translate,dd:translate,M:translate,MM:translate,y:translate,yy:translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function translate(e,t,n){var i=e+" ";switch(n){case"m":return t?"ena minuta":"eno minuto";case"mm":return i+=1===e?"minuta":2===e?"minuti":3===e||4===e?"minute":"minut";case"h":return t?"ena ura":"eno uro";case"hh":return i+=1===e?"ura":2===e?"uri":3===e||4===e?"ure":"ur";case"dd":return i+=1===e?"dan":"dni";case"MM":return i+=1===e?"mesec":2===e?"meseca":3===e||4===e?"mesece":"mesecev";case"yy":return i+=1===e?"leto":2===e?"leti":3===e||4===e?"leta":"let"}}return e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[prejnja] dddd [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"%s nazaj",s:"nekaj sekund",m:translate,mm:translate,h:translate,hh:translate,d:"en dan",dd:translate,M:"en mesec",MM:translate,y:"eno leto",yy:translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={words:{m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var r=t.words[i];return 1===i.length?n?r[0]:r[1]:e+" "+t.correctGrammaticalCase(e,r)}};return e.defineLocale("sr-cyrl",{months:["","","","","","","","","","","",""],monthsShort:[".",".",".",".","","","",".",".",".",".","."],weekdays:["","","","","","",""],weekdaysShort:[".",".",".",".",".",".","."],weekdaysMin:["","","","","","",""],longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"",dd:t.translate,M:"",MM:t.translate,y:"",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var r=t.words[i];return 1===i.length?n?r[0]:r[1]:e+" "+t.correctGrammaticalCase(e,r)}};return e.defineLocale("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","etvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","et.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","e","pe","su"],longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"dddd LT",lastWeek:"[Frra] dddd[en] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"e":1===t?"a":2===t?"a":"e")},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:function(e){return e+""},meridiemParse:/|||||/,meridiem:function(e,t,n){return e<2?" ":e<6?" ":e<10?" ":e<14?" ":e<18?" ":e<22?" ":" "},meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<2?e:e+12:""===t||""===t?e:""===t&&e>=10?e:e+12},week:{dow:0,doy:6}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("th",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),longDateFormat:{LT:"H  m ",LTS:"LT s ",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  LT",LLLL:"dddd D MMMM YYYY  LT"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM DD, YYYY LT"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};return e.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinalParse:/\d{1,2}'(inci|nci|nc|nc|uncu|nc)/,ordinal:function(e){if(0===e)return e+"'nc";var n=e%10,i=e%100-n,r=e>=100?100:null;return e+(t[n]||t[i]||t[r])},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function plural(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function relativeTimeWithPlural(e,t,n){var i={mm:"__",hh:"__",dd:"__",MM:"__",yy:"__"};return"m"===n?t?"":"":"h"===n?t?"":"":e+" "+plural(i[n],+e)}function monthsCaseReplace(e,t){return{nominative:"___________".split("_"),accusative:"___________".split("_")}[/D[oD]? *MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function weekdaysCaseReplace(e,t){return{nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")}[/(\[[]\]) ?dddd/.test(t)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]}function processHoursFunction(e){return function(){return e+""+(11===this.hours()?"":"")+"] LT"}}return e.defineLocale("uk",{months:monthsCaseReplace,monthsShort:"___________".split("_"),weekdays:weekdaysCaseReplace,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:processHoursFunction("[ "),nextDay:processHoursFunction("[ "),lastDay:processHoursFunction("[ "),nextWeek:processHoursFunction("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return processHoursFunction("[] dddd [").call(this);case 1:case 2:case 4:return processHoursFunction("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:relativeTimeWithPlural,mm:relativeTimeWithPlural,h:"",hh:relativeTimeWithPlural,d:"",dd:relativeTimeWithPlural,M:"",MM:relativeTimeWithPlural,y:"",yy:relativeTimeWithPlural},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},ordinalParse:/\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"D MMMM YYYY, dddd LT"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY LT",LLLL:"dddd, D MMMM [nm] YYYY LT",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYY-MM-DD",LL:"YYYYMMMD",LLL:"YYYYMMMDLT",LLLL:"YYYYMMMDddddLT",l:"YYYY-MM-DD",ll:"YYYYMMMD",lll:"YYYYMMMDLT",llll:"YYYYMMMDddddLT"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t||""===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var i=100*e+t;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},lastDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()-t.unix()>=604800?"[]":"[]",0===this.minutes()?n+"dddAh":n+"dddAhmm"},lastWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()<t.unix()?"[]":"[]",0===this.minutes()?n+"dddAh":n+"dddAhmm"},sameElse:"LL"},ordinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,o;!function(a){r=[n(0)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){return e.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDLT",LLLL:"YYYYMMMDddddLT",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDLT",llll:"YYYYMMMDddddLT"},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"}})})},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(1),o=_interopRequireDefault(r),a=n(3),s=_interopRequireDefault(a),l=n(116),c=_interopRequireDefault(l),u=n(6),d=_interopRequireDefault(u),p="modal-active",h=9,f=27,_=function(e){function Modal(){_classCallCheck(this,Modal);var e=_possibleConstructorReturn(this,(Modal.__proto__||Object.getPrototypeOf(Modal)).call(this));return e.focusedIndex=0,e.focusableElements=[],e.handleKeyDown=e.handleKeyDown.bind(e),e.setInitialFocus=e.setInitialFocus.bind(e),e.updateFocus=e.updateFocus.bind(e),e}return _inherits(Modal,e),i(Modal,[{key:"handleKeyDown",value:function(e){e.keyCode===h&&(e.preventDefault(),e.shiftKey?this.focusedIndex=(this.focusedIndex-1)%this.focusableElements.length:this.focusedIndex=(this.focusedIndex+1)%this.focusableElements.length,this.updateFocus()),e.keyCode===f&&this.props.onCloseClick(e)}},{key:"setInitialFocus",value:function(){this.focusableElements=d.default.getFocusableElements(this.wrapper);var e=this.focusableElements.filter(".js-initial-focus");e.length?this.focusedIndex=this.focusableElements.index(e):this.focusableElements.length>=2?this.focusedIndex=1:this.focusedIndex=0,this.updateFocus()}},{key:"updateFocus",value:function(){this.focusableElements.length>0&&this.focusableElements[this.focusedIndex].focus()}},{key:"componentWillMount",value:function(){document.body.classList.toggle(p),(0,o.default)(document).on("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.body.classList.remove(p),(0,o.default)(document).off("keydown",this.handleKeyDown)}},{key:"componentDidMount",value:function(){this.setInitialFocus()}},{key:"render",value:function(){var e=this,t=this.props.extraClass||"";return s.default.createElement("div",{ref:function(t){return e.wrapper=t}},s.default.createElement(c.default,{transitionAppear:!0,transitionAppearTimeout:300,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"modal-underlay"},s.default.createElement("div",{className:"modal-underlay t-modal-underlay"})),s.default.createElement("div",{className:"modal-wrapper t-modal-wrapper "+t},s.default.createElement("a",{href:"#",className:"modal-close t-modal-close",onClick:this.props.onCloseClick},s.default.createElement("svg",{viewBox:"0 0 24 24"},s.default.createElement("path",{d:"M19 6.41l-1.41-1.41-5.59 5.59-5.59-5.59-1.41 1.41 5.59 5.59-5.59 5.59 1.41 1.41 5.59-5.59 5.59 5.59 1.41-1.41-5.59-5.59z"}),s.default.createElement("path",{d:"M0 0h24v24h-24z",fill:"none"}))),this.props.children))}}]),Modal}(a.Component);t.default=_,_.propTypes={children:a.PropTypes.node,extraClass:a.PropTypes.string,onCloseClick:a.PropTypes.func.isRequired},e.exports=t.default},,function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(170),r=_interopRequireWildcard(i),o=n(187),a=_interopRequireWildcard(o),s=n(212),l=_interopRequireWildcard(s),c=n(213),u=_interopRequireDefault(c);t.default={actions:a,initialState:c.initialState,reducer:u.default,api:l,types:r},e.exports=t.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(171),r=_interopRequireWildcard(i),o=n(214),a=_interopRequireWildcard(o),s=n(215),l=_interopRequireDefault(s);t.default={actions:a,initialState:s.initialState,reducer:l.default,types:r},e.exports=t.default},,function(e,t,n){var i;(function(){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r,o){void 0!==(i=function(){return o(window)}.call(t,n,t,e))&&(e.exports=i)}(0,function(e){function LogStream(i){var o,a=i.trace?(Math.random()+Math.PI).toString(36).substring(2,10):null,s=i.page_info,l=i.token,c=i.print,u=i.no_format,d=function(){return"undefined"==typeof XDomainRequest?i.ssl:"https:"===e.location.protocol}();o=e.LEENDPOINT?e.LEENDPOINT:u?"localhost:8080/noformat":"localhost:8080/v1",o=(d?"https://":"http://")+o+"/logs/"+l;var p=!0,h=[],f=!1,_=!1;if(i.catchall){var m=e.onerror,g=function(e,t,n){return b({error:e,line:n,location:t}).level("ERROR").send(),!!m&&m(e,t,n)};e.onerror=g}var v=function(){var t=e.navigator||{doNotTrack:void 0},n=e.screen||{};return{url:(e.location||{}).pathname,referrer:document.referrer,screen:{width:n.width,height:n.height},window:{width:e.innerWidth,height:e.innerHeight},browser:{name:t.appName,version:t.appVersion,cookie_enabled:t.cookieEnabled,do_not_track:t.doNotTrack},platform:t.platform}},y=function(){var e=Array.prototype.slice.call(arguments);if(0===e.length)throw new Error("No arguments!");return 1===e.length?e[0]:e},b=function _rawLog(e){var n=y.apply(this,arguments),i={event:n};return"never"!==s&&(_&&"per-entry"!==s||(_=!0,void 0===n.screen&&void 0===n.browser&&_rawLog(v()).level("PAGE").send())),a&&(i.trace=a),{level:function(e){if(c&&"undefined"!=typeof console&&"PAGE"!==e){var n=null;"undefined"!=typeof XDomainRequest&&(n=i.trace+" "+i.event);try{console[e.toLowerCase()].call(console,n||i)}catch(e){console.log(n||i)}}return i.level=e,{send:function(){var e=[],n=JSON.stringify(i,function(n,i){if(void 0===i)return"undefined";if("object"===(void 0===i?"undefined":r(i))&&null!==i){if(-1!==t(e,i))return"<?>";e.push(i)}return i});f?h.push(n):T(l,n)}}}}};this.log=b;var T=function _apiCall(e,t){f=!0;var i=n();p&&(i.constructor===XMLHttpRequest?i.onreadystatechange=function(){4===i.readyState&&(i.status>=400?(console.error("Couldn't submit events."),410===i.status&&console.warn("This version of le_js is no longer supported!")):(301===i.status&&console.warn("This version of le_js is deprecated! Consider upgrading."),h.length>0?_apiCall(e,h.shift()):f=!1))}:i.onload=function(){h.length>0?_apiCall(e,h.shift()):f=!1},i.open("POST",o,!0),i.constructor===XMLHttpRequest&&(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-type","application/json")),i.overrideMimeType&&i.overrideMimeType("text"),i.send(t))}}function Logger(e){var t,n={ssl:!0,catchall:!1,trace:!0,page_info:"never",print:!1,endpoint:null,token:null};if("object"!==(void 0===e?"undefined":r(e)))throw new Error("Invalid parameters for createLogStream()");for(var i in e)n[i]=e[i];if(null===n.token)throw new Error("Token not present.");t=new LogStream(n);var o=function(e){if(t)return t.log.apply(this,arguments);throw new Error("You must call LE.init(...) first.")};return{log:function(){o.apply(this,arguments).level("LOG").send()},warn:function(){o.apply(this,arguments).level("WARN").send()},error:function(){o.apply(this,arguments).level("ERROR").send()},info:function(){o.apply(this,arguments).level("INFO").send()}}}var t=function(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1},n=function(){return"undefined"!=typeof XDomainRequest?new XDomainRequest:new XMLHttpRequest},i={},o=function(e){if(!i.hasOwnProperty(e))throw new Error("Invalid name for logStream");return i[e]},a=function(e){if("string"!=typeof e.name)throw new Error("Name not present.");if(i.hasOwnProperty(e.name))throw new Error("A logger with that name already exists!");return i[e.name]=new Logger(e),!0};return{init:function(e){var t={name:"default"};if("object"===(void 0===e?"undefined":r(e)))for(var n in e)t[n]=e[n];else{if("string"!=typeof e)throw new Error("Invalid parameters for init()");t.token=e}return a(t)},createLogStream:a,to:o,destroy:function(e){void 0===e&&(e="default"),delete i[e]},log:function(){for(var e in i)i[e].log.apply(this,arguments)},warn:function(){for(var e in i)i[e].warn.apply(this,arguments)},error:function(){for(var e in i)i[e].error.apply(this,arguments)},info:function(){for(var e in i)i[e].info.apply(this,arguments)}}})}).call(window)},,,function(e,t,n){"use strict";function FastClick(e){var t,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)},FastClick.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var r=Node.prototype.removeEventListener;"click"===t?r.call(e,t,n.hijacked||n,i):r.call(e,t,n,i)},e.addEventListener=function(t,n,i){var r=Node.prototype.addEventListener;"click"===t?r.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(e,t,n,i)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null))}var i;FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.focus=function(e){var t;this.deviceIsIOS&&e.setSelectionRange?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){var t,n;if(!(t=e.fastClickScrollParent)||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],this.deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){var t=e.changedTouches[0];return Math.abs(t.pageX-this.touchStartX)>10||Math.abs(t.pageY-this.touchStartY)>10},FastClick.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var t,n,i,r,o,a=this.targetElement;if(this.touchHasMoved(e)&&(this.trackingClick=!1,this.targetElement=null),!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(o=e.changedTouches[0],a=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)),"label"===(i=a.tagName.toLowerCase())){if(t=this.findControl(a)){if(this.focus(a),this.deviceIsAndroid)return!1;a=t}}else if(this.needsFocus(a))return e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(a),this.deviceIsIOS4&&"select"===i||(this.targetElement=null,e.preventDefault()),!1);return!(!this.deviceIsIOS||this.deviceIsIOS4||!(r=a.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(a)||(e.preventDefault(),this.sendClick(a,e)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},FastClick.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){var t;if(void 0===window.ontouchstart)return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;if((t=document.querySelector("meta[name=viewport]"))&&-1!==t.content.indexOf("user-scalable=no"))return!0}return"none"===e.style.msTouchAction},FastClick.attach=function(e){return new FastClick(e)},void 0!==(i=function(){return FastClick}.call(t,n,t,e))&&(e.exports=i)},,function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(172),r=_interopRequireWildcard(i),o=n(216),a=_interopRequireWildcard(o),s=n(217),l=_interopRequireDefault(s);t.default={actions:a,initialState:s.initialState,errorLevel:s.errorLevel,reducer:l.default,types:r},e.exports=t.default},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(1),i=n(7),r=n(28);return i.CompositeView.extend({el:"body",behaviors:{AnalyticsBehaviors:{behaviorClass:r}},events:{"submit .cc-trial-form #registration-form":function(){this.triggerMethod("track",["send","event","Log In","Sign Up","New CC Account"])},"submit .trial-form #registration-form":function(e){var n=t(".js-user-password"),i=t(".js-user-email"),r=n.val()&&i.val();n.hasClass("error")||i.hasClass("error")||!r||this.triggerMethod("track",["send","event","Subscribe","Create Account","Free Trial"])},"submit .js-subscription-form":function(){this.triggerMethod("track",["send","event","Subscribe","Upgrade","Trial Expired"])},"submit #registration-topics-form":function(){this.triggerMethod("track",["send","event","Log In","Sign Up","Complete Sign Up"])},"submit #cancel_form":function(){this.triggerMethod("track",["send","event","Subscribe","Cancel",t("html").data("user-uuid")])},"click [id^=liveagent_button_online]":function(){this.triggerMethod("track",["send","event","button","click","sales live chat"])},"click .js-basic-panel":function(e){this.triggerMethod("track",["send","event","Plan Picker","click",t(e.target).attr("name")])},"click .js-pro-panel":function(e){this.triggerMethod("track",["send","event","Plan Picker","click",t(e.target).attr("name")])},"click .js-title-detail .js-position-book":function(){this.triggerMethod("track",["send","event","Title Detail","Read","Start Reading"])},"click .js-title-detail .js-position-video":function(){this.triggerMethod("track",["send","event","Title Detail","View","Start Viewing"])},"click .js-ga-top":function(){this.triggerMethod("track",["send","event","Anon Home","Sign Up","Start Trial - Top"])},"click .js-ga-middle":function(){this.triggerMethod("track",["send","event","Anon Home","Sign Up","Start Trial - Middle"])},"click .js-ga-bottom":function(){this.triggerMethod("track",["send","event","Anon Home","Sign Up","Start Trial - Bottom"])},"click .js-add-member":function(){this.triggerMethod("track",["send","event","Subscribe","Team Sign Up","Add Another Member"])},"click .js-ios-install-app":function(){this.triggerMethod("track",["send","event","Mobile","iOS","Install App"])},"click .js-ios-open-in-app":function(){this.triggerMethod("track",["send","event","Mobile","iOS","Open Title in App"])},"click .social-sharing.annotation-card a":function(e){var n=t(e.target).data("share-action"),i=t(e.target).data("share-bitid");this.triggerMethod("track",["send","event","Annotation",n,i])},"click .purchase-link":function(){this.triggerMethod("track",["send","event","Buy Link","Purchase",t("html").data("publishers")])},"click .js-explore-everything":function(){this.triggerMethod("track",["send","event","Home","Browse","Everything"],{store:!0})},"click .js-explore-new":function(){this.triggerMethod("track",["send","event","Home","Browse","New"],{store:!0})},"click .js-explore-video":function(){this.triggerMethod("track",["send","event","Home","Browse","Video"],{store:!0})},"click .js-safari-for-business":function(){this.triggerMethod("track",["send","event","nag bar","Jump to Teams",t(event.target).text()])},"click .js-dashboard-dense .js-announcement a":function(){this.triggerMethod("track",["send","event","Home","Click","Announcement"],{store:!0})},"click .js-dashboard-dense .js-dense-queue .js-dense-card":function(){this.triggerMethod("track",["send","event","Home","Read","In Your Queue"],{store:!0})},"click .js-dashboard-dense .js-dense-queue .js-see-more":function(){this.triggerMethod("track",["send","event","Home","See More","In Your Queue"],{store:!0})},"click .js-dashboard-dense .js-dense-recent .js-dense-card":function(){this.triggerMethod("track",["send","event","Home","Read","Last Viewed"],{store:!0})},"click .js-dashboard-dense .js-dense-recent .js-see-more":function(){this.triggerMethod("track",["send","event","Home","See More","Last Viewed"],{store:!0})},"click .js-dashboard-dense .js-dense-new .js-dense-card":function(){this.triggerMethod("track",["send","event","Home","Read","New in Safari"],{store:!0})},"click .js-dashboard-dense .js-dense-new .js-see-more":function(){this.triggerMethod("track",["send","event","Home","See More","New in Safari"],{store:!0})},"click .js-dashboard-dense .js-dense-recommended .js-dense-card":function(){this.triggerMethod("track",["send","event","Home","Read","Recommended"],{store:!0})},"click .js-dashboard-dense .js-dense-recommended .js-see-more":function(){this.triggerMethod("track",["send","event","Home","See More","Recommended"],{store:!0})},"click .js-dashboard-dense .js-dense-editors-picks .js-dense-card":function(){this.triggerMethod("track",["send","event","Home","Read","Editors Picks"],{store:!0})},"click .js-dashboard-dense .js-dense-editors-picks .js-see-more":function(){this.triggerMethod("track",["send","event","Home","See More","Editors Picks"],{store:!0})},"click .js-dashboard-dense .js-dense-popular .js-dense-card":function(){this.triggerMethod("track",["send","event","Home","Read","Popular"],{store:!0})},"click .js-dashboard-dense .js-dense-popular .js-see-more":function(){this.triggerMethod("track",["send","event","Home","See More","Popular"],{store:!0})},"click .js-dashboard-dense .js-dense-trending .js-dense-card":function(){this.triggerMethod("track",["send","event","Home","Read","Trending in Your Topics"],{store:!0})},"click .js-dashboard-dense .js-dense-trending .js-see-more":function(){this.triggerMethod("track",["send","event","Home","See More","Trending in Your Topics"],{store:!0})},"click .js-dashboard-dense .js-dense-videos .js-dense-card":function(){this.triggerMethod("track",["send","event","Home","Read","Popular Videos"],{store:!0})},"click .js-dashboard-dense .js-dense-videos .js-see-more":function(){this.triggerMethod("track",["send","event","Home","See More","Popular Videos"],{store:!0})},"click .js-dashboard-dense .js-dense-audiobooks .js-dense-card":function(){this.triggerMethod("track",["send","event","Home","Read","Audio Books"],{store:!0})},"click .js-dashboard-dense .js-dense-audiobooks .js-see-more":function(){this.triggerMethod("track",["send","event","Home","See More","Audio Books"],{store:!0})},"click .js-dashboard-dense .js-case-studies-module .js-see-more":function(){this.triggerMethod("track",["send","event","Home","See More","Case Studies"],{store:!0})},"click .js-live-training-module .js-learn-more":function(e){var n=".js-dense-course",i=t(e.target),r=i.parents(n).first(),o=t(n).index(r);this.triggerMethod("track",["send","event","Home","learn_more","Upcoming_OT",o],{store:!0})},"click .js-live-training-module .js-course-title":function(e){var n=".js-dense-course",i=t(e.target),r=i.parents(n).first(),o=t(n).index(r);this.triggerMethod("track",["send","event","Home","course_title","Upcoming_OT",o],{store:!0})},"click .js-index-course-title":function(e){function getTopicParameter(){return _.isUndefined(location.search.split("topic=")[1])?"":decodeURIComponent(location.search.split("topic=")[1])}var n=".js-course-card",i=t(e.target),r=i.parents(n).first(),o=t(n).index(r)+1;this.triggerMethod("track",["send","event","live_training_courses","course_title",getTopicParameter(),o])},"click .js-ot-full-schedule":function(){this.triggerMethod("track",["send","event","Home","ot_banner","Upcoming_OT"],{store:!0})},"click .js-transformation-headline":function(){this.triggerMethod("track",["send","event","Home","Learn More","Transformation Playlists"])},"click .js-transform-cards .js-playlist-title":function(e){var n=t(e.target).closest(".js-card"),i=n.closest(".js-cards"),r=t(".topics li.selected .js-header-topic").text(),o=i.find(".js-card").index(n)+1;this.triggerMethod("track",["send","event","Transform","Title Click",r,o])},"click .js-transform-cards .js-view-list":function(e){var n=t(e.target).closest(".js-card"),i=n.closest(".js-cards"),r=t(".topics li.selected .js-header-topic").text(),o=i.find(".js-card").index(n)+1;this.triggerMethod("track",["send","event","Transform","View List",r,o])},"click .js-transform-banner .js-header-topic":function(e){var n=t(e.target),i=n.text(),r=n.closest("li").index();this.triggerMethod("track",["send","event","Transform","Topic Click",i,r])},"click .playlist-header .js-topic-link":function(e){var n=t.trim(t(".playlist-header h1").text()),i=t(e.target),r=i.text(),o=i.closest("ul").find("li").index(i.closest("li"))+1;this.triggerMethod("track",["send","event",n,r,"Jump to Topic",o])},"click .js-transform-playlist-titles .js-title-image a":function(e){var n=t(e.target).closest("li"),i=n.closest(".js-transform-playlist-titles"),r=i.prev("h2").text(),o=i.find("li").index(n)+1;this.triggerMethod("track",["send","event","Transform Playlist","Cover Click",r,o])},"click .js-transform-playlist-titles .js-title-link":function(e){var n=t(e.target).closest("li"),i=n.closest(".js-transform-playlist-titles"),r=i.prev("h2").text(),o=i.find("li").index(n)+1;this.triggerMethod("track",["send","event","Transform Playlist","Title Click",r,o])},"click .js-transform-playlist-titles .js-queue":function(e){var n=t(e.target).closest("li"),i=n.closest(".js-transform-playlist-titles"),r=i.prev("h2").text(),o=i.find("li").index(n)+1;this.triggerMethod("track",["send","event","Transform Playlist","Queue Click",r,o])},"click .js-transform-playlist-titles .js-title-start":function(e){var n=t(e.target).closest("li"),i=n.closest(".js-transform-playlist-titles"),r=i.prev("h2").text(),o=i.find("li").index(n)+1;this.triggerMethod("track",["send","event","Transform Playlist","Title Start Click",r,o])},"click .js-track-oriole-title":function(e){var n=t.trim(t(e.target).text());this.triggerMethod("track",["send","event","Oriole","Title click",n])},"click .js-track-oriole-start-tutorial":function(e){var n=t(e.target),i=n.closest(".block-oriole"),r=t.trim(i.find(".title").text());this.triggerMethod("track",["send","event","Oriole","Start Tutorial",r])},"click .npromo-container a":function(e){var n,i=t(e.target),r=i.parents(".npromo-container").data("slug"),o=!1;if(i.hasClass("js-promo-subscribe"))n="Subscribe";else if(i.hasClass("js-promo-sample"))n="Sample";else if(i.hasClass("js-promo-dismiss"))n="Dismiss";else{if(!i.hasClass("js-promo-see-all"))return;n="See All",o=!0}this.triggerMethod("track",["send","event","Home",n,"Newsletter-"+r],{store:o})},"click .recent-items-container .js-more-button":function(){this.triggerMethod("track",["send","event","Recent Items","Click","Load More"])},"click .js-course-card .js-learn-more":function(e){var n=".js-course-card",i=t(e.target),r=i.parents(n).first(),o=t(n).index(r);this.triggerMethod("track",["send","event","live_training_courses","learn_more","",o],{store:!0})},"click .js-course-card .js-course-title":function(e){var n=".js-course-card",i=t(e.target),r=i.parents(n).first(),o=t(n).index(r);this.triggerMethod("track",["send","event","live_training_courses","course_title","",o],{store:!0})},"click .js-courses-see-why":function(){this.triggerMethod("track",["send","event","live_training_courses","see_why","Banner"],{store:!0})},"change .js-course-topic":function(e){var n=t(e.target).val()||"";this.triggerMethod("track",["send","event","live_training_courses","Sort",n],{store:!0})},"click .ga-b2c-trial-subscribe-nag":function(e){this.triggerMethod("track",["send","event","sale nag","find out more","cm2018 sale"])}}})}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i=n(121),r=n(2),o=n(4),a=n(6);return t=function(){"function"==typeof window.ga&&a.callStoredAnalytics(),o.on("track",function(e,t){if(t=t||{},t.store)return r.has(r.last(e),"title")||e.push({title:document.title}),void a.storeAnalyticsCall(e);"undefined"!=typeof ga&&ga.apply(null,e)}),new i},{init:t}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(void 0===e)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(e),function(e){function transitionEnd(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=transitionEnd(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(e),function(e){function Plugin(t){return this.each(function(){var i=e(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof t&&r[t].call(i)})}var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.prototype.close=function(t){function removeElement(){o.detach().trigger("closed.bs.alert").remove()}var i=e(this),r=i.attr("data-target");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=e(r);t&&t.preventDefault(),o.length||(o=i.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",removeElement).emulateTransitionEnd(n.TRANSITION_DURATION):removeElement())};var i=e.fn.alert;e.fn.alert=Plugin,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(e),function(e){function Plugin(i){return this.each(function(){var r=e(this),o=r.data("bs.button"),a="object"==(void 0===i?"undefined":t(i))&&i;o||r.data("bs.button",o=new n(this,a)),"toggle"==i?o.toggle():i&&o.setState(i)})}var n=function Button(t,n){this.$element=e(t),this.options=e.extend({},Button.DEFAULTS,n),this.isLoading=!1};n.VERSION="3.3.2",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",o=i.data();t+="Text",null==o.resetText&&i.data("resetText",i[r]()),setTimeout(e.proxy(function(){i[r](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=Plugin,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),Plugin.call(n,"toggle"),t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(e),function(e){function Plugin(i){return this.each(function(){var r=e(this),o=r.data("bs.carousel"),a=e.extend({},n.DEFAULTS,r.data(),"object"==(void 0===i?"undefined":t(i))&&i),s="string"==typeof i?i:a.slide;o||r.data("bs.carousel",o=new n(this,a)),"number"==typeof i?o.to(i):s?o[s]():a.interval&&o.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.2",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t);if(("prev"==e&&0===n||"next"==e&&n==this.$items.length-1)&&!this.options.wrap)return t;var i="prev"==e?-1:1,r=(n+i)%this.$items.length;return this.$items.eq(r)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(t,i){var r=this.$element.find(".item.active"),o=i||this.getItemForDirection(t,r),a=this.interval,s="next"==t?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(o)]);d&&d.addClass("active")}var p=e.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,r.addClass(s),o.addClass(s),r.one("bsTransitionEnd",function(){o.removeClass([t,s].join(" ")).addClass("active"),r.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(p)),a&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=Plugin,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var r=function(t){var n,i=e(this),r=e(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var o=e.extend({},r.data(),i.data()),a=i.attr("data-slide-to");a&&(o.interval=!1),Plugin.call(r,o),a&&r.data("bs.carousel").to(a),t.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);Plugin.call(t,t.data())})})}(e),function(e){function getTargetFromTrigger(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function Plugin(i){return this.each(function(){var r=e(this),o=r.data("bs.collapse"),a=e.extend({},n.DEFAULTS,r.data(),"object"==(void 0===i?"undefined":t(i))&&i);!o&&a.toggle&&"show"==i&&(a.toggle=!1),o||r.data("bs.collapse",o=new n(this,a)),"string"==typeof i&&o[i]()})}var n=function Collapse(t,n){this.$element=e(t),this.options=e.extend({},Collapse.DEFAULTS,n),this.$trigger=e(this.options.trigger).filter('[href="#'+t.id+'"], [data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.2",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"))&&t.transitioning)){var r=e.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){i&&i.length&&(Plugin.call(i,"hide"),t||i.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var s=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[o](this.$element[0][s])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return r.call(this);this.$element[i](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(n.TRANSITION_DURATION)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,n){var i=e(n);this.addAriaAndCollapsedClass(getTargetFromTrigger(i),i)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=Plugin,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var n=e(this);n.attr("data-target")||t.preventDefault();var i=getTargetFromTrigger(n),r=i.data("bs.collapse"),o=r?"toggle":e.extend({},n.data(),{trigger:this});Plugin.call(i,o)})}(e),function(e){function clearMenus(i){i&&3===i.which||(e(t).remove(),e(n).each(function(){var t=e(this),n=getParent(t),r={relatedTarget:this};n.hasClass("open")&&(n.trigger(i=e.Event("hide.bs.dropdown",r)),i.isDefaultPrevented()||(t.attr("aria-expanded","false"),n.removeClass("open").trigger("hidden.bs.dropdown",r)))}))}function getParent(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function Plugin(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new i(this)),"string"==typeof t&&r[t].call(n)})}var t=".dropdown-backdrop",n='[data-toggle="dropdown"]',i=function(t){e(t).on("click.bs.dropdown",this.toggle)};i.VERSION="3.3.2",i.prototype.toggle=function(t){var n=e(this);if(!n.is(".disabled, :disabled")){var i=getParent(n),r=i.hasClass("open");if(clearMenus(),!r){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",clearMenus);var o={relatedTarget:this};if(i.trigger(t=e.Event("show.bs.dropdown",o)),t.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger("shown.bs.dropdown",o)}return!1}},i.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var r=getParent(i),o=r.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&r.find(n).trigger("focus"),i.trigger("click");var a=" li:not(.divider):visible a",s=r.find('[role="menu"]'+a+', [role="listbox"]'+a);if(s.length){var l=s.index(t.target);38==t.which&&l>0&&l--,40==t.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var r=e.fn.dropdown;e.fn.dropdown=Plugin,e.fn.dropdown.Constructor=i,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=r,this},e(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,i.prototype.toggle).on("keydown.bs.dropdown.data-api",n,i.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',i.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',i.prototype.keydown)}(e),function(e){function Plugin(i,r){return this.each(function(){var o=e(this),a=o.data("bs.modal"),s=e.extend({},n.DEFAULTS,o.data(),"object"==(void 0===i?"undefined":t(i))&&i);a||o.data("bs.modal",a=new n(this,s)),"string"==typeof i?a[i](r):s.show&&a.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.2",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.options.backdrop&&i.adjustBackdrop(),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});r?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&r;if(this.$backdrop=e('<div class="modal-backdrop '+r+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},n.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},n.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=Plugin,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),r=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},r.data(),n.data());n.is("a")&&t.preventDefault(),r.one("show.bs.modal",function(e){e.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),Plugin.call(r,o,this)})}(e),function(e){function Plugin(i){return this.each(function(){var r=e(this),o=r.data("bs.tooltip"),a="object"==(void 0===i?"undefined":t(i))&&i;(o||"destroy"!=i)&&(o||r.data("bs.tooltip",o=new n(this,a)),"string"==typeof i&&o[i]())})}var n=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var r=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(s);c&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var u=this.getPosition(),d=o[0].offsetWidth,p=o[0].offsetHeight;if(c){var h=s,f=this.options.container?e(this.options.container):this.$element.parent(),_=this.getPosition(f);s="bottom"==s&&u.bottom+p>_.bottom?"top":"top"==s&&u.top-p<_.top?"bottom":"right"==s&&u.right+d>_.width?"left":"left"==s&&u.left-d<_.left?"right":s,o.removeClass(h).addClass(s)}var m=this.getCalculatedOffset(s,u,d,p);this.applyPlacement(m,s);var g=function(){var e=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==e&&r.leave(r)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top=t.top+a,t.left=t.left+s,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=o&&(t.top=t.top+o-c);var u=this.getViewportAdjustedDelta(n,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(n),p=d?2*u.left-r+l:2*u.top-o+c,h=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(p,i[0][h],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function complete(){"in"!=i.hoverState&&r.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,r=this.tip(),o=e.Event("hide.bs."+this.type);if(this.$element.trigger(o),!o.isDefaultPrevented())return r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",complete).emulateTransitionEnd(n.TRANSITION_DURATION):complete(),this.hoverState=null,this},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=i?{top:0,left:0}:t.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,a,s,o)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,l=t.top+o-a.scroll+i;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var c=t.left-o,u=t.left+o+n;c<a.left?r.left=a.left-c:u>a.width&&(r.left=a.left+a.width-u)}return r},n.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},n.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var i=e.fn.tooltip;e.fn.tooltip=Plugin,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(e),function(e){function Plugin(i){return this.each(function(){var r=e(this),o=r.data("bs.popover"),a="object"==(void 0===i?"undefined":t(i))&&i;(o||"destroy"!=i)&&(o||r.data("bs.popover",o=new n(this,a)),"string"==typeof i&&o[i]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.2",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var i=e.fn.popover;e.fn.popover=Plugin,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(e),function(e){function ScrollSpy(t,n){var i=e.proxy(this.process,this);this.$body=e("body"),this.$scrollElement=e(e(t).is("body")?window:t),this.options=e.extend({},ScrollSpy.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",i),this.refresh(),this.process()}function Plugin(n){return this.each(function(){var i=e(this),r=i.data("bs.scrollspy"),o="object"==(void 0===n?"undefined":t(n))&&n;r||i.data("bs.scrollspy",r=new ScrollSpy(this,o)),"string"==typeof n&&r[n]()})}ScrollSpy.VERSION="3.3.2",ScrollSpy.DEFAULTS={offset:10},ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},ScrollSpy.prototype.refresh=function(){var t="offset",n=0;e.isWindow(this.$scrollElement[0])||(t="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var i=this;this.$body.find(this.selector).map(function(){var i=e(this),r=i.data("target")||i.attr("href"),o=/^#./.test(r)&&e(r);return o&&o.length&&o.is(":visible")&&[[o[t]().top+n,r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},ScrollSpy.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)a!=o[e]&&t>=r[e]&&(!r[e+1]||t<=r[e+1])&&this.activate(o[e])},ScrollSpy.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},ScrollSpy.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=e.fn.scrollspy;e.fn.scrollspy=Plugin,e.fn.scrollspy.Constructor=ScrollSpy,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);Plugin.call(t,t.data())})})}(e),function(e){function Plugin(n){return this.each(function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new t(this)),"string"==typeof n&&r[n]()})}var t=function(t){this.element=e(t)};t.VERSION="3.3.2",t.TRANSITION_DURATION=150,t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(i);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},t.prototype.activate=function(n,i,r){function next(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu")&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var o=i.find("> .active"),a=r&&e.support.transition&&(o.length&&o.hasClass("fade")||!!i.find("> .fade").length);o.length&&a?o.one("bsTransitionEnd",next).emulateTransitionEnd(t.TRANSITION_DURATION):next(),o.removeClass("in")};var n=e.fn.tab;e.fn.tab=Plugin,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this};var i=function(t){t.preventDefault(),Plugin.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(e),function(e){function Plugin(i){return this.each(function(){var r=e(this),o=r.data("bs.affix"),a="object"==(void 0===i?"undefined":t(i))&&i;o||r.data("bs.affix",o=new n(this,a)),"string"==typeof i&&o[i]()})}var n=function Affix(t,n){this.options=e.extend({},Affix.DEFAULTS,n),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.2",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,i){var r=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return r<n&&"top";if("bottom"==this.affixed)return null!=n?!(r+this.unpin<=o.top)&&"bottom":!(r+a<=e-i)&&"bottom";var s=null==this.affixed,l=s?r:o.top,c=s?a:t;return null!=n&&r<=n?"top":null!=i&&l+c>=e-i&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var i=this.$element.height(),r=this.options.offset,o=r.top,a=r.bottom,s=e("body").height();"object"!=(void 0===r?"undefined":t(r))&&(a=o=r),"function"==typeof o&&(o=r.top(this.$element)),"function"==typeof a&&(a=r.bottom(this.$element));var l=this.getState(s,i,o,a);if(this.affixed!=l){null!=this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),u=e.Event(c+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(c).trigger(c.replace("affix","affixed")+".bs.affix")}"bottom"==l&&this.$element.offset({top:s-i-a})}};var i=e.fn.affix;e.fn.affix=Plugin,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),Plugin.call(t,n)})})}(e)}).call(t,n(1))},,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a=n(1),s=n(2);return t=function(){var e,t=a(this),n=t.closest("form"),i=n.find('input[name="csrfmiddlewaretoken"]'),r=t.closest(".form-row"),o=t.next(".js-inputstatus"),s=n.attr("data-password-url"),l="&field_name="+t.attr("name");t.val()?(e=i.serialize()+"&"+t.serialize(),e+=l,a.post(s,e,function(e){e.valid?o.html("Looks good!"):o.html(e.msg),r.add(t).add(o).toggleClass("error",!e.valid).toggleClass("ok",e.valid)})):(r.add(t).add(o).removeClass("error ok"),o.empty())},i=function(){var e=a(this),t=e.closest(".form-row"),n=e.next(".js-inputstatus"),i=t.prev().find('input[type="password"]'),r=t.add(e).add(n);return e.val()?i.val()?i.hasClass("error")?(n.html("Please make sure your new password is valid first."),void r.addClass("error").removeClass("ok")):e.val().length<6?(n.empty(),void r.removeClass("error ok")):void(e.val()===i.val()?(n.html("We have a match!"),r.addClass("ok").removeClass("error")):(n.html("This must match your new password."),r.addClass("error").removeClass("ok"))):(n.html("Please enter a new password first."),void r.addClass("error").removeClass("ok")):(n.empty(),void r.removeClass("error ok"))},r=function(e,n){a(e).off("keyup",t),n&&a(n).off("keyup",i)},o=function(e,n){a(e).on("keyup",s.debounce(t,300)),n&&a(n).on("keyup",s.debounce(i,300))},{destroy:r,init:o}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=function(){return r.default.createElement("svg",{width:"18",height:"18",viewBox:"19 16 18 18",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M26.578 23.578H19v2.844h7.578V34h2.844v-7.578H37v-2.844h-7.578V16h-2.844v7.578z",fillRule:"evenodd"}))};t.default=o,e.exports=t.default},function(e,t,n){"use strict";var i,r;i=[n(1),n(2),n(5)],void 0!==(r=function(e,t){function addRecent(e,n){var r=n.split(":")[0],o=t.clone(e);return o=t.reject(o,function(e){return e.split(":")[0]===r}),o.unshift(n),o=o.slice(0,i)}var n="recently-viewed",i=10,r={};return r.clear=function(){e.cookie(n,"",{expires:31,path:"/"})},r.add=function(t){var i=addRecent(r.get(),t);e.cookie(n,JSON.stringify(i),{expires:31,path:"/"})},r.get=function(){var t=e.cookie(n)||"null";return JSON.parse(t)||[]},r}.apply(t,i))&&(e.exports=r)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a,s=n(1),l=n(2);return t=function(e,t){var n,i,r,l,c,u,d={id_email:{type:"email",url:"data-email-url"},id_promotion:{type:"promotion",url:"data-redeem-url"}},p=s(t?t:this),h=d[p.attr("id")],f=h.type,_=p.closest("form").attr(h.url),m=p.closest(".form-row"),g=p.next(".js-inputstatus");e.preventDefault(),p.val()?("promotion"===f?l=p.closest("form").find("#id_promotion, .subscribed_rate_plan"):p.closest("form").find("#id_promotion").val()&&(l=s.merge(p,p.closest("form").find("#id_promotion"))),c=s(".js-promotion-code"),c.val()==p.val()?(i=!1,r="This code has already been applied.",o(m,p,g,i,r,f)):(n=l||p,s.get(_,n.serialize().toLowerCase()).done(function(e){i=e.success,u="promotion"===f&&i,g.empty(),r=u?e.promotion_code+" has been applied.":e.message||e.responseJSON.message,o(m,p,g,i,r,f),a(p,f,i,e)}))):"promotion"===f?(i=!1,r="The code entered is not valid.",o(m,p,g,i,r,f)):g.text("")},a=function(e,t,n,i){"promotion"===t&&n&&s(".js-promotion-code").val(i.promotion_code).trigger("change",{currencyData:i.currency_costs,promotionCode:i.promotion_code,period:i.period,isSalePlan:i.is_sale})},o=function(e,t,n,i,r,o){var a,s;if(i?(a="error",s="ok"):(a="ok",s="error"),"email"===o&&i){e.find("."+a)&&(e.removeClass(a).addClass(s),e.find("input").removeClass(a).addClass(s),e.find("small").removeClass(a).addClass("js-inputstatus"))}else e.add(t).add(n).removeClass(a).addClass(s),n.html(r)},r=function(){var e=s(".js-user-password"),t=s(".js-user-email"),n=e.val()&&t.val();if(!e.hasClass("error")&&!t.hasClass("error")&&n){s(this).find(".buttongroup input[type='submit']").attr("value","Please wait...").attr("disabled","disabled")}},i=function(e){"#id_promotion"===e?s(".rate-plan-redeem-submit").on("click",function(n){t(n,e)}):s(e).on("keyup change",l.debounce(t,300)),s("#registration-form").on("submit",r)},{init:i}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(e){var t,n,i;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,i=this.S[t],this.S[t]=this.S[n],this.S[n]=i;this.i=0,this.j=0}function ARC4next(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}Object.defineProperty(t,"__esModule",{value:!0}),Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next,t.prng_newstate=prng_newstate},function(e,t,n){"use strict";var i;void 0!==(i=function(e){function captureRecentlyViewedBits(){u("input.js-recently-viewed-bits").val(JSON.stringify(f.get()))}function sendReferrerAnalytics(){var e=u("#id_referrer").val();if(""!==e){var t=["send","event","Referral","Selected",e];d.trigger("track",t),m.gtmTrackReferrer(e)}}function sendRegistrationAnalytics(){var e=u('input[name="promotion_code"]').val(),t=u("#id_trial_length").val();m.gtmTrackRegistration(e,t)}var t,i,r,o,a,s,l,c,u=n(1),d=n(4),p=n(125),h=n(128),f=n(127),_=n(14),m=n(6),g="COUNTRY_CHECKED_ON_REGISTER";return t=function(){u("#registration-form").data("ajaxRegistration")?u("#registration-form").submit(i):u("#registration-form").on("submit",function(e){return c(this)?(sendReferrerAnalytics(),sendRegistrationAnalytics(),!0):void e.preventDefault()}),u(".js-residing-country-select").on("change",function(){u("option:selected",this).data("eu-country")?(localStorage.setItem(g,u(this).val()),u(".membership-agreement").show()):u(".membership-agreement").hide()});try{var e=localStorage.getItem(g);e&&u(".js-residing-country-select option[value="+e+"]").prop("selected",!0).trigger("change")}catch(e){}p.init("#id_password1"),h.init("#id_email"),u("#id_basic").click(function(){u("#id_basic").addClass("selected"),u("#id_pro").removeClass("selected"),u('input[name="promotion_code"]').val("price24")}),u("#id_pro").click(function(){u("#id_basic").removeClass("selected"),u("#id_pro").addClass("selected"),u('input[name="promotion_code"]').val("")}),captureRecentlyViewedBits()},c=function(e,t){var n=u(e),i=n.find("#id_password1"),r=n.find("#id_email"),o=[i,r],a=!0;return o.forEach(function(e){e.val()||(e.addClass("error"),e.next("small").addClass("error").html("This field is required."))}),(i.hasClass("error")||r.hasClass("error"))&&(a=!1),a},i=function(e){e.preventDefault(),captureRecentlyViewedBits();var t=u("#registration-form").attr("action"),n=u("#registration-form").serialize();o(),a(),u.post(t,n).fail(function(e){n=JSON.parse(e.responseText),s(),r(n.errors)}).done(function(e){sendReferrerAnalytics(),sendRegistrationAnalytics(),_.trigger("registration:successful",e)})},a=function(){var e=u("#registration-form").find(".js-submit-registration span");l=e.text(),e.text("Just a second...").parent().addClass("loading"),u("#registration-form").find(":input").attr("disabled",!0)},s=function(){u("#registration-form").find(".js-submit-registration span").text(l).parent().removeClass("loading"),u("#registration-form").find(":input").attr("disabled",!1)},r=function(e){var t,n,i;for(i in e)e.hasOwnProperty(i)&&(t=u("#registration-form").find("[name="+i+"]").parent(),n=t.find("small"),n.length||(n=u("<small></small>").appendTo(t)),t.addClass("error"),n.html(e[i]).addClass("error"))},o=function(){u("#registration-form").find(".error").removeClass("error")},{init:t}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a=n(1),s=n(2),l=n(8),c=n(19),u=n(6),d=a(".js-is-falcon-search").length;return n(123),n(5),i=function(){var e,t=a("body"),n=t.find(".topbar, .topbar a"),i="nav-collapsed",o=l.IS_IPAD||l.IS_NEXUS_7||l.IS_ANDROID,s=t.parents("html").data("url"),c="/noresults/"===s||"/search/"===s;o?n.on("touchstart click",function(e){e.stopPropagation(),a(e.currentTarget).is("a")&&!t.hasClass(i)||(e.preventDefault(),t.toggleClass(i))}):(n.hover(function(){t.removeClass(i),void 0!==e&&clearTimeout(e)},function(){e=setTimeout(function(){t.addClass(i)}.bind(this),200)}),n.focus(function(){t.removeClass(i)}),n.focusout(function(){t.addClass(i)})),a(".trigger").on("click",function(e){var t=a(e.currentTarget),n=t.attr("data-dropdown-selector"),i="active",o=n?a(n):t.closest(".dropdown"),s=o.find("a.trigger"),l=a(".wrap-search-form");e.stopPropagation(),e.preventDefault(),l.length&&c&&d&&l.toggleClass("inactive"),o.toggleClass(i),o.hasClass(i)?(o.hasClass("searchbox")&&r(o),a(window).on("click",{el:o,closeBtn:s,active_class:i},u.bodyClick),a(".dropdown").not(o).removeClass(i)):a(window).off("click",u.bodyClick)}),c&&l.IS_MOBILE&&a(".search .trigger").trigger("click")},function(){var e=a(".ttip");e.bind("touchstart mouseenter",function(){a(this).tooltip(),l.IS_MOBILE&&setTimeout(function(){e.tooltip("destroy")},2e3)})},o=function(){var e=a(".icon-up"),t=a(document);c.loggedIn()&&!l.IS_IOS&&(t.on("scroll",s.debounce(function(){a(this).scrollTop()>200?e.fadeIn():e.fadeOut()},50)),e.click(function(e){e.preventDefault(),a("body,html").animate({scrollTop:0},"slow")}))},r=function(e){e.find("input[type=search]").focus()},t=function(){i(),o()},{init:t}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(1),i=n(10),r=n(4);n(133);var o=/^(\S+)\s*(.*)$/;r.View=r.View.extend({delegateEvents:function(e){var n,r,a,s,l,c,u,d,p,h;if(!e&&!(e=i.result(this,"events")))return this;this.undelegateEvents(),h=function(e,n,i,r){return function(){t(this).find(e).length>0&&r.apply(null,arguments)}}(s,0,0,n);for(p in e)if(e){if(n=e[p],i.isFunction(n)||(n=this[e[p]]),!n)continue;r=p.match(o),a=r[1],s=r[2],l=i.bind(n,this),a+=".delegateEvents"+this.cid,c=/(.*)\[(.*)\]/,u=a.match(c),d=null,u&&(a=u[1],d=u[2]),s?u?(h(s,a,d,n),t(document).bind(a,d,h)):this.$el.on(a,s,l):u?t(document).bind(a,d,l):this.$el.on(a,l)}return this}})}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";(function(e){!function(e){function keyHandler(t){if("string"==typeof t.data&&(t.data={keys:t.data}),t.data&&t.data.keys&&"string"==typeof t.data.keys){var n=t.handler,i=t.data.keys.toLowerCase().split(" "),r=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"];t.handler=function(t){if(this===t.target||!(/textarea|select/i.test(t.target.nodeName)||e.inArray(t.target.type,r)>-1)){var o=e.hotkeys.specialKeys[t.keyCode],a=String.fromCharCode(t.which).toLowerCase(),s="",l={};t.altKey&&"alt"!==o&&(s+="alt+"),t.ctrlKey&&"ctrl"!==o&&(s+="ctrl+"),t.metaKey&&!t.ctrlKey&&"meta"!==o&&(s+="meta+"),t.shiftKey&&"shift"!==o&&(s+="shift+"),o&&(l[s+o]=!0),a&&(l[s+a]=!0,l[s+e.hotkeys.shiftNums[a]]=!0,"shift+"===s&&(l[e.hotkeys.shiftNums[a]]=!0));for(var c=0,u=i.length;c<u;c++)if(l[i[c]])return n.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:keyHandler}})}(e)}).call(t,n(1))},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r=n(1);return t=function(){r(".skip").click(function(){var e="#"+this.href.split("#")[1];r(e).attr("tabindex",-1).on("blur focusout",function(){r(this).removeAttr("tabindex")}).focus()})},i=function(){t()},{init:i}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,r,o,a,s=n(131),l=_interopRequireDefault(s),c=n(122),u=_interopRequireDefault(c),d=n(136),p=_interopRequireDefault(d),h=n(118),f=_interopRequireDefault(h),_=n(134),m=_interopRequireDefault(_),g=n(137),v=_interopRequireDefault(g),y=n(1);n(20),n(138),n(18),n(5),i=function(){y("input, textarea").placeholder()},r=function(){y("#js-subscribe-nag").length&&new v.default},a=function(){f.default.attach(document.body),i(),p.default.init(),u.default.init(),r(),l.default.init(),m.default.init()},o={init:a},t.default=o,o.exports=t.default},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r=n(4),o=n(1),a=n(2),s=n(8),l=n(14),c=n(12),u=n(140);return n(132),n(5),t=r.View.extend({el:"html",template:u,events:{"click .js-shortcuts-info":"shortcutsInfo"},shortcuts:{closeModals:{key:"esc"},shortcutsInfo:{key:"Shift+/"}},shortcutsWithSelector:{focusSearch:{selector:"[type=search]",key:"/"},jumpToTop:{selector:".icon-up",key:"U"},toggleTOC:{selector:".toc-contents",key:"T"},selectNextCard:{selector:".js-heron",key:"J"},selectPrevCard:{selector:".js-heron",key:"K"},deleteSelectedCard:{selector:".js-rec-delete",key:"D"},goToBit:{selector:".js-heron",key:"Shift+return"},increaseFont:{selector:".js-font-control-panel",key:"F"},decreaseFont:{selector:".js-font-control-panel",key:"G"}},initialize:function(){this.key_events=[],this.cacheVariables(),this.render(),a.bindAll(this,"destroy")},destroy:function(){o(document).unbind("keyup"),this.unbind(),this.undelegateEvents()},createEvent:function(e,t){this.key_events["keyup["+e+"]"]=t},render:function(){var e=this;a.each(this.shortcutsWithSelector,function(t,n){o(t.selector).length&&e.createEvent(t.key,n)}),a.each(this.shortcuts,function(t,n){e.createEvent(t.key,n)}),this.delegateEvents(this.key_events)},cacheVariables:function(){this.isHeronApp=this.$el.find("body").hasClass("js-heron"),this.$jump_to_top=this.$el.find(".icon-up"),this.$cards=this.$el.find(".js-bitlist"),this.isHomePage=this.$el.find("body").hasClass("homepage"),this.isSearchPage=this.$cards.hasClass("js-search"),this.isTopicsPage=this.$cards.hasClass("js-explore"),this.$toc=this.$el.find(".js-toc"),this.$font_controls=this.$el.find("#font-controls"),this.$TOC=this.$el.find(".toc-contents"),this.$TOC_btn=this.$el.find(".sbo-toc-thumb")},selectNextCard:function(){this.selectCard("next")},selectPrevCard:function(){this.selectCard("prev")},selectCard:function(e){var t,n=o(".js-bitlist:first > li.js-card:first-child"),i=this.$cards.find(".selected-card.js-card"),r="prev"===e,a="next"===e,s=r&&i.is(":first-child"),l=a&&i.is(":nth-child(3)"),c=i.index()+1;this.$cards.length&&(i.length?this.isHomePage?s||l?s?(t=i.parents("section").prev().find("ul"),this.removeSelection(i),s?this.selectNewCard(t,3):this.selectNewCard(t,c)):l&&(t=i.parents("section").next().find("ul"),this.removeSelection(i),l?this.selectNewCard(t,1):this.selectNewCard(t,c)):(t=i.parents("ul"),this.removeSelection(i),a?this.selectNewCard(t,c+1):this.selectNewCard(t,c-1)):(this.removeSelection(i),a?this.selectNewCard(this.$cards,c+1):r&&this.selectNewCard(this.$cards,c-1)):n.attr("tabindex",-1).addClass("selected-card").trigger("focus"))},removeSelection:function(e){e.removeClass("selected-card").removeAttr("tabIndex")},selectNewCard:function(e,t){e.find("li.js-card:nth-child("+t+")").attr("tabIndex",-1).addClass("selected-card").trigger("focus")},deleteSelectedCard:function(){var e=o(".selected-card.js-card");e.length&&e.find(".js-rec-delete")[0].click()},goToBit:function(){var e=o(".selected-card.js-card");e.length&&e.find(".js-bit-title")[0].click()},jumpToTop:function(){this.$jump_to_top.click()},toggleTOC:function(){this.$TOC_btn[0].click(),this.$TOC.attr("tabIndex",-1).trigger("focus")},closeModals:function(){var e=this.$toc.hasClass("sbo-toc-open"),t=o(".annotator-editor-wrapper"),n=t.is(":visible"),i=t.find(".annotator-cancel"),r=t.find(".js-close"),a=t.find(".highlights").length,s=t.find(".delete-confirmation").length,l=o(".sbo-toc-thumb"),c=o(".selected-card"),u=o("#review-modal");this.$shortcutsPane=this.$shortcutsPane||!1,this.$shortcutsPane&&this.$shortcutsPane.is(":visible")&&this.$shortcutsPane.find(".js-close").click(),e&&l[0].click(),n&&(a||s?r[0].click():i[0].click()),o(".font-flyout").hasClass("open")&&o("#font-controls")[0].click(),o(".js-search-in-archive").hasClass("active")&&o(".js-search-in-archive").removeClass("active"),u.length&&o(".close-review-modal")[0].click(),c.length&&c.removeClass("selected-card").removeAttr("tabIndex")},shortcutsInfo:function(e){var t;e.preventDefault(),e.stopPropagation(),this.$el.find(".keyboard-shortcuts-pane").length||this.$el.append(this.template),this.$shortcutsPane=this.$el.find(".keyboard-shortcuts-pane"),t=this.$shortcutsPane.find(".js-close"),this.$shortcutsPane.is(":hidden")?this.$shortcutsPane.fadeIn("slow"):this.$shortcutsPane.fadeOut("slow"),t.on("click",function(){o(this).closest(".keyboard-shortcuts-pane").fadeOut("slow")})},adjustFontSize:function(e){var t,n=.2,i=1.5,r=1,o=.1,a=c.retrieveReaderPreferences(),s=a.font_size||r;t="larger"===e?Math.min(i,s+o):Math.max(n,s-o),c.storeReaderPreferences("font_size",t),l.trigger("font_size:change",t)},increaseFont:function(){this.adjustFontSize("larger")},decreaseFont:function(){this.adjustFontSize("smaller")},focusSearch:function(){this.$search||(this.$search=this.$el.find("[type=search]")),this.$search.focus()}}),i=function(){var e="disabled"===o("html").data("shortcuts-disabled");s.IS_MOBILE||e||new t},{init:i,View:t}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i=n(4),r=n(1),o=n(8),a=n(14),s=n(130),l="ss-navigateup",c="ss-navigatedown",u=".js-toggle-nag",d="collapsed",p="expanded",h=n(141);return n(5),t=i.View.extend({el:"#js-subscribe-nag",events:{"click .js-toggle-nag":"togglePanel"},initialize:function(){this.$el.parents("body").addClass("subscribe-panel"),this.cacheVariables(),a.on("registration:successful",this.successfulRegistrationHandler,this),this.render(),r("#registration-form").length&&s.init()},render:function(){var e=this;this.collapsePanel(),setTimeout(function(){e.$cards.length&&r("h2.header").show(),e.$el.addClass("slideUp")},500)},togglePanel:function(e){var t=this.$el.hasClass(d);e.preventDefault(),e.stopPropagation(),t?this.expandPanel():this.collapsePanel()},expandPanel:function(){this.$el.removeClass(d).find(u).removeClass(l).addClass(c),this.spaceForPanel(),this.isAbsolutePositionNag&&this.scrollToAbsoluteNag()},collapsePanel:function(){this.$el.addClass(d).removeClass(p).find(u).removeClass(c).addClass(l),this.spaceForPanel()},cacheVariables:function(){var e=this.$el.hasClass("js-anon-panel");this.$cards=this.$el.find(".trending-topics"),this.$pageFooter=r("footer.pagefoot"),this.isAbsolutePositionNag=o.IS_IPAD||o.IS_NEXUS_7||o.IS_MOBILE||o.IS_ANDROID||e},scrollToAbsoluteNag:function(){this.$el.addClass(p),r("html, body").animate({scrollTop:r(document).height()-this.$el.height()},200)},spaceForPanel:function(){var e=this;r(window).resize(function(){e.$pageFooter.css("padding-bottom",e.$el.height()+20)}).trigger("resize")},formatDate:function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()},promoteToRegistered:function(){var e=this,t=new Date,n=this.$el.data("trialLength");t.setDate(t.getDate()+n),r.get("/u").done(function(e){var t,n=r(e),i=[".js-site-nav",".js-footer-nav"];for(t=0;t<i.length;t+=1)r(i[t]).html(n.find(i[t]).html())}),r("body").removeClass("js-preview-content"),i.history.fragment=null,i.history.navigate(window.location.pathname,!0),e.$el.empty().html(h({date:e.formatDate(t)})),setTimeout(function(){e.$el.removeClass("slideUp")},25e3)},successfulRegistrationHandler:function(e){if(r(document).trigger("new-registration",{userId:e.userId}),e.onboardingLocation)return void(window.location.href=e.onboardingLocation);this.promoteToRegistered()}}),r(document).click(function(e){var t=r(e.target);!t.closest("#js-subscribe-nag").length||t.hasClass("registration-form__minimize")?r(".sample-message").hasClass("active")&&(r(".sample-message").removeClass("active"),r(".registration-form__minimize").removeClass("active"),r("body").removeClass("noscroll")):(r(".sample-message").addClass("active"),r(".registration-form__minimize").addClass("active"),r("body").addClass("noscroll"))}),t}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";(function(e){!function(e,t,n){function args(e){var t={},i=/^jQuery\d+$/;return n.each(e.attributes,function(e,n){n.specified&&!i.test(n.name)&&(t[n.name]=n.value)}),t}function clearPlaceholder(e,i){var r=this,o=n(r);if(r.value==o.attr("placeholder")&&o.hasClass("placeholder"))if(o.data("placeholder-password")){if(o=o.hide().next().show().attr("id",o.removeAttr("id").data("placeholder-id")),!0===e)return o[0].value=i;o.focus()}else r.value="",o.removeClass("placeholder"),r==t.activeElement&&r.select()}function setPlaceholder(){var e,t=this,i=n(t),r=this.id;if(""==t.value){if("password"==t.type){if(!i.data("placeholder-textinput")){try{e=i.clone().attr({type:"text"})}catch(t){e=n("<input>").attr(n.extend(args(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":r}).bind("focus.placeholder",clearPlaceholder),i.data({"placeholder-textinput":e,"placeholder-id":r}).before(e)}i=i.removeAttr("id").hide().prev().attr("id",r).show()}i.addClass("placeholder"),i[0].value=i.attr("placeholder")}else i.removeClass("placeholder")}var i,r,o="placeholder"in t.createElement("input"),a="placeholder"in t.createElement("textarea"),s=n.fn,l=n.valHooks;o&&a?(r=s.placeholder=function(){return this},r.input=r.textarea=!0):(r=s.placeholder=function(){var e=this;return e.filter((o?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":clearPlaceholder,"blur.placeholder":setPlaceholder}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},r.input=o,r.textarea=a,i={get:function(e){var t=n(e);return t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,i){var r=n(e);return r.data("placeholder-enabled")?(""==i?(e.value=i,e!=t.activeElement&&setPlaceholder.call(e)):r.hasClass("placeholder")?clearPlaceholder.call(e,!0,i)||(e.value=i):e.value=i,r):e.value=i}},o||(l.input=i),a||(l.textarea=i),n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(clearPlaceholder);setTimeout(function(){e.each(setPlaceholder)},10)})}),n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})}))}(void 0,document,e)}).call(t,n(1))},function(e,t,n){function webpackContext(e){return n(webpackContextResolve(e))}function webpackContextResolve(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var i={"./af":30,"./af.js":30,"./ar":34,"./ar-ma":31,"./ar-ma.js":31,"./ar-sa":32,"./ar-sa.js":32,"./ar-tn":33,"./ar-tn.js":33,"./ar.js":34,"./az":35,"./az.js":35,"./be":36,"./be.js":36,"./bg":37,"./bg.js":37,"./bn":38,"./bn.js":38,"./bo":39,"./bo.js":39,"./br":40,"./br.js":40,"./bs":41,"./bs.js":41,"./ca":42,"./ca.js":42,"./cs":43,"./cs.js":43,"./cv":44,"./cv.js":44,"./cy":45,"./cy.js":45,"./da":46,"./da.js":46,"./de":48,"./de-at":47,"./de-at.js":47,"./de.js":48,"./el":49,"./el.js":49,"./en-au":50,"./en-au.js":50,"./en-ca":51,"./en-ca.js":51,"./en-gb":52,"./en-gb.js":52,"./eo":53,"./eo.js":53,"./es":54,"./es.js":54,"./et":55,"./et.js":55,"./eu":56,"./eu.js":56,"./fa":57,"./fa.js":57,"./fi":58,"./fi.js":58,"./fo":59,"./fo.js":59,"./fr":61,"./fr-ca":60,"./fr-ca.js":60,"./fr.js":61,"./fy":62,"./fy.js":62,"./gl":63,"./gl.js":63,"./he":64,"./he.js":64,"./hi":65,"./hi.js":65,"./hr":66,"./hr.js":66,"./hu":67,"./hu.js":67,"./hy-am":68,"./hy-am.js":68,"./id":69,"./id.js":69,"./is":70,"./is.js":70,"./it":71,"./it.js":71,"./ja":72,"./ja.js":72,"./ka":73,"./ka.js":73,"./km":74,"./km.js":74,"./ko":75,"./ko.js":75,"./lb":76,"./lb.js":76,"./lt":77,"./lt.js":77,"./lv":78,"./lv.js":78,"./mk":79,"./mk.js":79,"./ml":80,"./ml.js":80,"./mr":81,"./mr.js":81,"./ms-my":82,"./ms-my.js":82,"./my":83,"./my.js":83,"./nb":84,"./nb.js":84,"./ne":85,"./ne.js":85,"./nl":86,"./nl.js":86,"./nn":87,"./nn.js":87,"./pl":88,"./pl.js":88,"./pt":90,"./pt-br":89,"./pt-br.js":89,"./pt.js":90,"./ro":91,"./ro.js":91,"./ru":92,"./ru.js":92,"./sk":93,"./sk.js":93,"./sl":94,"./sl.js":94,"./sq":95,"./sq.js":95,"./sr":97,"./sr-cyrl":96,"./sr-cyrl.js":96,"./sr.js":97,"./sv":98,"./sv.js":98,"./ta":99,"./ta.js":99,"./th":100,"./th.js":100,"./tl-ph":101,"./tl-ph.js":101,"./tr":102,"./tr.js":102,"./tzm":104,"./tzm-latn":103,"./tzm-latn.js":103,"./tzm.js":104,"./uk":105,"./uk.js":105,"./uz":106,"./uz.js":106,"./vi":107,"./vi.js":107,"./zh-cn":108,"./zh-cn.js":108,"./zh-tw":109,"./zh-tw.js":109};webpackContext.keys=function(){return Object.keys(i)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=139},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="keyboard-shortcuts-pane" style="display: none;">\n    <div class="inner popup">\n      <div class="headline">\n        <h2> Keyboard Shortcuts </h2>\n        <a class="js-close ss-delete" href="#close"><span>Close</span></a>\n     </div>\n\n     <div class="column left">\n       <table>\n        <tbody>\n          <tr> \n            <th></th>\n            <th> <h4> Reader </h4> </th>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">j</span> / <span class="key"></span></td>\n            <td> Next chapter </td>\n          </tr>\n           <tr>\n            <td class="keys"><span class="key">k</span> / <span class="key"></span></td>\n            <td> Previous chapter </td>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">q</span></td>\n            <td> Queue chapter </td>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">f</span></td>\n            <td> Increase font size </td>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">g</span></td>\n            <td> Decrease font size </td>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">t</span></td>\n            <td> Toggle the table of contents </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <div class="column right">\n      <table>\n        <tbody>\n          <tr> \n            <th></th>\n            <th> <h4> Site wide shortcuts </h4> </th>\n          </tr>\n          <tr>\n          <tr>\n            <td class="keys"><span class="key">u</span></td>\n            <td> Scroll up to top of page </td>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">esc</span></td>\n            <td> Close modal windows </td>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">?</span></td>\n            <td> Toggle this panel </td>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">/</span></td>\n            <td> Focus search (where present) </td>\n          </tr>\n      </tbody>\n     </table>\n    </div>\n\n    <div class="column left" style="clear:both;">\n      <table>\n        <tbody>\n          <tr> \n            <th></th>\n            <th> <h4> Cards </h4> </th>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">j</span></td>\n            <td> Select next card </td>\n          </tr>\n           <tr>\n            <td class="keys"><span class="key">k</span></td>\n            <td> Select previous card </td>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">tab</span></td>\n            <td> Focus next element inside card </td>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">esc</span></td>\n            <td> Remove selection from card </td>\n          </tr>\n      </tbody>\n     </table>\n    </div>\n    <div class="column right">\n      <table>\n        <tbody>\n          <tr> \n            <th></th>\n            <th> <h4> Selected Cards </h4> </th>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">q</span></td>\n            <td> Queue card </td>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">d</span></td>\n            <td> Remove recommended card </td>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">Shift enter</span></td>\n            <td> Go to chapter </td>\n          </tr>\n      </tbody>\n     </table>\n    </div>\n    <div class="column left" style="clear:both;">\n      <table>\n        <tbody>\n          <tr> \n            <th></th>\n            <th> <h4> Video </h4> </th>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key"></span></td>\n            <td> Skip forward 5s </td>\n          </tr>\n           <tr>\n            <td class="keys"><span class="key"></span></td>\n            <td> Skip backward 5s </td>\n          </tr>\n           <tr>\n            <td class="keys"><span class="key">1-9</span></td>\n            <td> Skip to a percentage </td>\n          </tr>\n          <tr>\n            <td class="keys"><span class="key">Spacebar</span></td>\n            <td> Pause or play </td>\n          </tr>\n      </tbody>\n     </table>\n    </div>\n    <div class="column right">\n      <table>\n        <tbody>\n      </tbody>\n     </table>\n    </div>\n    <p class="disable-shortcuts">Shortcuts may be disabled from the <a href="/u/shortcuts/" title="Link to settings page">settings page</a>.</p>\n  </div>\n</div>\n\n';return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<p class="welcome"><strong>Welcome to Safari</strong>. Remember, your free trial will end on '+(null==(__t=date)?"":__t)+', but you can <a href="/subscribe/">subscribe at any time</a></p>\n';return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HIDE_BANNER_STORE_KEY="hide-training-course-banner",t.REGISTRATION_ENDPOINT=window.location.origin+"/live-training/courses",t.STATUS_ENDPOINT=window.location.origin+"/api/v1/live-training/course-statuses/",t.LIVE_TRAINING_URL=window.location.origin+"/live-training/",t.BANNER_ENDPOINT=window.location.origin+"/api/v1/live-training/current-event/"},,function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(4),o=_interopRequireDefault(r),a=n(2),s=_interopRequireDefault(a),l=n(1),c=_interopRequireDefault(l),u=n(150),d=_interopRequireDefault(u),p=n(0),h=_interopRequireDefault(p),f=n(142),_=_interopRequireWildcard(f),m=n(6),g=_interopRequireDefault(m),v=o.default.View,y=o.default.Model,b=function(e){function BannerModel(){return _classCallCheck(this,BannerModel),_possibleConstructorReturn(this,(BannerModel.__proto__||Object.getPrototypeOf(BannerModel)).apply(this,arguments))}return _inherits(BannerModel,e),BannerModel}(y),T=function(e){function BannerView(e){_classCallCheck(this,BannerView),s.default.defaults(e,{events:{"click .js-close-banner":"closeBanner","click .js-streaming-now":"onGoToLiveStreamClick","click .js-go-to-course":"onGoToCourseClick"}});var t=_possibleConstructorReturn(this,(BannerView.__proto__||Object.getPrototypeOf(BannerView)).call(this,e));return e.origin&&(t.origin=e.origin),t.initialize=t.initialize.bind(t),t.closeBanner=t.closeBanner.bind(t),t.pollStatus=t.pollStatus.bind(t),t.fetchStatus=t.fetchStatus.bind(t),t.isCourseStreamingNow=t.isCourseStreamingNow.bind(t),t.shouldShowBanner=t.shouldShowBanner.bind(t),t.destroy=t.destroy.bind(t),t.model=new b,t}return _inherits(BannerView,e),i(BannerView,[{key:"initialize",value:function(){"Expired"!==(0,c.default)("html").attr("data-account-type")&&this.fetchStatus()}},{key:"onGoToLiveStreamClick",value:function(){g.default.sendAnalyticsEvent(["send","event","OT_"+this.model.get("slug"),"go_to_course_after_start","notification_widget"])}},{key:"onGoToCourseClick",value:function(){g.default.sendAnalyticsEvent(["send","event","OT_"+this.model.get("slug"),"go_to_course_before_start","notification_widget"])}},{key:"shouldShowBanner",value:function(e){try{if(JSON.parse(localStorage.getItem(_.HIDE_BANNER_STORE_KEY)).id===this.getImminentEvent(e).eventId)return!1}catch(e){}return!0}},{key:"closeBanner",value:function(e){e.preventDefault(),this.$el.find(".js-banner-region").remove(),g.default.sendAnalyticsEvent(["send","event","OT_"+this.model.get("slug"),"dismiss","notification_widget"]),localStorage.setItem(_.HIDE_BANNER_STORE_KEY,JSON.stringify({id:this.model.get("imminentEventId")}))}},{key:"destroy",value:function(){this.$el.off()}},{key:"isCourseStreamingNow",value:function(e){var t=e;return s.default.isArray(e.events)&&s.default.each(e.events,function(n){var i=h.default.utc(n.start_datetime).local().format("LLL"),r=h.default.utc(n.end_datetime).local().format("LLL"),o=new Date(i).getTime(),a=new Date(r).getTime(),s=(new Date).getTime();o<=s&&a>=s&&Object.assign(t,e,{statusMsg:"Online Training in Progress",isStreamingNow:!0,btnText:"Join now",shouldDisplayTime:!1})}),this.model.set(t),t}},{key:"getImminentEvent",value:function(e){var t=(new Date).getTime(),n="",i="";return s.default.each(e.events,function(e){var r=h.default.utc(e.start_datetime).local().format("LLL"),o=new Date(r).getTime();if(t<=o)return n=r,i=e.event_id,!1;i=e.event_id}),{startDate:n,eventId:i}}},{key:"fetchStatus",value:function(){var e=this;c.default.get(_.BANNER_ENDPOINT,function(t){if(t&&!s.default.isEmpty(t)){var n={};Object.assign(n,t,{friendlyStartTime:e.getImminentEvent(t).startDate,imminentEventId:e.getImminentEvent(t).eventId,mktImage:t.marketing_image2||"",avatar:t.events[0].presenters[0].headshot_url1,courseUrl:_.REGISTRATION_ENDPOINT+"/"+t.slug+"/"+t.course_id+"/",statusMsg:"Online training starting soon",btnText:"Go to course",isStreamingNow:!1,shouldDisplayTime:!0});var i=e.isCourseStreamingNow(n);e.shouldShowBanner(t)&&((0,c.default)("body").append((0,d.default)(i)),e.delegateEvents())}else e.origin&&"reader"===e.origin&&e.pollStatus()})}},{key:"pollStatus",value:function(){var e=this;setTimeout(function(){e.fetchStatus()},72e4)}}]),BannerView}(v);t.default=T,e.exports=t.default},,,,,,function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="course-nag js-banner-region">\n  <a href="#" class="close js-close-banner">close X</a>\n  <figure class="background"><img src="'+(null==(__t=mktImage)?"":__t)+'"></figure>\n    ',avatar&&(__p+='\n      <figure class="avatar">\n        <img src="'+(null==(__t=avatar)?"":__t)+'" />\n      </figure>\n    '),__p+='\n  <div class="message">'+(null==(__t=statusMsg)?"":__t)+"</div>\n  ",shouldDisplayTime&&(__p+='\n    <div class="time">'+(null==(__t=friendlyStartTime)?"":__t)+"</div>\n  "),__p+='\n  <a href="'+(null==(__t=courseUrl)?"":__t)+'" class="button ',isStreamingNow?__p+=" is-streaming-now js-streaming-now":__p+=" js-go-to-course",__p+='">'+(null==(__t=btnText)?"":__t)+"</a>\n</div>\n";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},,,,,,function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PureAppContainer=t.mapStateToProps=void 0;var i=n(3),r=_interopRequireDefault(i),o=n(111),a=n(9),s=_interopRequireWildcard(a),l=n(27),c=_interopRequireWildcard(l),u=n(169),d=_interopRequireDefault(u),p=n(202),h=_interopRequireDefault(p),f=n(209),_=_interopRequireDefault(f),m=function(e){var t=e.collections,n=e.children,i=e.errors,o=e.selectedCollection,a=e.toolbarButtons;return r.default.createElement("div",{className:"layout-sidebar"},r.default.createElement(_.default,{buttons:a}),r.default.createElement(h.default,{collections:t,selectedCollection:o}),r.default.createElement("div",{className:"sb-content"},i.didError&&r.default.createElement(d.default,{errors:i}),n))};m.propTypes={children:s.node,collections:s.collectionList.isRequired,errors:s.errorsObject,selectedCollection:s.collection,toolbarButtons:s.arrayOf(s.node)};var g=t.mapStateToProps=function(e){return{collections:c.getCollections(e),errors:c.getErrors(e),selectedCollection:c.getSelectedCollection(e)}};t.default=(0,o.connect)(g)(m),t.PureAppContainer=m},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=n(9),a=_interopRequireWildcard(o),s=n(15),l=_interopRequireWildcard(s),c=n(228),u=_interopRequireDefault(c),d=n(186),p=_interopRequireDefault(d),h=function(e){var t=e.collection,n=!t||t.is_default,i=t?l.buildEditCollectionRoute(t):"";return r.default.createElement(p.default,{url:i,text:"Edit",icon:r.default.createElement(u.default,null),isDisabled:n})};h.propTypes={collection:a.collection},t.default=h,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=n(13),a=_interopRequireWildcard(o),s=n(126),l=_interopRequireDefault(s),c=n(186),u=_interopRequireDefault(c),d=n(22),p=function(e){var t=e.isDisabled;return r.default.createElement(u.default,{url:a.NEW_COLLECTION_ROUTE,text:"New",icon:r.default.createElement(l.default,null),isDisabled:t,onClick:d.trackNewButtonClick})};p.propTypes={isDisabled:i.PropTypes.bool.isRequired},t.default=p,e.exports=t.default},,,,,,function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=function(){return r.default.createElement("div",{className:"fetching-spinner"},r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 27 27"},r.default.createElement("path",{d:"M18.696,10.5c-0.275-0.479-0.113-1.09,0.365-1.367l4.759-2.751c0.482-0.273,1.095-0.11,1.37,0.368 c0.276,0.479,0.115,1.092-0.364,1.364l-4.764,2.751C19.583,11.141,18.973,10.977,18.696,10.5z"}),r.default.createElement("path",{d:"M16.133,6.938l2.75-4.765c0.276-0.478,0.889-0.643,1.367-0.366c0.479,0.276,0.641,0.886,0.365,1.366l-2.748,4.762 C17.591,8.415,16.979,8.58,16.5,8.303C16.021,8.027,15.856,7.414,16.133,6.938z"}),r.default.createElement("path",{d:"M13.499,7.5c-0.552,0-1-0.448-1-1.001V1c0-0.554,0.448-1,1-1c0.554,0,1.003,0.447,1.003,1v5.499 C14.5,7.053,14.053,7.5,13.499,7.5z"}),r.default.createElement("path",{d:"M8.303,10.5c-0.277,0.477-0.888,0.641-1.365,0.365L2.175,8.114C1.697,7.842,1.532,7.229,1.808,6.75 c0.277-0.479,0.89-0.642,1.367-0.368l4.762,2.751C8.416,9.41,8.58,10.021,8.303,10.5z"}),r.default.createElement("path",{d:"M9.133,7.937l-2.75-4.763c-0.276-0.48-0.111-1.09,0.365-1.366c0.479-0.277,1.09-0.114,1.367,0.366l2.75,4.765 c0.274,0.476,0.112,1.088-0.367,1.364C10.021,8.581,9.409,8.415,9.133,7.937z"}),r.default.createElement("path",{d:"M6.499,14.5H1c-0.554,0-1-0.448-1-1c0-0.554,0.447-1.001,1-1.001h5.499c0.552,0,1.001,0.448,1.001,1.001 C7.5,14.052,7.052,14.5,6.499,14.5z"}),r.default.createElement("path",{d:"M8.303,16.502c0.277,0.478,0.113,1.088-0.365,1.366l-4.762,2.749c-0.478,0.273-1.091,0.112-1.368-0.366 c-0.276-0.479-0.111-1.089,0.367-1.368l4.762-2.748C7.415,15.856,8.026,16.021,8.303,16.502z"}),r.default.createElement("path",{d:"M10.866,20.062l-2.75,4.767c-0.277,0.475-0.89,0.639-1.367,0.362c-0.477-0.277-0.642-0.886-0.365-1.365l2.75-4.764 c0.277-0.477,0.888-0.638,1.366-0.365C10.978,18.974,11.141,19.585,10.866,20.062z"}),r.default.createElement("path",{d:"M13.499,19.502c0.554,0,1.003,0.448,1.003,1.002v5.498c0,0.55-0.448,0.999-1.003,0.999c-0.552,0-1-0.447-1-0.999v-5.498 C12.499,19.95,12.946,19.502,13.499,19.502z"}),r.default.createElement("path",{d:"M17.867,19.062l2.748,4.764c0.275,0.479,0.113,1.088-0.365,1.365c-0.479,0.276-1.091,0.112-1.367-0.362l-2.75-4.767 c-0.276-0.477-0.111-1.088,0.367-1.365C16.979,18.424,17.591,18.585,17.867,19.062z"}),r.default.createElement("path",{d:"M18.696,16.502c0.276-0.48,0.887-0.646,1.365-0.367l4.765,2.748c0.479,0.279,0.64,0.889,0.364,1.368 c-0.275,0.479-0.888,0.64-1.37,0.366l-4.759-2.749C18.583,17.59,18.421,16.979,18.696,16.502z"}),r.default.createElement("path",{d:"M25.998,12.499h-5.501c-0.552,0-1.001,0.448-1.001,1.001c0,0.552,0.447,1,1.001,1h5.501c0.554,0,1.002-0.448,1.002-1 C27,12.946,26.552,12.499,25.998,12.499z"})))};t.default=o,e.exports=t.default},,,,,function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=n(0),a=_interopRequireDefault(o),s=n(9),l=_interopRequireWildcard(s),c=5,u=function(e){var t=e.errors;return!((0,a.default)(Date.now()).diff((0,a.default)(t.timestamp),"seconds")>c)&&r.default.createElement("div",{className:"error-message t-error-message"},r.default.createElement("p",null,"Oops! ",t.message))};u.propTypes={errors:l.errorsObject.isRequired},t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ADD_CONTENT_SUCCESS="ADD_CONTENT_SUCCESS",t.AJAX_REQUEST="AJAX_REQUEST",t.AJAX_REQUEST_DID_ERROR="AJAX_REQUEST_DID_ERROR",t.CREATE_COLLECTION_SUCCESS="CREATE_COLLECTION_SUCCESS",t.DELETE_COLLECTION_SUCCESS="DELETE_COLLECTION_SUCCESS",t.GET_COLLECTIONS_SUCCESS="GET_COLLECTIONS_SUCCESS",t.CONTENT_URI_METADATA_REQUEST="CONTENT_URI_METADATA_REQUEST",t.GET_CONTENT_METADATA_SUCCESS="GET_CONTENT_METADATA_SUCCESS",t.GET_USER_PROGRESS_SUCCESS="GET_USER_PROGRESS_SUCCESS",t.REMOVE_COLLECTION="REMOVE_COLLECTION",t.REMOVE_CONTENT_SUCCESS="REMOVE_CONTENT_SUCCESS",t.UPDATE_COLLECTION_SUCCESS="UPDATE_COLLECTION_SUCCESS"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DISABLE_ANIMATE_COLLECTION_CONTENT="DISABLE_ANIMATE_COLLECTION_CONTENT",t.ENABLE_ANIMATE_COLLECTION_CONTENT="ENABLE_ANIMATE_COLLECTION_CONTENT",t.NEXT_PAGE="NEXT_PAGE",t.SELECT_COLLECTION="SELECT_COLLECTION",t.SELECT_TOPIC="SELECT_TOPIC",t.SET_PAGE_SIZE="SET_PAGE_SIZE"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.API_REQUEST_DID_ERROR="API_REQUEST_DID_ERROR",t.API_REQUEST_RESET_ERROR="API_REQUEST_RESET_ERROR",t.FLASH_ERROR="FLASH_ERROR"},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=function(){return r.default.createElement("svg",{className:"icon-add-to-playlist-sml",viewBox:"0 0 16 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{fillRule:"nonzero",fill:"#000000"},r.default.createElement("g",{transform:"translate(-1.000000, 0.000000)"},r.default.createElement("rect",{x:"5",y:"0",width:"12",height:"2"}),r.default.createElement("title",null,"Playlists"),r.default.createElement("path",{d:"M4.5,14 C6.43299662,14 8,12.4329966 8,10.5 C8,8.56700338 6.43299662,7 4.5,7 C2.56700338,7 1,8.56700338 1,10.5 C1,12.4329966 2.56700338,14 4.5,14 Z M2.5,10 L4,10 L4,8.5 L5,8.5 L5,10 L6.5,10 L6.5,11 L5,11 L5,12.5 L4,12.5 L4,11 L2.5,11 L2.5,10 Z"}),r.default.createElement("circle",{cx:"2",cy:"5",r:"1"}),r.default.createElement("circle",{cx:"1.94117647",cy:"1",r:"1"}),r.default.createElement("rect",{x:"5",y:"4",width:"12",height:"2"}),r.default.createElement("rect",{x:"9",y:"8",width:"8",height:"2"}),r.default.createElement("rect",{x:"9",y:"12",width:"8",height:"2"})))))};t.default=o,e.exports=t.default},,,function(e,t,n){"use strict";function BigInteger(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}function am1(e,t,n,i,r,o){for(;--o>=0;){var a=t*this[e++]+n[i]+r;r=Math.floor(a/67108864),n[i++]=67108863&a}return r}function am2(e,t,n,i,r,o){for(var a=32767&t,s=t>>15;--o>=0;){var l=32767&this[e],c=this[e++]>>15,u=s*l+c*a;l=a*l+((32767&u)<<15)+n[i]+(1073741823&r),r=(l>>>30)+(u>>>15)+s*c+(r>>>30),n[i++]=1073741823&l}return r}function am3(e,t,n,i,r,o){for(var a=16383&t,s=t>>14;--o>=0;){var l=16383&this[e],c=this[e++]>>14,u=s*l+c*a;l=a*l+((16383&u)<<14)+n[i]+r,r=(l>>28)+(u>>14)+s*c,n[i++]=268435455&l}return r}function int2char(e){return c.charAt(e)}function intAt(e,t){var n=u[e.charCodeAt(t)];return null==n?-1:n}function bnpCopyTo(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}function bnpFromString(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var i=e.length,r=!1,o=0;--i>=0;){var a=8==n?255&e[i]:intAt(e,i);a<0?"-"==e.charAt(i)&&(r=!0):(r=!1,0==o?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),r&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,i=(1<<t)-1,r=!1,o="",a=this.t,s=this.DB-a*this.DB%t;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(r=!0,o=int2char(n));a>=0;)s<t?(n=(this[a]&(1<<s)-1)<<t-s,n|=this[--a]>>(s+=this.DB-t)):(n=this[a]>>(s-=t)&i,s<=0&&(s+=this.DB,--a)),n>0&&(r=!0),r&&(o+=int2char(n));return r?o:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function nbits(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo(e,t){var n,i=e%this.DB,r=this.DB-i,o=(1<<r)-1,a=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>r|s,s=(this[n]&o)<<i;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function bnpRShiftTo(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return void(t.t=0);var i=e%this.DB,r=this.DB-i,o=(1<<i)-1;t[0]=this[n]>>i;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&o)<<r,t[a-n]=this[a]>>i;i>0&&(t[this.t-n-1]|=(this.s&o)<<r),t.t=this.t-n,t.clamp()}function bnpSubTo(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()}function bnpMultiplyTo(e,t){var n=this.abs(),i=e.abs(),r=n.t;for(t.t=r+i.t;--r>=0;)t[r]=0;for(r=0;r<i.t;++r)t[r+n.t]=n.am(0,i[r],t,r,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)}function bnpSquareTo(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,t,n){var i=e.abs();if(!(i.t<=0)){var r=this.abs();if(r.t<i.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=nbi());var o=nbi(),a=this.s,s=e.s,l=this.DB-nbits(i[i.t-1]);l>0?(i.lShiftTo(l,o),r.lShiftTo(l,n)):(i.copyTo(o),r.copyTo(n));var c=o.t,u=o[c-1];if(0!=u){var d=u*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),p=this.FV/d,h=(1<<this.F1)/d,f=1<<this.F2,_=n.t,m=_-c,g=null==t?nbi():t;for(o.dlShiftTo(m,g),n.compareTo(g)>=0&&(n[n.t++]=1,n.subTo(g,n)),BigInteger.ONE.dlShiftTo(c,g),g.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--m>=0;){var v=n[--_]==u?this.DM:Math.floor(n[_]*p+(n[_-1]+f)*h);if((n[_]+=o.am(0,v,n,m,0,c))<v)for(o.dlShiftTo(m,g),n.subTo(g,n);n[_]<--v;)n.subTo(g,n)}null!=t&&(n.drShiftTo(c,t),a!=s&&BigInteger.ZERO.subTo(t,t)),n.t=c,n.clamp(),l>0&&n.rShiftTo(l,n),a<0&&BigInteger.ZERO.subTo(n,n)}}}function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(BigInteger.ZERO)>0&&e.subTo(t,t),t}function Classic(e){this.m=e}function cConvert(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function cSqrTo(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(BigInteger.ZERO)>0&&this.m.subTo(t,t),t}function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t}function montReduce(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function montSqrTo(e,t){e.squareTo(t),this.reduce(t)}function montMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(e,t){if(e>4294967295||e<1)return BigInteger.ONE;var n=nbi(),i=nbi(),r=t.convert(this),o=nbits(e)-1;for(r.copyTo(n);--o>=0;)if(t.sqrTo(n,i),(e&1<<o)>0)t.mulTo(i,r,n);else{var a=n;n=i,i=a}return t.revert(n)}function bnModPowInt(e,t){var n;return n=e<256||t.isEven()?new Classic(t):new Montgomery(t),this.exp(e,n)}Object.defineProperty(t,"__esModule",{value:!0});var i,r=0xdeadbeefcafe,o=15715070==(16777215&r);o&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,i=30):o&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,i=26):(BigInteger.prototype.am=am3,i=28),BigInteger.prototype.DB=i,BigInteger.prototype.DM=(1<<i)-1,BigInteger.prototype.DV=1<<i;var a=52;BigInteger.prototype.FV=Math.pow(2,a),BigInteger.prototype.F1=a-i,BigInteger.prototype.F2=2*i-a;var s,l,c="0123456789abcdefghijklmnopqrstuvwxyz",u=new Array;for(s="0".charCodeAt(0),l=0;l<=9;++l)u[s++]=l;for(s="a".charCodeAt(0),l=10;l<36;++l)u[s++]=l;for(s="A".charCodeAt(0),l=10;l<36;++l)u[s++]=l;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),t.default=BigInteger,e.exports=t.default},function(e,t,n){"use strict";function rng_get_byte(){if(null==i){for(console.log(a.prng_newstate),i=(0,a.prng_newstate)();o<s;){var e=Math.floor(65536*Math.random());r[o++]=255&e}for(i.init(r),o=0;o<r.length;++o)r[o]=0;o=0}return i.next()}function rng_get_bytes(e){var t;for(t=0;t<e.length;++t)e[t]=rng_get_byte()}function SecureRandom(){}Object.defineProperty(t,"__esModule",{value:!0});var i,r,o,a=n(129),s=256;if(null==r){r=new Array,o=0;var l;if(window.crypto&&window.crypto.getRandomValues){var c=new Uint32Array(256);for(window.crypto.getRandomValues(c),l=0;l<c.length;++l)r[o++]=255&c[l]}var u=function onMouseMoveListener(e){if(this.count=this.count||0,this.count>=256||o>=s)return void(window.removeEventListener?window.removeEventListener("mousemove",onMouseMoveListener,!1):window.detachEvent&&window.detachEvent("onmousemove",onMouseMoveListener));this.count+=1;var t=e.x+e.y;r[o++]=255&t};window.addEventListener?window.addEventListener("mousemove",u,!1):window.attachEvent&&window.attachEvent("onmousemove",u)}SecureRandom.prototype.nextBytes=rng_get_bytes,t.default=SecureRandom,e.exports=t.default},,,,function(e,t,n){(function(t){!function(t,n){e.exports=n()}(0,function(){return function(e){function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){u(e,t,n[t])})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"NO_DATA_LAYER_WARNING",function(){return i}),n.d(t,"NO_APPCUES_WARNING",function(){return a}),n.d(t,"UNAUTH_USER",function(){return s}),n.d(t,"track",function(){return l}),n.d(t,"updateContext",function(){return c}),n.d(t,"appcuesTrack",function(){return d}),n.d(t,"appcuesIdentifyUser",function(){return p});var i="WARNING: track was called but there is no dataLayer present. Please ensure GTM is enabled in your project.",a="WARNING: appcuesTrack was called but Appcues isnt defined on the window. Please ensure Appcues is enabled in your project.",s="The user isnt authed and we wont trigger appcuess.",l=function(e){"undefined"!=typeof dataLayer?dataLayer.push(o({},{event:"eventTracker",eventVal:0,nonInteraction:0},e)):console.warn(i)},c=function(e){"undefined"!=typeof dataLayer?dataLayer.push(o({},e)):console.warn(i)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"undefined"!=typeof window&&window.Appcues?window.Appcues.track(e,o({},t)):console.warn(a)},p=function(e){if("undefined"==typeof window||"object"!==r(e)||e.error||"B2B"==e.user_type||"B2B Pilot"==e.user_type)console.info(s);else{var t="",n="no";t="Paid"==e.user_type?"Active":"Trial"===e.user_type?"Active Trial":e.user_type,!0===e.is_staff&&(n="yes");var i={firstName:e.first_name,segment:e.user_type,accountStatus:t,admin:n,profileCreatedOn:e.profile_created_date};!function(e,t){"undefined"!=typeof window&&window.Appcues?window.Appcues.identify(e,t):console.warn(a)}(e.user_identifier,i)}}}])})}).call(t,n(29))},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PureMenuDropdown=t.mapStateToProps=void 0;var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(1),o=_interopRequireDefault(r),a=n(3),s=_interopRequireDefault(a),l=n(111),c=n(9),u=_interopRequireWildcard(c),d=n(15),p=_interopRequireWildcard(d),h=n(27),f=_interopRequireWildcard(h),_=n(173),m=_interopRequireDefault(_),g=n(224),v=_interopRequireDefault(g),y=n(204),b=_interopRequireDefault(y),T=n(22),w="active",C=function(e){function MenuDropdown(e){_classCallCheck(this,MenuDropdown);var t=_possibleConstructorReturn(this,(MenuDropdown.__proto__||Object.getPrototypeOf(MenuDropdown)).call(this,e));return t.activateTitleCard=t.activateTitleCard.bind(t),t.deactivateActiveTitleCards=t.deactivateActiveTitleCards.bind(t),t.doesExistInQueue=t.doesExistInQueue.bind(t),t.doesExistInAnyCollection=t.doesExistInAnyCollection.bind(t),t.onBodyClick=t.onBodyClick.bind(t),t.onPlaylistClick=t.onPlaylistClick.bind(t),t.onCollectionsMouseEnter=t.onCollectionsMouseEnter.bind(t),t.onCollectionsMouseLeave=t.onCollectionsMouseLeave.bind(t),t.onMenuMouseEnter=t.onMenuMouseEnter.bind(t),t.onMenuMouseLeave=t.onMenuMouseLeave.bind(t),t.state={hidden:!0,isUpdatingQueue:!1,didErrorOnQueue:!1,tooltip:{show:!1,label:"",className:""}},t}return _inherits(MenuDropdown,e),i(MenuDropdown,[{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.onBodyClick,!1)}},{key:"activateTitleCard",value:function(e){document.body.addEventListener("click",this.onBodyClick,!1),(0,o.default)(e.target).closest(".title-card,.js-card").addClass(w)}},{key:"deactivateActiveTitleCards",value:function(){(0,o.default)(".title-card."+w+",.js-card."+w).removeClass(w)}},{key:"onPlaylistClick",value:function(e){e.preventDefault(),(0,T.trackPlaylistIconClick)((0,o.default)(e.target)),this.state.hidden&&(this.setState({hidden:!1,tooltip:{show:!1,label:"",className:""}}),this.activateTitleCard(e))}},{key:"doesExistInAnyCollection",value:function(){var e=this.props,t=e.collections,n=e.contentUri,i=e.didFatallyError;return!e.isFetching&&!i&&p.anyCollectionHasContent(t,n)}},{key:"doesExistInQueue",value:function(){var e=this.props,t=e.contentUri,n=e.defaultCollection,i=e.didFatallyError;return!e.isFetching&&!i&&p.collectionHasContent(n,t)}},{key:"onMenuMouseEnter",value:function(e){e.preventDefault(),this.props.didFatallyError&&this.setState({tooltip:{show:!0,label:"Unavailable",className:"error-tooltip"}})}},{key:"onMenuMouseLeave",value:function(e){e.preventDefault(),this.setState({tooltip:{show:!1,label:"",className:""}})}},{key:"onCollectionsMouseEnter",value:function(e){e.preventDefault();var t=this.props.didFatallyError,n=void 0;n=this.doesExistInAnyCollection()?"Added to Playlist":"Add to Playlist",t||this.state.hidden&&this.setState({tooltip:{show:!0,label:n,className:"collections-tooltip"}})}},{key:"onCollectionsMouseLeave",value:function(e){e.preventDefault(),this.props.didFatallyError||this.setState({tooltip:{show:!1,label:"",className:""}})}},{key:"onBodyClick",value:function(e){(0,o.default)(e.target).closest(".menu-control").length&&(0,o.default)(e.target).closest(".menu-dropdown-wrapper").find(".menu-dropdown-region").length&&(e.preventDefault(),e.stopPropagation()),(0,o.default)(e.target).closest(".menu-dropdown-region .dropdown-item").length||(0,o.default)(e.target).closest(".modal-wrapper").length||(this.deactivateActiveTitleCards(),this.setState({hidden:!0,tooltip:{show:!1,label:"",className:""}}),document.body.removeEventListener("click",this.onBodyClick,!1))}},{key:"playlistsButton",value:function(e,t,n){var i=this.props.didFatallyError,r=i?"control-disabled":"";return s.default.createElement("div",{className:"menu-control",onMouseEnter:this.onMenuMouseEnter,onMouseLeave:this.onMenuMouseLeave},s.default.createElement("div",{className:"control "+r},s.default.createElement("div",{className:"js-playlists-menu"},s.default.createElement("button",{className:"js-playlist-icon",disabled:i,onClick:this.onPlaylistClick,onMouseEnter:this.onCollectionsMouseEnter,onMouseLeave:this.onCollectionsMouseLeave},!t&&this.getPlaylistsButton(),t&&s.default.createElement("img",{className:"is-fetching-gif",src:"/static/images/ajax-transp.gif",alt:"presentation"}),this.state.tooltip.show&&s.default.createElement("div",{className:"tooltip top-"+n+" "+this.state.tooltip.className+" playlist-tooltip"},s.default.createElement("div",{className:"tooltip-arrow"}),s.default.createElement("div",{className:"tooltip-inner"},this.state.tooltip.label)),s.default.createElement("div",{className:"js-playlist-addto-label"},"AddTo")))))}},{key:"getPlaylistsButton",value:function(){return this.doesExistInAnyCollection()?s.default.createElement(v.default,null):s.default.createElement(m.default,null)}},{key:"render",value:function(){var e=this.props,t=e.align,n=e.collections,i=e.contentUri,r=e.isFetching,o=this.state&&this.state.hidden;return s.default.createElement("div",{className:"menu-dropdown-wrapper js-menu-dropdown-wrapper align-"+t},s.default.createElement("img",{className:"hidden",src:"/static/images/ajax-transp.gif",alt:"loading spinner"}),this.playlistsButton(o,r,t),o?null:s.default.createElement(b.default,{collections:n,contentUri:i,errors:this.props.errors,isFetching:r,inLibrary:this.props.inLibrary,useModal:this.props.useModal}))}}]),MenuDropdown}(a.Component);C.propTypes={align:u.string,collections:u.collectionList,contentUri:u.string.isRequired,didFatallyError:u.bool.isRequired,defaultCollection:u.collection,errors:u.errorsObject,inLibrary:u.bool.isRequired,isFetching:u.bool.isRequired,useModal:u.bool};var M=t.mapStateToProps=function(e){return{collections:f.getCollections(e),didFatallyError:f.getDidFatallyError(e),defaultCollection:f.getDefaultCollection(e),errors:f.getErrors(e),isFetching:f.getIsFetching(e)}};t.default=(0,l.connect)(M)(C),t.PureMenuDropdown=C},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PureContentLayout=t.mapStateToProps=void 0;var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(3),o=_interopRequireDefault(r),a=n(116),s=_interopRequireDefault(a),l=n(111),c=n(13),u=_interopRequireWildcard(c),d=n(112),p=_interopRequireWildcard(d),h=n(113),f=_interopRequireWildcard(h),_=n(9),m=_interopRequireWildcard(_),g=n(27),v=_interopRequireWildcard(g),y=n(206),b=_interopRequireDefault(y),T=n(24),w=_interopRequireDefault(T),C=n(164),M=_interopRequireDefault(C),k=n(173),L=_interopRequireDefault(k),E=p.api.getMetadataAndProgress,S=f.actions.nextPage,D=function(e){function ContentLayout(){_classCallCheck(this,ContentLayout);var e=_possibleConstructorReturn(this,(ContentLayout.__proto__||Object.getPrototypeOf(ContentLayout)).call(this));return e.showMoreItems=e.showMoreItems.bind(e),e.ensureContentMetadata=e.ensureContentMetadata.bind(e),e}return _inherits(ContentLayout,e),i(ContentLayout,[{key:"ensureContentMetadata",value:function(e){var t=e.urisWithoutMetadata;t.length>0&&!e.isFetching&&!e.didError&&w.default.dispatch(E(t))}},{key:"componentWillReceiveProps",value:function(e){this.ensureContentMetadata(e)}},{key:"componentWillMount",value:function(){this.ensureContentMetadata(this.props)}},{key:"showMoreItems",value:function(e){e.preventDefault(),w.default.dispatch(S())}},{key:"render",value:function(){var e=this.props,t=e.animateCollectionContent,n=e.didError,i=e.displayedContentMetadata,r=e.errors,a=e.isFetching,l=e.collectionHasMoreContent,c=e.noSpinner,d=i;return d.length>0||a?o.default.createElement("div",{className:"library-content"},a&&!c&&o.default.createElement("div",{className:"library-content-is-fetching"},o.default.createElement(M.default,null)),o.default.createElement("ul",{className:"articlelist title-cards title-cards-large"},o.default.createElement(s.default,{transitionAppear:!1,transitionEnter:!1,transitionLeave:t,transitionLeaveTimeout:500,transitionName:"content-transition"},d.map(function(e,t){return o.default.createElement(b.default,{key:e.api_url,index:t,item:e})}))),l&&o.default.createElement("div",{className:"wrap-more-button"},o.default.createElement("button",{type:"button",className:"button-primary",onClick:this.showMoreItems}," More"))):n&&!r.didError?o.default.createElement("div",null,o.default.createElement("div",{className:"library-no-content"},o.default.createElement("p",null,u.CONTENT_REQUEST_DID_ERROR_TEXT))):o.default.createElement("div",null,o.default.createElement("div",{className:"library-no-content"},a&&o.default.createElement("div",{className:"library-content-is-fetching"}),o.default.createElement("p",{className:"playlists-empty-state-text"},"Start exploring! You can add any title in ",o.default.createElement("a",{href:"/"},"Safari")," to this playlist just by tapping the playlist icon ",o.default.createElement(L.default,null),"."),o.default.createElement("img",{src:"/static/images/playlists_empty_state.png",alt:"Empty collection"})))}}]),ContentLayout}(r.Component);D.propTypes={animateCollectionContent:m.bool.isRequired,collectionHasMoreContent:m.bool.isRequired,didError:m.bool.isRequired,displayedContentMetadata:m.arrayOf(m.combinedMetadata),errors:m.errorsObject,noSpinner:m.bool,isFetching:m.bool.isRequired,urisWithoutMetadata:m.arrayOf(m.string)};var O=t.mapStateToProps=function(e){return{animateCollectionContent:v.getAnimateCollectionContent(e),collectionHasMoreContent:v.getCollectionHasMoreContent(e),didError:v.getDidError(e),displayedContentMetadata:v.getDisplayedContentMetadata(e),errors:v.getErrors(e),isFetching:v.getIsFetching(e),urisWithoutMetadata:v.getDisplayedContentUrisWithoutMetadata(e)}};t.default=(0,l.connect)(O)(D),t.PureContentLayout=D},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(119),o=n(3),a=_interopRequireDefault(o),s=n(13),l=_interopRequireWildcard(s),c=n(9),u=_interopRequireWildcard(c),d=n(164),p=_interopRequireDefault(d),h=function(e){function CreateCollectionView(){return _classCallCheck(this,CreateCollectionView),_possibleConstructorReturn(this,(CreateCollectionView.__proto__||Object.getPrototypeOf(CreateCollectionView)).apply(this,arguments))}return _inherits(CreateCollectionView,e),i(CreateCollectionView,[{key:"setHelpText",value:function(){var e=this.props,t=e.error,n=e.success,i=e.isFetching,o=a.default.createElement("label",{htmlFor:"collection-name"},"Name your new playlist");return i&&(o=a.default.createElement("label",{htmlFor:"collection-name"},"Working creating your playlist.")),t.exists&&(o=a.default.createElement("label",{htmlFor:"collection-name",className:"t-error "+t.css_class},t.description)),n.exists&&(o=a.default.createElement("label",{htmlFor:"collection-name",className:n.css_class},n.description,a.default.createElement(r.Link,{to:n.url,onClick:this.props.onSuccessLinkClick},"Visit now?"))),o}},{key:"setHelpTextDescription",value:function(){var e=this.props.errorDescription,t=a.default.createElement("label",{htmlFor:"collection-description"},"Playlist description (optional)");return e.exists&&(t=a.default.createElement("label",{htmlFor:"collection-description",className:"t-error "+e.css_class},e.description)),t}},{key:"getName",value:function(){return null!==this.props.name?this.props.name:""}},{key:"getDescription",value:function(){return null!==this.props.description?this.props.description:""}},{key:"getCreateCollectionModalButtonText",value:function(){return this.props.useModal&&this.props.success.exists?"Create another playlist":"Create playlist"}},{key:"componentDidMount",value:function(){this.collectionTextArea.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.error,i=t.errorDescription,r=t.success,o=t.isFetching,s=o?"fetching":"",c=r.exists||o;return a.default.createElement("form",{className:"create-collection-container",onSubmit:this.props.createCollectionHandler},a.default.createElement("div",{className:"wrap-collection-name-input"},a.default.createElement("div",null,a.default.createElement("input",{type:"text",id:"collection-name",placeholder:l.DEFAULT_COLLECTION_TITLE,onChange:this.props.onNameChangeHandler,tabIndex:"10000",className:"collection-name-input t-collection-name-input "+s+" "+(n.css_class||r.css_class),disabled:c,value:this.getName(),ref:function(t){e.collectionTextArea=t}}),this.setHelpText())),a.default.createElement("div",{className:"wrap-textarea"},a.default.createElement("textarea",{name:"description",id:"collection-description",placeholder:l.NEW_COLLECTION_DESCRIPTION,className:"collection-description-textarea t-collection-description-textarea "+i.css_class,onChange:this.props.onDescriptionChangeHandler,tabIndex:"10001",value:this.getDescription(),disabled:c,ref:function(t){return e.descriptionTextarea=t}}),this.setHelpTextDescription()),a.default.createElement("ul",{className:"actions"},a.default.createElement("li",null,this.props.onModalCloseClick&&a.default.createElement("button",{className:"cancel-button button-secondary",onClick:this.props.onModalCloseClick,type:"button"},"Cancel"),!this.props.onModalCloseClick&&a.default.createElement("button",{className:"cancel-button button-secondary",onClick:this.props.cancelCreationHandler,type:"button"},"Cancel")),a.default.createElement("li",null,a.default.createElement("button",{className:"save-button button-primary "+s,disabled:o||n.exists||i.exists,type:"submit"},this.getCreateCollectionModalButtonText(),o&&a.default.createElement(p.default,null)))))}}]),CreateCollectionView}(o.Component);t.default=h,h.propTypes={cancelCreationHandler:u.func,createCollectionHandler:u.func.isRequired,description:u.string,error:u.errorObject.isRequired,errorDescription:u.errorObject.isRequired,isFetching:u.bool.isRequired,name:u.string,onDescriptionChangeHandler:u.func.isRequired,onModalCloseClick:u.func,onNameChangeHandler:u.func.isRequired,onSuccessLinkClick:u.func,success:u.successObject.isRequired,useModal:u.bool},e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(24),o=_interopRequireDefault(r),a=n(3),s=_interopRequireDefault(a),l=n(155),c=n(112),u=_interopRequireWildcard(c),d=n(113),p=_interopRequireWildcard(d),h=n(15),f=_interopRequireWildcard(h),_=n(9),m=_interopRequireWildcard(_),g=n(22),v=n(222),y=_interopRequireDefault(v),b=n(223),T=_interopRequireDefault(b),w=n(181),C=u.api,M=C.addContentToCollection,k=C.addToQueue,L=C.removeContentFromCollection,E=C.removeFromQueue,S=p.actions.enableAnimateCollectionContent,D=function(e){function MenuItem(e){_classCallCheck(this,MenuItem);var t=_possibleConstructorReturn(this,(MenuItem.__proto__||Object.getPrototypeOf(MenuItem)).call(this,e));return t.updateContent=t.updateContent.bind(t),t.state={isFetching:!1,didError:!1},t}return _inherits(MenuItem,e),i(MenuItem,[{key:"updateContent",value:function(e){e.preventDefault();var t=this.props,n=t.collection,i=t.index,r=t.contentUri,o=f.collectionHasContent(n,r);this.setState({isFetching:!0}),o?((0,g.trackRemoveContentFromCollection)(i+1),this.removeContentFromCollection(n,r)):((0,g.trackAddContentToCollection)(i+1),this.addContentToCollection(n,r))}},{key:"addContentToCollection",value:function(e,t){var n=this,i=this.props.fromAddToAnotherModal,r={event:"eventTracker",eventCat:"playlists",eventVal:0,nonInteraction:0},a={};a=i?{eventAct:"modal",eventLbl:"modal|add to another playlist single"}:{eventAct:"dropdown",eventLbl:"dropdown|add to recent playlist"},(0,w.track)(Object.assign({},r,a));var s=void 0;s=e.is_default?o.default.dispatch(k(e.id,[t])):o.default.dispatch(M(e.id,[t])),s.then(function(){n.setState({isFetching:!1,didError:!1})}).catch(function(){n.setState({didError:!0,isFetching:!1})})}},{key:"removeContentFromCollection",value:function(e,t){var n=this;this.props.inLibrary&&o.default.dispatch(S()),this.setState({isFetching:!0});var i=function(){n.setState({isFetching:!1,didError:!1})},r=function(){n.setState({didError:!0,isFetching:!1})};e.is_default?o.default.dispatch(E(e.id,[t])).then(i).fail(r):o.default.dispatch(L(e.id,[t])).then(i).catch(r)}},{key:"render",value:function(){var e=this.props,t=e.collection,n=e.contentUri,i=this.state.didError?"error":"",r=this.state.isFetching?"is-fetching":"",o=f.collectionHasContent(t,n),a=o?"does-exist-in-collection":"";return this.state.didError&&o&&(o=!1),s.default.createElement("li",{className:"dropdown-item js-dropdown-item "+r+" "+a},s.default.createElement("a",{href:"#",key:t.name,onClick:this.updateContent,className:"dropdown-item "+i},s.default.createElement("div",{className:"item-title"},t.name),this.state.didError&&s.default.createElement(T.default,null),o&&!this.state.isFetching&&s.default.createElement(y.default,null),this.state.isFetching&&s.default.createElement("img",{className:"is-fetching-gif",src:"/static/images/ajax-transp.gif",alt:"fetching"})))}}]),MenuItem}(a.Component);t.default=D,D.defaultProps={fromAddToAnotherModal:!1},D.propTypes={collection:m.collection.isRequired,contentUri:m.string.isRequired,index:m.number,inLibrary:m.bool.isRequired,fromAddToAnotherModal:m.bool},D.contextTypes={router:l.routerShape},e.exports=t.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=n(119),a=function(e){var t=e.url,n=e.icon,i=e.text,a=e.onClick;return e.isDisabled?r.default.createElement("span",{className:"disabled-link"},n," ",i):r.default.createElement(o.Link,{to:t,onClick:a},n," ",i)};a.propTypes={icon:i.PropTypes.node.isRequired,isDisabled:i.PropTypes.bool.isRequired,onClick:i.PropTypes.func,text:i.PropTypes.string.isRequired,url:i.PropTypes.string.isRequired},t.default=a,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function ajaxRequest(){return{type:r.AJAX_REQUEST}}function ajaxRequestDidError(){return{type:r.AJAX_REQUEST_DID_ERROR}}function getCollectionsSuccess(e){return{type:r.GET_COLLECTIONS_SUCCESS,collections:e}}function getCollectionsRequest(){return{type:r.GET_COLLECTIONS_REQUEST}}function removeCollection(e){return{type:r.REMOVE_COLLECTION,collectionId:e}}function createCollectionRequest(){return{type:r.CREATE_COLLECTION_REQUEST}}function createCollectionSuccess(e){return{type:r.CREATE_COLLECTION_SUCCESS,collection:e}}function deleteCollectionSuccess(e){return{type:r.DELETE_COLLECTION_SUCCESS,collectionId:e}}function deleteCollectionRequest(){return{type:r.DELETE_COLLECTION_REQUEST}}function addContentSuccess(e,t){return{type:r.ADD_CONTENT_SUCCESS,collectionId:e,content:t}}function removeContentSuccess(e,t){return{type:r.REMOVE_CONTENT_SUCCESS,collectionId:e,content:t}}function updateCollectionRequest(){return{type:r.UPDATE_COLLECTION_REQUEST}}function updateCollectionSuccess(e){return{type:r.UPDATE_COLLECTION_SUCCESS,collection:e}}function contentUriMetadataRequest(e){return{type:r.CONTENT_URI_METADATA_REQUEST,contentUris:e}}function getContentMetadataSuccess(e){return{type:r.GET_CONTENT_METADATA_SUCCESS,metadata:e}}function getUserProgressSuccess(e){return{type:r.GET_USER_PROGRESS_SUCCESS,progress:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ajaxRequest=ajaxRequest,t.ajaxRequestDidError=ajaxRequestDidError,t.getCollectionsSuccess=getCollectionsSuccess,t.getCollectionsRequest=getCollectionsRequest,t.removeCollection=removeCollection,t.createCollectionRequest=createCollectionRequest,t.createCollectionSuccess=createCollectionSuccess,t.deleteCollectionSuccess=deleteCollectionSuccess,t.deleteCollectionRequest=deleteCollectionRequest,t.addContentSuccess=addContentSuccess,t.removeContentSuccess=removeContentSuccess,t.updateCollectionRequest=updateCollectionRequest,t.updateCollectionSuccess=updateCollectionSuccess,t.contentUriMetadataRequest=contentUriMetadataRequest,t.getContentMetadataSuccess=getContentMetadataSuccess,t.getUserProgressSuccess=getUserProgressSuccess;var i=n(170),r=_interopRequireWildcard(i)},,,,,,function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function createLibrary(){C.default.dispatch(M()).then(function(){l.default.render(a.default.createElement(c.Provider,{store:C.default},T.default),document.getElementById("js-my-library-react-mount"))}).catch(function(){l.default.render(a.default.createElement(c.Provider,{store:C.default},a.default.createElement(g.default,null)),document.getElementById("js-my-library-react-mount"))})}function attachQueueToChapter(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.el)throw new Error('initCollectionDropdowns options did not include an "el" element to attach React to the DOM.');if((0,r.default)(t.el).length){var n=function(){(0,r.default)(t.el).each(function(){l.default.render(a.default.createElement(c.Provider,{store:C.default},a.default.createElement(y.default,{align:"right",contentUri:e,useModal:!0,inLibrary:!1})),(0,r.default)(this)[0])})};C.default.dispatch(M()).then(n).catch(n)}}function initMenuDropdowns(){function renderDOM(){(0,r.default)(e.el).each(function(){var e,t,n=(0,r.default)(this);try{e=(0,r.default)(this).closest(".js-content-uri").data("content-uri").toString()}catch(e){throw new Error('Error: card did not contain a valid "data-content-uri" attribute.')}t=n.attr("align")||"right",l.default.render(a.default.createElement(c.Provider,{store:C.default},a.default.createElement(y.default,{align:t,contentUri:_.normalizeContentUri(e),inLibrary:!1,useModal:!0})),n.get(0))})}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.el)throw new Error('initCollectionDropdowns options did not include an "el" element to attach React to the DOM.');if((0,r.default)(e.el).length)if(h.getCollections(C.default.getState()).length)renderDOM();else if(h.getIsFetching(C.default.getState()))var t=setInterval(function(){h.getIsFetching(C.default.getState())&&!h.getErrors(C.default.getState()).didError||(renderDOM(),clearInterval(t))},200);else C.default.dispatch(M()).then(function(){return renderDOM()}).catch(function(){return renderDOM()})}Object.defineProperty(t,"__esModule",{value:!0}),t.createLibrary=createLibrary,t.attachQueueToChapter=attachQueueToChapter,t.initMenuDropdowns=initMenuDropdowns;var i=n(1),r=_interopRequireDefault(i),o=n(3),a=_interopRequireDefault(o),s=n(174),l=_interopRequireDefault(s),c=n(111),u=n(112),d=_interopRequireWildcard(u),p=n(27),h=_interopRequireWildcard(p),f=n(15),_=_interopRequireWildcard(f),m=n(208),g=_interopRequireDefault(m),v=n(182),y=_interopRequireDefault(v),b=n(219),T=_interopRequireDefault(b),w=n(24),C=_interopRequireDefault(w),M=d.api.getAllCollections},,,,,function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(3),o=_interopRequireDefault(r),a=n(116),s=_interopRequireDefault(a),l=n(155),c=n(9),u=_interopRequireWildcard(c),d=n(169),p=_interopRequireDefault(d),h=n(185),f=_interopRequireDefault(h),_=n(110),m=_interopRequireDefault(_),g=n(226),v=_interopRequireDefault(g),y=function(e){function AddToCollectionModal(){_classCallCheck(this,AddToCollectionModal);var e=_possibleConstructorReturn(this,(AddToCollectionModal.__proto__||Object.getPrototypeOf(AddToCollectionModal)).call(this));return e.state={query:""},e.onSearchTextChange=e.onSearchTextChange.bind(e),e}return _inherits(AddToCollectionModal,e),i(AddToCollectionModal,[{key:"componentWillMount",value:function(){this.filterCollections(this.state.query,this.props)}},{key:"componentWillReceiveProps",value:function(e){this.filterCollections(this.state.query,e)}},{key:"onSearchTextChange",value:function(e){var t=e.currentTarget.value;e.preventDefault(),this.filterCollections(t,this.props)}},{key:"filterCollections",value:function(e,t){var n=t.collections,i=[];e?n.forEach(function(t){-1!==t.name.toLowerCase().indexOf(e.toLowerCase())&&i.push(t)}):i=n,this.setState({query:e,filteredCollections:i})}},{key:"inLibrary",value:function(){return!!this.context.router}},{key:"render",value:function(){var e=this,t=this.props,n=t.contentUri,i=t.errors;return o.default.createElement(m.default,{onCloseClick:this.props.onModalCloseClick},o.default.createElement("h1",null,"Add to another playlist"),i.didError&&o.default.createElement(p.default,{errors:i}),o.default.createElement("div",{className:"wrap-search"},o.default.createElement("input",{type:"search",name:"query",autoComplete:"off",placeholder:"Find a playlist",onChange:this.onSearchTextChange}),o.default.createElement(v.default,null)),!this.state.filteredCollections.length&&o.default.createElement("h4",null,"No results"),this.state.filteredCollections.length>0&&o.default.createElement("div",null,o.default.createElement("h4",null,"Choose a playlist"),o.default.createElement("ul",{className:"modal-menu"},o.default.createElement(s.default,{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"list-slide"},this.state.filteredCollections.map(function(t){return o.default.createElement(f.default,{key:t.id,collection:t,contentUri:n,inLibrary:e.inLibrary(),fromAddToAnotherModal:!0})})))))}}]),AddToCollectionModal}(r.Component);t.default=y,y.propTypes={collections:u.collectionList.isRequired,contentUri:u.string.isRequired,errors:u.errorsObject,onModalCloseClick:u.func.isRequired},y.contextTypes={router:l.routerShape},e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PureCreateCollection=t.mapStateToProps=void 0;var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(3),o=_interopRequireDefault(r),a=n(111),s=n(155),l=n(9),c=_interopRequireWildcard(l),u=n(13),d=_interopRequireWildcard(u),p=n(112),h=_interopRequireWildcard(p),f=n(15),_=_interopRequireWildcard(f),m=n(27),g=_interopRequireWildcard(m),v=n(184),y=_interopRequireDefault(v),b=n(156),T=_interopRequireDefault(b),w=n(24),C=_interopRequireDefault(w),M=n(22),k=n(158),L=_interopRequireDefault(k),E=n(157),S=_interopRequireDefault(E),D=h.api,O=D.addContentToCollection,x=D.createCollection,R=function(e){function CreateCollection(){_classCallCheck(this,CreateCollection);var e=_possibleConstructorReturn(this,(CreateCollection.__proto__||Object.getPrototypeOf(CreateCollection)).call(this));return e.cancelCreationHandler=e.cancelCreationHandler.bind(e),e.createCollectionHandler=e.createCollectionHandler.bind(e),e.getToolbarButtons=e.getToolbarButtons.bind(e),e.onDescriptionChangeHandler=e.onDescriptionChangeHandler.bind(e),e.onNameChangeHandler=e.onNameChangeHandler.bind(e),e.state={error:_.cleanErrorState(),errorDescription:_.cleanErrorDescriptionState(),success:_.cleanSuccessState(),name:null,description:null},e}return _inherits(CreateCollection,e),i(CreateCollection,[{key:"getToolbarButtons",value:function(){return[o.default.createElement(L.default,{isDisabled:!0}),o.default.createElement(S.default,{collection:null})]}},{key:"onNameChangeHandler",value:function(e){e.preventDefault();var t=e.target.value,n=this.props.collections;this.setState({name:t}),_.collectionNameIsUnique(n,t)?t.length>d.PLAYLIST_NAME_MAX_LENGTH?this.setState({error:_.activeErrorState(d.PLAYLIST_NAME_TOO_LONG_ERROR)}):this.setState({error:_.cleanErrorState()}):this.setState({error:_.activeErrorState(d.EXISTING_COLLECTION_NAME_ERROR)})}},{key:"cancelCreationHandler",value:function(e){e.preventDefault(),this.context.router.goBack()}},{key:"onDescriptionChangeHandler",value:function(e){e.preventDefault();var t=e.target.value;this.setState({description:t}),t.length>d.PLAYLIST_DESCRIPTION_MAX_LENGTH?this.setState({errorDescription:_.activeErrorDescriptionState(d.PLAYLIST_DESCRIPTION_TOO_LONG_ERROR)}):this.setState({errorDescription:_.cleanErrorDescriptionState()})}},{key:"createCollectionHandler",value:function(e){e.preventDefault();var t=this.props.location;if(!this.state.name)return void this.setState({error:_.activeErrorState(d.ERROR_NO_COLLECTION_NAME)});var n={name:this.state.name,description:this.state.description||""},i=[];try{i=[t.state.contentUri]}catch(e){}C.default.dispatch(x(n)).then(function(e){if((0,M.trackCreateNewCollection)(),i.length){var t=e.collection.id;C.default.dispatch(O(t,i)).then(function(){_.redirectToCollection(e.collection)}).catch(function(){_.redirectToCollection(e.collection)})}else _.redirectToCollection(e.collection)}).catch(function(){return!1})}},{key:"render",value:function(){var e=this.props.isFetching;return o.default.createElement(T.default,{toolbarButtons:this.getToolbarButtons()},o.default.createElement(y.default,{cancelCreationHandler:this.cancelCreationHandler,createCollectionHandler:this.createCollectionHandler,description:this.state.description,error:this.state.error,errorDescription:this.state.errorDescription,isFetching:e,name:this.state.name,onDescriptionChangeHandler:this.onDescriptionChangeHandler,onNameChangeHandler:this.onNameChangeHandler,success:this.state.success}))}}]),CreateCollection}(r.Component);R.propTypes={collections:c.collectionList,isFetching:c.bool.isRequired,location:s.locationShape},R.contextTypes={router:s.routerShape};var A=t.mapStateToProps=function(e){return{collections:g.getCollections(e),isFetching:g.getIsFetching(e)}};t.default=(0,a.connect)(A)(R),t.PureCreateCollection=R},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(3),o=_interopRequireDefault(r),a=n(13),s=_interopRequireWildcard(a),l=n(112),c=_interopRequireWildcard(l),u=n(15),d=_interopRequireWildcard(u),p=n(9),h=_interopRequireWildcard(p),f=n(184),_=_interopRequireDefault(f),m=n(169),g=_interopRequireDefault(m),v=n(110),y=_interopRequireDefault(v),b=n(24),T=_interopRequireDefault(b),w=n(22),C=c.api,M=C.addContentToCollection,k=C.createCollection,L=C.getContentMetadata,E=function(e){function CreateCollectionModal(){_classCallCheck(this,CreateCollectionModal);var e=_possibleConstructorReturn(this,(CreateCollectionModal.__proto__||Object.getPrototypeOf(CreateCollectionModal)).call(this));return e.createCollectionHandler=e.createCollectionHandler.bind(e),e.onNameChangeHandler=e.onNameChangeHandler.bind(e),e.onDescriptionChangeHandler=e.onDescriptionChangeHandler.bind(e),e.createSuccessHandler=e.createSuccessHandler.bind(e),e.onSuccessLinkClick=e.onSuccessLinkClick.bind(e),e.state={error:d.cleanErrorState(),errorDescription:d.cleanErrorDescriptionState(),success:d.cleanSuccessState(),name:null,description:null},e}return _inherits(CreateCollectionModal,e),i(CreateCollectionModal,[{key:"onNameChangeHandler",value:function(e){e.preventDefault();var t=e.target.value,n=this.props.collections;this.setState({name:t}),d.collectionNameIsUnique(n,t)?t.length>s.PLAYLIST_NAME_MAX_LENGTH?this.setState({error:d.activeErrorState(s.PLAYLIST_NAME_TOO_LONG_ERROR)}):this.setState({error:d.cleanErrorState()}):this.setState({error:d.activeErrorState(s.EXISTING_COLLECTION_NAME_ERROR)}),this.state.success.exists&&this.setState({success:d.cleanSuccessState()})}},{key:"onDescriptionChangeHandler",value:function(e){e.preventDefault();var t=e.target.value;this.setState({description:t}),t.length>s.PLAYLIST_DESCRIPTION_MAX_LENGTH?this.setState({errorDescription:d.activeErrorDescriptionState(s.PLAYLIST_DESCRIPTION_TOO_LONG_ERROR)}):this.setState({errorDescription:d.cleanErrorDescriptionState()})}},{key:"createSuccessHandler",value:function(e){var t=this,n=this.props.contentUri,i=d.buildShowCollectionRoute(e.collection);(0,w.trackCreateCollectionButtonClick)(),T.default.dispatch(L([n])).then(function(e){var n=e.metadata[0].content_format;t.setState({success:d.activeSuccessState("New playlist created with your "+n+". ",i)})})}},{key:"onSuccessLinkClick",value:function(e){e.preventDefault(),(0,w.trackVisitNowLinkClick)(),this.props.onModalCloseClick(),window.location.href=this.state.success.url}},{key:"createCollectionHandler",value:function(e){var t=this;e.preventDefault();var n=this.props,i=n.contentUri,r=n.onCreateCollection;if(this.state.success.exists)return void this.setState({error:d.cleanErrorState(),errorDescription:d.cleanErrorDescriptionState(),success:d.cleanSuccessState(),name:null,description:null});if(!this.state.name)return void this.setState({error:d.activeErrorState(s.ERROR_NO_COLLECTION_NAME)});var o={name:this.state.name,description:this.state.description||""};T.default.dispatch(k(o)).then(function(e){(0,w.trackCreateNewCollection)(),T.default.dispatch(M(e.collection.id,[i])).then(function(){r(),t.createSuccessHandler(e)}).catch(function(){return!1})}).catch(function(){return!1})}},{key:"render",value:function(){var e=this.props,t=e.errors,n=e.isFetching;return o.default.createElement(y.default,{onCloseClick:this.props.onModalCloseClick,extraClass:"modal-create-collection"},o.default.createElement("h1",null,"Create new playlist"),t.didError&&o.default.createElement(g.default,{errors:t}),o.default.createElement(_.default,{createCollectionHandler:this.createCollectionHandler,description:this.state.description,error:this.state.error,errorDescription:this.state.errorDescription,isFetching:n,name:this.state.name,onDescriptionChangeHandler:this.onDescriptionChangeHandler,onModalCloseClick:this.props.onModalCloseClick,onNameChangeHandler:this.onNameChangeHandler,onSuccessLinkClick:this.onSuccessLinkClick,success:this.state.success,useModal:this.props.useModal}))}}]),CreateCollectionModal}(r.Component);t.default=E,E.propTypes={collections:h.collectionList.isRequired,contentUri:h.string.isRequired,errors:h.errorsObject,isFetching:h.bool.isRequired,onModalCloseClick:h.func.isRequired,useModal:h.bool,onCreateCollection:h.func.isRequired},e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PureEditCollection=t.mapStateToProps=void 0;var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(2),o=_interopRequireDefault(r),a=n(3),s=_interopRequireDefault(a),l=n(24),c=_interopRequireDefault(l),u=n(111),d=n(155),p=n(13),h=_interopRequireWildcard(p),f=n(112),_=_interopRequireWildcard(f),m=n(113),g=_interopRequireWildcard(m),v=n(120),y=_interopRequireWildcard(v),b=n(15),T=_interopRequireWildcard(b),w=n(9),C=_interopRequireWildcard(w),M=n(27),k=_interopRequireWildcard(M),L=n(207),E=_interopRequireDefault(L),S=n(156),D=_interopRequireDefault(S),O=n(110),x=_interopRequireDefault(O),R=n(22),A=n(157),P=_interopRequireDefault(A),Y=n(158),I=_interopRequireDefault(Y),j=n(164),N=_interopRequireDefault(j),F=_.api,q=F.addContentToCollection,W=F.createCollection,H=F.deleteSingleCollection,U=F.updateSingleCollection,z=g.actions,B=z.selectCollection,$=z.selectTopic,V=y.actions.flashError,G=function(e){function EditCollection(){_classCallCheck(this,EditCollection);var e=_possibleConstructorReturn(this,(EditCollection.__proto__||Object.getPrototypeOf(EditCollection)).call(this));return e.deleteCollectionHandler=e.deleteCollectionHandler.bind(e),e.duplicateCollectionHandler=e.duplicateCollectionHandler.bind(e),e.getToolbarButtons=e.getToolbarButtons.bind(e),e.onCancelEditHandler=e.onCancelEditHandler.bind(e),e.onConfirmDeleteClick=e.onConfirmDeleteClick.bind(e),e.onDescriptionChangeHandler=e.onDescriptionChangeHandler.bind(e),e.onModalCloseClick=e.onModalCloseClick.bind(e),e.onNameChangeHandler=e.onNameChangeHandler.bind(e),e.saveHandler=e.saveHandler.bind(e),e.state={collection:null,currentAction:null,description:null,error:T.cleanErrorState(),errorDescription:T.cleanErrorDescriptionState(),name:null,showConfirmDeleteModal:!1,success:T.cleanSuccessState(),updateCollectionDelayMS:h.UPDATE_COLLECTION_DELAY_MS},e}return _inherits(EditCollection,e),i(EditCollection,[{key:"componentWillMount",value:function(){this.setCollection()}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.collection,n=e.params;t.id!==n.collection_id&&this.setCollection()}},{key:"setCollection",value:function(){var e=this.props.collections,t=this.context.router,n=o.default.find(e,{id:t.params.collection_id});if(!n)return c.default.dispatch(V(h.ERROR_COLLECTION_NOT_FOUND)),void t.replace(h.ROOT_URL);this.setState({collection:n,description:n.description,name:n.name}),c.default.dispatch(B(n.id)),c.default.dispatch($(h.DEFAULT_TOPIC.slug))}},{key:"onCancelEditHandler",value:function(e){e.preventDefault();var t=this.state.collection,n=this.context.router,i=T.buildShowCollectionRoute(t);n.push(i)}},{key:"onNameChangeHandler",value:function(e){var t=this;e.preventDefault();var n=this.props.collections,i=e.target.value,r=o.default.filter(n,function(e){return e.id!==t.state.collection.id});this.setState({name:i}),T.collectionNameIsUnique(r,i)?i.length>h.PLAYLIST_NAME_MAX_LENGTH?this.setState({error:T.activeErrorState(h.PLAYLIST_NAME_TOO_LONG_ERROR)}):this.setState({error:T.cleanErrorState()}):this.setState({error:T.activeErrorState(h.EXISTING_COLLECTION_NAME_ERROR)})}},{key:"onDescriptionChangeHandler",value:function(e){e.preventDefault();var t=e.target.value;this.setState({description:t}),t.length>h.PLAYLIST_DESCRIPTION_MAX_LENGTH?this.setState({errorDescription:T.activeErrorDescriptionState(h.PLAYLIST_DESCRIPTION_TOO_LONG_ERROR)}):this.setState({errorDescription:T.cleanErrorDescriptionState()})}},{key:"deleteCollectionHandler",value:function(e){e.preventDefault(),this.setState({showConfirmDeleteModal:!0})}},{key:"onConfirmDeleteClick",value:function(e){var t=this;e.preventDefault();var n=this.state.collection,i=this.context.router;this.setState({currentAction:h.EDIT_COLLECTION_ACTIONS.DELETE}),c.default.dispatch(H(n.id)).then(function(){(0,R.trackDeleteCollection)(),i.push(h.ROOT_URL)}).catch(function(){t.setState({showConfirmDeleteModal:!1})})}},{key:"duplicateCollectionHandler",value:function(e){e.preventDefault();var t=this.state.collection,n=this.context.router,i=t.name,r=t.description,a=t.content,s=o.default.pluck(a,"api_url"),l=h.DUPLICATE_COLLECTION_PREPEND_TITLE+" "+i;this.setState({currentAction:h.EDIT_COLLECTION_ACTIONS.DUPLICATE}),c.default.dispatch(W({name:l,description:r})).then(function(e){var t=e.collection.id;c.default.dispatch(q(t,s)).then(function(){n.push(T.buildEditCollectionRoute(e.collection))}).catch(function(){n.push(T.buildEditCollectionRoute(e.collection))})}).catch(function(){return!1})}},{key:"saveHandler",value:function(e){var t=this;e.preventDefault();var n=this.state.collection,i=this.context.router,r=T.buildShowCollectionRoute(n);if(!this.state.name)return void this.setState({error:T.activeErrorState(h.ERROR_NO_COLLECTION_NAME)});var o={description:this.state.description,id:n.id,name:this.state.name};this.setState({currentAction:h.EDIT_COLLECTION_ACTIONS.UPDATE}),c.default.dispatch(U(o)).then(function(){t.setState({success:T.activeSuccessState("Changes saved",null)}),setTimeout(function(){return i.push(r)},t.state.updateCollectionDelayMS)}).catch(function(){return!1})}},{key:"onModalCloseClick",value:function(e){e.preventDefault(),this.setState({showConfirmDeleteModal:!1})}},{key:"getToolbarButtons",value:function(){return[s.default.createElement(I.default,{isDisabled:!0}),s.default.createElement(P.default,{collection:null,isDisabled:!0})]}},{key:"render",value:function(){var e=this.props.isFetching,t=this.state,n=t.collection,i=t.currentAction,r=this.state.name||"",o=this.state.description||"",a=e&&i===h.EDIT_COLLECTION_ACTIONS.DELETE,l=a?"fetching":"";return s.default.createElement(D.default,{toolbarButtons:this.getToolbarButtons()},n&&s.default.createElement(E.default,{currentAction:i,deleteCollectionHandler:this.deleteCollectionHandler,description:o,duplicateCollectionHandler:this.duplicateCollectionHandler,error:this.state.error,errorDescription:this.state.errorDescription,isFetching:e,name:r,onCancelEditHandler:this.onCancelEditHandler,onDescriptionChangeHandler:this.onDescriptionChangeHandler,onNameChangeHandler:this.onNameChangeHandler,saveHandler:this.saveHandler,success:this.state.success}),n&&this.state.showConfirmDeleteModal&&s.default.createElement(x.default,{onCloseClick:this.onModalCloseClick,extraClass:"modal-create-collection"},s.default.createElement("h1",null,"Delete playlist"),s.default.createElement("p",null,"Are you sure you want to delete this playlist? This action cannot be undone."),s.default.createElement("ul",{className:"actions"},s.default.createElement("li",null,s.default.createElement("button",{className:"cancel-button button-secondary",disabled:e,onClick:this.onModalCloseClick},"Cancel")),s.default.createElement("li",null,s.default.createElement("button",{className:"button-primary js-initial-focus t-confirm-delete "+l,disabled:e,onClick:this.onConfirmDeleteClick},"Confirm",a&&s.default.createElement(N.default,null))))))}}]),EditCollection}(a.Component);G.propTypes={collections:C.collectionList.isRequired,isFetching:C.bool.isRequired},G.contextTypes={router:d.routerShape};var K=t.mapStateToProps=function(e){return{collections:k.getCollections(e),isFetching:k.getIsFetching(e)}};t.default=(0,u.connect)(K)(G),t.PureEditCollection=G},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(2),o=_interopRequireDefault(r),a=n(3),s=_interopRequireDefault(a),l=n(119),c=n(15),u=_interopRequireWildcard(c),d=n(9),p=_interopRequireWildcard(d),h=n(210),f=_interopRequireDefault(h),_=n(22),m=function(e){function LibraryNavigation(){_classCallCheck(this,LibraryNavigation);var e=_possibleConstructorReturn(this,(LibraryNavigation.__proto__||Object.getPrototypeOf(LibraryNavigation)).call(this));return e.getOrderedCollections=e.getOrderedCollections.bind(e),e.onCollectionChange=e.onCollectionChange.bind(e),e.onSelectChange=e.onSelectChange.bind(e),e}return _inherits(LibraryNavigation,e),i(LibraryNavigation,[{key:"getOrderedCollections",value:function(){var e=this.props.collections;return u.sortedCollections(e)}},{key:"onCollectionChange",value:function(e){(0,_.trackCollectionAccessed)(e+1)}},{key:"onSelectChange",value:function(e){e.preventDefault();var t=this.getOrderedCollections(),n=e.target.value,i=u.getCollectionByIdOrDefault(t,n),r=o.default.findIndex(t,{id:n});this.onCollectionChange(r),l.browserHistory.push(u.buildShowCollectionRoute(i))}},{key:"render",value:function(){var e=this,t=this.props.selectedCollection,n=this.getOrderedCollections();return s.default.createElement("div",{className:"sb-nav library-nav"},t&&s.default.createElement("div",{className:"desktop-menu"},s.default.createElement("ul",{className:"collections-dropdown-region"},n.map(function(n,i){var r=n.id===t.id;return s.default.createElement(f.default,{key:i,collection:n,active:r,onClick:e.onCollectionChange.bind(e,i)})}))),t&&s.default.createElement("div",{className:"mobile-menu t-mobile-menu"},s.default.createElement("label",{htmlFor:"collections-mobile-menu"},s.default.createElement("select",{id:"collections-mobile-menu",value:t.id,onChange:this.onSelectChange},n.map(function(e,t){return s.default.createElement("option",{value:e.id,key:t},e.name)})))))}}]),LibraryNavigation}(a.Component);t.default=m,m.propTypes={collections:p.collectionList.isRequired,selectedCollection:p.collection},e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PureShowCollection=t.mapStateToProps=void 0;var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(2),o=_interopRequireDefault(r),a=n(3),s=_interopRequireDefault(a),l=n(111),c=n(155),u=n(13),d=_interopRequireWildcard(u),p=n(113),h=_interopRequireWildcard(p),f=n(120),_=_interopRequireWildcard(f),m=n(9),g=_interopRequireWildcard(m),v=n(27),y=_interopRequireWildcard(v),b=n(183),T=_interopRequireDefault(b),w=n(157),C=_interopRequireDefault(w),M=n(156),k=_interopRequireDefault(M),L=n(158),E=_interopRequireDefault(L),S=n(24),D=_interopRequireDefault(S),O=n(205),x=_interopRequireDefault(O),R=n(173),A=_interopRequireDefault(R),P=n(15),Y=_interopRequireWildcard(P),I=h.actions,j=I.selectCollection,N=I.selectTopic,F=I.setPageSize,q=_.actions.flashError,W=function(e){function ShowCollection(){_classCallCheck(this,ShowCollection);var e=_possibleConstructorReturn(this,(ShowCollection.__proto__||Object.getPrototypeOf(ShowCollection)).call(this));return e.state={collection:null},e.getToolbarButtons=e.getToolbarButtons.bind(e),e}return _inherits(ShowCollection,e),i(ShowCollection,[{key:"componentWillMount",value:function(){this.isRootUrl()?this.setCollection(!0):this.setCollection()}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.collection,n=e.params,i=this.getDefaultCollection();if(this.isRootUrl())return void(t&&t.id===i.id||this.setCollection(!0));t.id!==n.collection_id&&this.setCollection()}},{key:"getToolbarButtons",value:function(){var e=this.state.collection;return[s.default.createElement(E.default,{isDisabled:!1}),s.default.createElement(C.default,{collection:e})]}},{key:"isRootUrl",value:function(){return this.context.router.isActive(d.ROOT_URL)}},{key:"getCollection",value:function(){var e=this.props.collections,t=this.context.router;return o.default.find(e,{id:t.params.collection_id})}},{key:"getDefaultCollection",value:function(){var e=this.props.collections,t=o.default.find(e,{is_default:!0});return t||(t=this.getFirstCollection()),t}},{key:"getFirstCollection",value:function(){var e=this.props.collections;if(e.length>0){return Y.sortedCollections(e)[0]}return null}},{key:"setCollection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.context.router,n=t.params.topic_slug||d.DEFAULT_TOPIC.slug,i=e?this.getDefaultCollection():this.getCollection();if(!e&&!i)return D.default.dispatch(q(d.ERROR_COLLECTION_NOT_FOUND)),void t.replace(d.ROOT_URL);i?(D.default.dispatch(j(i.id)),D.default.dispatch(N(n)),D.default.dispatch(F(d.CONTENT_ITEMS_PER_PAGINATION))):i=null,this.setState({collection:i})}},{key:"render",value:function(){var e=this.props,t=e.contentCount,n=e.selectedTopic,i=e.topics,r=this.state.collection;return r?s.default.createElement(k.default,{toolbarButtons:this.getToolbarButtons()},s.default.createElement("h1",null,r.name),!r.is_default&&r.description&&s.default.createElement("div",{className:"collection-description t-collection-description"},r.description),s.default.createElement("div",{className:"wrap-topics-layout"},s.default.createElement(x.default,{collection:r,contentCount:t,selectedTopic:n,topics:i})),s.default.createElement(T.default,null)):s.default.createElement(k.default,{toolbarButtons:this.getToolbarButtons()},s.default.createElement("div",{className:"library-no-content"},s.default.createElement("p",null,"Start exploring! You do not yet have any playlists."),s.default.createElement("p",null,"You can add any title in ",s.default.createElement("a",{href:"/"},"Safari")," to a playlist just by tapping the playlist icon ",s.default.createElement(A.default,null),".")))}}]),ShowCollection}(a.Component);W.propTypes={collections:g.collectionList.isRequired,selectedTopic:g.topic,topics:g.topicList,contentCount:g.number},W.contextTypes={router:c.routerShape};var H=t.mapStateToProps=function(e){return{collections:y.getCollections(e),contentCount:y.getSelectedCollectionContentCountFilteredByTopic(e),selectedTopic:y.getSelectedTopic(e),topics:y.getSelectedCollectionTopics(e)}};t.default=(0,l.connect)(H)(W),t.PureShowCollection=W},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(119),o=n(3),a=_interopRequireDefault(o),s=n(2),l=_interopRequireDefault(s),c=n(13),u=_interopRequireWildcard(c),d=n(15),p=_interopRequireWildcard(d),h=n(9),f=_interopRequireWildcard(h),_=n(185),m=_interopRequireDefault(_),g=n(198),v=_interopRequireDefault(g),y=n(200),b=_interopRequireDefault(y),T=n(116),w=_interopRequireDefault(T),C=n(22),M=n(1),k=_interopRequireDefault(M),L=3,E=function(e){function MenuLayout(){_classCallCheck(this,MenuLayout);var e=_possibleConstructorReturn(this,(MenuLayout.__proto__||Object.getPrototypeOf(MenuLayout)).call(this));return e.onCreateNewCollectionClick=e.onCreateNewCollectionClick.bind(e),e.onAddToAnotherCollectionClick=e.onAddToAnotherCollectionClick.bind(e),e.onModalCloseClick=e.onModalCloseClick.bind(e),e.onBodyClick=e.onBodyClick.bind(e),e.onCreateCollection=e.onCreateCollection.bind(e),e.addToAnotherCollectionsIndex=e.addToAnotherCollectionsIndex.bind(e),e.addToNewCollectionIndex=e.addToNewCollectionIndex.bind(e),e.state={showAddToAnotherCollectionModal:!1,showCreateCollectionModal:!1,collectionOrder:[]},e}return _inherits(MenuLayout,e),i(MenuLayout,[{key:"onCreateCollection",value:function(){var e=this.sortedCollections();this.setState({collectionOrder:l.default.pluck(e,"id")})}},{key:"componentWillMount",value:function(){var e=this.sortedCollections();this.setState({collectionOrder:l.default.pluck(e,"id")})}},{key:"componentDidMount",value:function(){this.ensureMenuWithinViewport()}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.onBodyClick,!1)}},{key:"addToNewCollectionIndex",value:function(){var e=this.props.collections;return e.length>=L?L+2:e.length+1}},{key:"addToAnotherCollectionsIndex",value:function(){return L+1}},{key:"sortedCollections",value:function(){var e=this.props,t=e.contentUri,n=e.collections,i=[];return l.default.map(n,function(e){p.collectionHasContent(e,t)&&i.push(e)}),l.default.map(n,function(e){p.collectionHasContent(e,t)||i.push(e)}),i}},{key:"ensureMenuWithinViewport",value:function(){var e=(0,k.default)(".menu-dropdown-region"),t=e.closest(".collections-dropdown").find(".menu-control").find("svg");if(e.length&&t.length){var n=(0,k.default)(document).width()-22,i=38,r=e.width(),o=e[0].getBoundingClientRect().left;if(r>o){var a=i;o+r+i>=n&&(a=Math.max(n-(o+r),i-o)),e.css({left:a+"px",right:"auto","transform-origin":"bottom left"})}}}},{key:"onBodyClick",value:function(e){(0,k.default)(e.target).closest(".modal-wrapper").length||(e.preventDefault(),this.setState({showAddToAnotherCollectionModal:!1,showCreateCollectionModal:!1}),document.body.removeEventListener("click",this.onBodyClick,!1))}},{key:"onCreateNewCollectionClick",value:function(e){e.preventDefault(),this.setState({showCreateCollectionModal:!0}),(0,C.trackAddContentToNewCollection)(this.addToNewCollectionIndex()),document.body.addEventListener("click",this.onBodyClick,!1)}},{key:"onAddToAnotherCollectionClick",value:function(e){e.preventDefault(),this.setState({showAddToAnotherCollectionModal:!0}),(0,C.trackAddContentToAnotherCollection)(this.addToAnotherCollectionsIndex()),document.body.addEventListener("click",this.onBodyClick,!1)}},{key:"onModalCloseClick",value:function(e){return this.props.isFetching?(e.preventDefault(),!1):(e&&e.preventDefault(),this.setState({showAddToAnotherCollectionModal:!1,showCreateCollectionModal:!1}),!0)}},{key:"getOrderedCollections",value:function(){var e=this.props.collections,t=this.state.collectionOrder,n=[];return l.default.map(t,function(t){n.push(l.default.find(e,{id:t}))}),n}},{key:"render",value:function(){var e=this,t=this.props,n=t.contentUri,i=t.isFetching,o=this.getOrderedCollections(),s="items-"+o.length,c=o.length<=L?" border-top":"",d={pathname:u.ROOT_URL+"new-collection/",state:{contentUri:n}},h=l.default.takeWhile(o,function(e,t){return t<L}),f=p.sortedCollections(o);return a.default.createElement("div",null,a.default.createElement(w.default,{transitionAppear:!0,transitionAppearTimeout:300,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"scale-right-to-left"},a.default.createElement("ul",{className:"menu-dropdown-region "+s},h.map(function(t,i){return a.default.createElement(m.default,{key:i,index:i,collection:t,contentUri:n,inLibrary:e.props.inLibrary})}),o.length>L&&a.default.createElement("li",{className:"dropdown-item border-top"},a.default.createElement("a",{href:"#",className:"js-test-add-to-another-collection js-add-to-another-collection",onClick:this.onAddToAnotherCollectionClick},u.ADD_TO_ANOTHER_COLLECTION_BUTTON_TEXT)),a.default.createElement("li",{className:"dropdown-item "+c},this.props.useModal&&a.default.createElement("a",{href:"#",className:"js-test-create-new-collection js-add-to-new-collection",onClick:this.onCreateNewCollectionClick},u.ADD_TO_A_NEW_COLLECTION_BUTTON_TEXT),!this.props.useModal&&a.default.createElement(r.Link,{to:d,className:"js-test-create-new-collection js-add-to-new-collection"},u.ADD_TO_A_NEW_COLLECTION_BUTTON_TEXT)))),this.state.showAddToAnotherCollectionModal&&a.default.createElement(v.default,{collections:f,contentUri:n,errors:this.props.errors,onModalCloseClick:this.onModalCloseClick}),this.state.showCreateCollectionModal&&a.default.createElement(b.default,{collections:o,contentUri:n,errors:this.props.errors,isFetching:i,onModalCloseClick:this.onModalCloseClick,useModal:this.props.useModal,onCreateCollection:this.onCreateCollection}))}}]),MenuLayout}(o.Component);t.default=E,E.propTypes={collections:f.collectionList.isRequired,contentUri:f.string.isRequired,errors:f.errorsObject,isFetching:f.bool.isRequired,inLibrary:f.bool.isRequired,useModal:f.bool},e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(3),o=_interopRequireDefault(r),a=n(13),s=_interopRequireWildcard(a),l=n(9),c=_interopRequireWildcard(l),u=n(116),d=_interopRequireDefault(u),p=n(211),h=_interopRequireDefault(p),f=function(e){function TopicsLayout(){_classCallCheck(this,TopicsLayout);var e=_possibleConstructorReturn(this,(TopicsLayout.__proto__||Object.getPrototypeOf(TopicsLayout)).call(this));return e.toggleShowAll=e.toggleShowAll.bind(e),e.getButtonLabel=e.getButtonLabel.bind(e),e.state={showAll:!1},e}return _inherits(TopicsLayout,e),i(TopicsLayout,[{key:"getButtonLabel",value:function(){return this.state.showAll?"Fewer topics":"More topics"}},{key:"toggleShowAll",value:function(e){e.preventDefault(),this.setState({showAll:!this.state.showAll})}},{key:"render",value:function(){var e=this.props,t=e.collection,n=e.selectedTopic,i=e.topics,r=e.contentCount,a=t?t.name:"",l=n!==s.DEFAULT_TOPIC?n.name:a,c=1===r?"item":"items",u=this.state.showAll;return o.default.createElement("div",{className:"wrap-topics"},o.default.createElement(d.default,{transitionAppear:!0,transitionAppearTimeout:600,transitionEnterTimeout:600,transitionLeaveTimeout:600,transitionName:"topic-transition"},o.default.createElement("ul",{className:"library-topics"},i.length>0&&o.default.createElement(h.default,{index:0,key:s.DEFAULT_TOPIC.slug,topic:s.DEFAULT_TOPIC,selected:n}),i.map(function(e,t){return!(t>=s.MAX_TOPICS&&!u)&&o.default.createElement(h.default,{key:e.slug,index:t,topic:e,selected:n})}))),i.length>s.MAX_TOPICS&&o.default.createElement("div",{className:"library-wrap-toggle-topics"},o.default.createElement("a",{href:"#",onClick:this.toggleShowAll},this.getButtonLabel())),o.default.createElement("div",{className:"library-topics-count"},r," ",c," in ",l))}}]),TopicsLayout}(r.Component);t.default=f,f.propTypes={collection:c.collection.isRequired,contentCount:c.number.isRequired,selectedTopic:c.topic.isRequired,topics:c.topicList.isRequired},e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(3),o=_interopRequireDefault(r),a=n(9),s=_interopRequireWildcard(a),l=n(220),c=_interopRequireDefault(l),u=n(221),d=_interopRequireDefault(u),p=n(182),h=_interopRequireDefault(p),f=n(225),_=_interopRequireDefault(f),m=n(227),g=_interopRequireDefault(m),v=n(22),y=function(e){function ContentItem(){_classCallCheck(this,ContentItem);var e=_possibleConstructorReturn(this,(ContentItem.__proto__||Object.getPrototypeOf(ContentItem)).call(this));return e.getTopicUrl=e.getTopicUrl.bind(e),e.hasProgress=e.hasProgress.bind(e),e.onQueueClick=e.onQueueClick.bind(e),e.publisherText=e.publisherText.bind(e),e.state={showAddingToQueueMessage:!1,showRemovingFromQueueMessage:!1,playlistsEnabledClass:"playlists-enabled"},e.onContentAccess=e.onContentAccess.bind(e),e}return _inherits(ContentItem,e),i(ContentItem,[{key:"publisherText",value:function(e){function publisherText(t,n){return e.apply(this,arguments)}return publisherText.toString=function(){return e.toString()},publisherText}(function(e,t){if(null===e||!Array.isArray(e))return"";var n=new Date(t);return null==n?publisherText:[n.toLocaleString("en",{month:"long"})+" "+n.getFullYear()].concat(e).join(", ")})},{key:"onContentAccess",value:function(){var e=this.props.index;(0,v.trackContentAccessed)(e+1)}},{key:"getTopicUrl",value:function(e){return"/topics/"+e.slug}},{key:"getTitleType",value:function(){var e=this.props.item,t={chapter:"book section","learning-path":"video"};return e.content_format&&t[e.content_format]?t[e.content_format].toUpperCase():e.content_format?e.content_format.replace(/-/g," ").toUpperCase():"BOOK"}},{key:"mediaType",value:function(){var e=this.props.item,t={article:"book",audiobook:"audiobook","audio-clip":"audiobook",book:"book",chapter:"book","learning-path":"video",video:"video","video-clip":"video"};return e.content_format&&t[e.content_format]?t[e.content_format]:"book"}},{key:"onQueueClick",value:function(e){var t=this;"add"===e?this.setState({showAddingToQueueMessage:!0}):"remove"===e&&this.setState({showRemovingFromQueueMessage:!0}),setTimeout(function(){t.setState({showAddingToQueueMessage:!1,showRemovingFromQueueMessage:!1})},800)}},{key:"hasProgress",value:function(){var e=this.props.item;return!!e.progress&&e.progress>0}},{key:"onTouchStart",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.item,n=this.state,i=n.showAddingToQueueMessage,r=n.showRemovingFromQueueMessage,a=["t-title-card","title-card"],s=["t-title-image","title-image"];return i?a.push("title-queue-added"):r&&a.push("title-queue-removed"),o.default.createElement("li",{key:t.title,className:a.join(" "),role:"link",onTouchStart:this.onTouchStart.bind(this)},o.default.createElement("div",{className:"title-status title-status-add-to-queue"},o.default.createElement("div",{className:"title-status-content"},o.default.createElement(c.default,null),o.default.createElement("p",null,"Adding to",o.default.createElement("br",null),"your queue..."))),o.default.createElement("div",{className:"title-status title-status-remove-from-queue"},o.default.createElement("div",{className:"title-status-content"},o.default.createElement(_.default,null),o.default.createElement("p",null,"Removing from",o.default.createElement("br",null),"your queue..."))),o.default.createElement("div",{className:s.join(" ")},o.default.createElement("a",{href:t.continue_url,onClick:this.onContentAccess},o.default.createElement("img",{src:t.cover_image_url+"360h/",alt:"presentation"}))),o.default.createElement("div",{className:"title-type t-title-type"},this.getTitleType()),o.default.createElement("a",{href:t.continue_url,className:"title-link",onClick:this.onContentAccess},t.title),t.authors.length>0&&o.default.createElement("div",{className:"t-title-authors title-authors"},"by ",t.authors.join(", ")),o.default.createElement("div",{className:"t-title-publisher title-publisher"},this.publisherText(t.publishers,t.issued)),o.default.createElement("div",{className:"title-topics"},t.topics.map(function(t,n){return o.default.createElement("a",{key:n,href:e.getTopicUrl(t),className:"topic"},t.name)})),o.default.createElement("span",{className:"title-rating-container small-stars"},o.default.createElement("div",{className:"review-report","data-identifier":t.identifier,"data-title":t.title,"data-format":t.content_format})),o.default.createElement("div",{className:"title-footer"},"book"===this.mediaType()&&o.default.createElement("span",{className:"title-book-icon"},o.default.createElement(d.default,null)),"video"===this.mediaType()&&o.default.createElement("span",{className:"title-video-icon"},o.default.createElement(g.default,null)),this.hasProgress()&&o.default.createElement("div",null,o.default.createElement("span",{className:"title-progress-bar"},o.default.createElement("span",{className:"title-progress-completed",style:{width:t.progress+"%"}})),o.default.createElement("span",{className:"title-progress-text"},Math.ceil(t.progress),"% Complete"),o.default.createElement("span",{className:"title-rating-container small-stars"},o.default.createElement("span",{className:"js-title-rating review-stars review-stars-readonly"}),o.default.createElement("span",{className:"js-title-rating-number title-rating-number"})))),o.default.createElement("div",{className:"title-hover "+this.state.playlistsEnabledClass},o.default.createElement("span",{className:"title-start-button-container"},o.default.createElement("a",{href:t.continue_url,className:"button title-start"},this.hasProgress()&&"Continue",!this.hasProgress()&&"Start")),o.default.createElement(h.default,{align:"right",contentUri:t.api_url,onQueueClick:this.onQueueClick,inLibrary:!0})))}}]),ContentItem}(r.Component);t.default=y,y.propTypes={item:s.combinedMetadata.isRequired,index:s.number.isRequired},e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(255),o=_interopRequireDefault(r),a=n(3),s=_interopRequireDefault(a),l=n(13),c=_interopRequireWildcard(l),u=n(9),d=_interopRequireWildcard(u),p=n(183),h=_interopRequireDefault(p),f=n(164),_=_interopRequireDefault(f),m=function(e){function EditCollectionView(){return _classCallCheck(this,EditCollectionView),_possibleConstructorReturn(this,(EditCollectionView.__proto__||Object.getPrototypeOf(EditCollectionView)).apply(this,arguments))}return _inherits(EditCollectionView,e),i(EditCollectionView,[{key:"componentDidMount",value:function(){(0,o.default)(document.querySelector("textarea")),this.nameInput.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentAction,i=t.description,r=t.error,o=t.errorDescription,a=t.isFetching,l=t.name,u=t.success,d=a&&n===c.EDIT_COLLECTION_ACTIONS.UPDATE,p=d?"fetching":"",f=a&&n===c.EDIT_COLLECTION_ACTIONS.DUPLICATE,m=f?"fetching":"";return s.default.createElement("form",{className:"edit-collection-container",onSubmit:this.props.saveHandler},s.default.createElement("div",{className:"wrap-collection-name-input"},s.default.createElement("div",null,s.default.createElement("input",{autoFocus:!0,id:"title",type:"text",onChange:this.props.onNameChangeHandler,className:"collection-name-input t-collection-name-input "+(r.css_class||u.css_class),disabled:a,value:l,ref:function(t){return e.nameInput=t}}),d&&s.default.createElement("label",{htmlFor:"title"},"Working... saving your changes"),u.exists&&s.default.createElement("label",{htmlFor:"title",className:"t-success "+u.css_class},"Changes saved"),r.exists&&s.default.createElement("label",{htmlFor:"title",className:"t-error "+r.css_class},r.description))),s.default.createElement("div",{className:"wrap-description-and-content"},s.default.createElement("div",{className:"wrap-textarea"},s.default.createElement("textarea",{name:"description",className:"collection-description-textarea t-collection-description-textarea "+o.css_class,placeholder:c.NEW_COLLECTION_DESCRIPTION,onChange:this.props.onDescriptionChangeHandler,disabled:a,value:i}),o.exists&&s.default.createElement("label",{htmlFor:"description",className:"t-error "+o.css_class},o.description)),s.default.createElement("ul",{className:"actions"},s.default.createElement("li",null,s.default.createElement("button",{className:"cancel-button t-cancel-button button-secondary",onClick:this.props.onCancelEditHandler,disabled:a,type:"button"},"Cancel")),s.default.createElement("li",null,s.default.createElement("button",{className:"save-button t-save-button button-primary "+p,disabled:a||r.exists||o.exists,type:"submit"},"Save",d&&s.default.createElement(_.default,null))))),s.default.createElement("ul",{className:"actions-secondary"},s.default.createElement("li",null,s.default.createElement("button",{className:"delete-button",onClick:this.props.deleteCollectionHandler,disabled:a,type:"button"},"Delete")),s.default.createElement("li",null,s.default.createElement("button",{className:"duplicate-button "+m,onClick:this.props.duplicateCollectionHandler,disabled:a,type:"button"},"Duplicate",f&&s.default.createElement(_.default,null)))),s.default.createElement("div",{className:"wrap-content"},s.default.createElement("div",{className:"disabled-view-overlay"}),s.default.createElement(h.default,{noSpinner:!0})))}}]),EditCollectionView}(a.Component);t.default=m,m.propTypes={currentAction:d.string,description:d.string.isRequired,deleteCollectionHandler:d.func.isRequired,duplicateCollectionHandler:d.func.isRequired,error:d.errorObject.isRequired,errorDescription:d.errorObject.isRequired,isFetching:d.bool.isRequired,name:d.string.isRequired,onCancelEditHandler:d.func.isRequired,onDescriptionChangeHandler:d.func.isRequired,onNameChangeHandler:d.func.isRequired,saveHandler:d.func.isRequired,success:d.successObject.isRequired},e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PureFatalError=t.mapStateToProps=void 0;var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(3),o=_interopRequireDefault(r),a=n(111),s=n(9),l=_interopRequireWildcard(s),c=n(156),u=_interopRequireDefault(c),d=n(158),p=_interopRequireDefault(d),h=n(157),f=_interopRequireDefault(h),_=n(27),m=_interopRequireWildcard(_),g=function(e){function FatalError(){return _classCallCheck(this,FatalError),_possibleConstructorReturn(this,(FatalError.__proto__||Object.getPrototypeOf(FatalError)).apply(this,arguments))}return _inherits(FatalError,e),i(FatalError,[{key:"getToolbarButtons",value:function(){return[o.default.createElement(p.default,{isDisabled:!0}),o.default.createElement(f.default,{isDisabled:!0})]}},{key:"render",value:function(){return o.default.createElement(u.default,{toolbarButtons:this.getToolbarButtons()})}}]),FatalError}(r.Component);g.propTypes={errors:l.errorsObject};var v=t.mapStateToProps=function(e){return{errors:m.getErrors(e)}};t.default=(0,a.connect)(v)(g),t.PureFatalError=g},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=n(9),a=_interopRequireWildcard(o),s=function(e){var t=e.buttons;return r.default.createElement("ul",{className:"library-action-header"},t.map(function(e,t){return r.default.createElement("li",{key:t},e)}))};s.propTypes={buttons:a.arrayOf(a.node).isRequired},t.default=s,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=n(119),a=n(15),s=_interopRequireWildcard(a),l=n(9),c=_interopRequireWildcard(l),u=function(e){var t=e.active,n=e.collection,i=e.onClick,a=s.buildShowCollectionRoute(n),l=t?"active":"";return r.default.createElement("li",{className:"dropdown-item"},r.default.createElement(o.Link,{className:l,to:a,onClick:i},n.name))};u.propTypes={active:c.bool.isRequired,collection:c.collection.isRequired,onClick:c.func.isRequired},t.default=u,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(3),o=_interopRequireDefault(r),a=n(116),s=_interopRequireDefault(a),l=n(113),c=_interopRequireWildcard(l),u=n(9),d=_interopRequireWildcard(u),p=n(24),h=_interopRequireDefault(p),f=n(22),_=c.actions.selectTopic,m=function(e){function TopicItem(){_classCallCheck(this,TopicItem);var e=_possibleConstructorReturn(this,(TopicItem.__proto__||Object.getPrototypeOf(TopicItem)).call(this));return e.onTopicItemClick=e.onTopicItemClick.bind(e),e}return _inherits(TopicItem,e),i(TopicItem,[{key:"onTopicItemClick",value:function(){var e=this.props,t=e.index,n=e.topic;h.default.dispatch(_(n.slug)),(0,f.trackFilterByTopic)(n.name,t+2)}},{key:"render",value:function(){var e=this.props,t=e.topic,n=e.selected,i=t===n,r=i?"active":"";return o.default.createElement("li",{className:"topic-item js-topic-item"},o.default.createElement(s.default,{transitionAppear:!0,transitionAppearTimeout:200,transitionEnterTimeout:200,transitionLeaveTimeout:200,transitionName:"library-fade"},o.default.createElement("a",{onClick:this.onTopicItemClick,className:r},t.name)))}}]),TopicItem}(r.Component);t.default=m,m.propTypes={index:d.number.isRequired,selected:d.topic.isRequired,topic:d.topic.isRequired},e.exports=t.default},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function maybe(e){return{result:e,exists:!(null===e)}}function cacheMetadataResponse(e){e.data.forEach(function(e){var t=Object.assign({_cached_timestamp:Date.now()},e);try{f.default.setItem(e.api_url,JSON.stringify(t))}catch(e){}})}function getCachedMetadataResponse(e){var t=[];return{URIs:e.filter(function(e){var n=maybe(f.default.getItem(e)),i=n.exists,r=n.result;if(i){var o=JSON.parse(r);if(Date.now()-o._cached_timestamp>l.METADATA_EXPIRATION)return f.default.removeItem(e),!0;delete o._cached_timestamp,t.push(o)}return!i}),results:t}}function getAllCollections(){return function(e){var t=f.default.getItem(l.LOCAL_STORAGE_ETAG_KEY),n=f.default.getItem(l.LOCAL_STORAGE_COLLECTIONS_KEY),i=Object.assign({},v);return t&&n&&(i["If-None-Match"]=t),e((0,_.ajaxRequest)()),r.default.get(l.BOWERBIRD_ENDPOINT+"/collections/",{headers:i}).then(function(t){try{f.default.setItem(l.LOCAL_STORAGE_ETAG_KEY,t.headers.etag),f.default.setItem(l.LOCAL_STORAGE_COLLECTIONS_KEY,JSON.stringify(t.data))}catch(e){}e((0,_.getCollectionsSuccess)(t.data))}).catch(function(t){if(!t.response||304!==t.response.status)throw e(m(t,g.FATAL,l.ERROR_FATAL)),t;e((0,_.getCollectionsSuccess)(JSON.parse(n)))})}}function createCollection(e){return function(t){return t((0,_.ajaxRequest)()),r.default.post(l.BOWERBIRD_ENDPOINT+"/collections/",e,{headers:v}).then(function(e){return t((0,_.createCollectionSuccess)(e.data))}).catch(function(e){throw t(m(e,g.WARN,l.ERROR_CREATE_COLLECTION)),e})}}function addContentToCollection(e,t){return function(n){return r.default.post(l.BOWERBIRD_ENDPOINT+"/collections/"+e+"/add-content/",{content:u.normalizeContentUriList(t)},{headers:v}).then(function(){return n((0,_.addContentSuccess)(e,t))}).catch(function(e){throw n(m(e,g.WARN,l.ERROR_ADD_CONTENT_TO_COLLECTION)),e})}}function removeContentFromCollection(e,t){return function(n){return r.default.post(l.BOWERBIRD_ENDPOINT+"/collections/"+e+"/remove-content/",{content:t},{headers:v}).then(function(){return n((0,_.removeContentSuccess)(e,t))}).catch(function(e){throw n(m(e,g.WARN,l.ERROR_REMOVE_CONTENT_FROM_COLLECTION)),e})}}function updateSingleCollection(e){return function(t){return t((0,_.ajaxRequest)()),r.default.patch(l.BOWERBIRD_ENDPOINT+"/collections/"+e.id+"/",e,{headers:v}).then(function(e){return t((0,_.updateCollectionSuccess)(e.data))}).catch(function(e){throw t(m(e,g.WARN,l.ERROR_UPDATE_COLLECTION)),e})}}function deleteSingleCollection(e){return function(t){return t((0,_.ajaxRequest)()),r.default.delete(l.BOWERBIRD_ENDPOINT+"/collections/"+e+"/",{headers:v}).then(function(){return t((0,_.deleteCollectionSuccess)(e))}).catch(function(e){throw t(m(e,g.WARN,l.ERROR_DELETE_SINGLE_COLLECTION)),e})}}function addToQueue(e,t){return function(n){return r.default.post(""+l.QUEUE_ENDPOINT,t,{headers:{"X-CSRFToken":a.default.cookie("csrfsafari")}}).then(function(){n((0,_.addContentSuccess)(e,t))}).catch(function(e){throw n(m(e,g.WARN,l.ERROR_ADD_QUEUE)),e})}}function removeFromQueue(e,t){return function(n){return a.default.ajax({type:"DELETE",url:l.QUEUE_ENDPOINT,data:JSON.stringify(t),contentType:"application/json",dataType:"text",headers:{"X-CSRFToken":a.default.cookie("csrfsafari")}}).then(function(){n((0,_.removeContentSuccess)(e,t))}).fail(function(e){n(m(e,g.WARN,l.ERROR_REMOVE_QUEUE))})}}function callContentMetadataEndpoint(e){var t=getCachedMetadataResponse(e),n=t.URIs,i=t.results;return 0===n.length?Promise.resolve({data:i,status:200,statusText:"OK",headers:{},config:{}}):new Promise(function(e,t){r.default.post(l.CONTENT_METADATA_ENDPOINT+"?fields=api_url,authors,content_format,continue_url,cover_image_url,identifier,title,url,issued,publishers",{urls:n},{headers:{"X-CSRFToken":a.default.cookie("csrfsafari")}}).then(function(t){cacheMetadataResponse(t);var n=t;n.data=t.data.concat(i),e(n)}).catch(function(){t()})})}function getContentMetadata(e){return function(t){return t((0,_.ajaxRequest)()),callContentMetadataEndpoint(e).then(function(e){return t((0,_.getContentMetadataSuccess)(e.data))}).catch(function(){return t((0,_.ajaxRequestDidError)())})}}function callUserProgressEndpoint(e){return r.default.post(l.USER_PROGRESS_ENDPOINT+"?fields=api_url,progress",{urls:e},{headers:{"X-CSRFToken":a.default.cookie("csrfsafari")}})}function getMetadataAndProgress(e){return function(t){t((0,_.ajaxRequest)());var n=callContentMetadataEndpoint(e),i=callUserProgressEndpoint(e);return Promise.all([n,i]).then(function(n){t((0,_.contentUriMetadataRequest)(e)),t((0,_.getContentMetadataSuccess)(n[0].data)),t((0,_.getUserProgressSuccess)(n[1].data))}).catch(function(){return t((0,_.ajaxRequestDidError)())})}}Object.defineProperty(t,"__esModule",{value:!0}),t.cacheMetadataResponse=cacheMetadataResponse,t.getCachedMetadataResponse=getCachedMetadataResponse,t.getAllCollections=getAllCollections,t.createCollection=createCollection,t.addContentToCollection=addContentToCollection,t.removeContentFromCollection=removeContentFromCollection,t.updateSingleCollection=updateSingleCollection,t.deleteSingleCollection=deleteSingleCollection,t.addToQueue=addToQueue,t.removeFromQueue=removeFromQueue,t.callContentMetadataEndpoint=callContentMetadataEndpoint,t.getContentMetadata=getContentMetadata,t.callUserProgressEndpoint=callUserProgressEndpoint,t.getMetadataAndProgress=getMetadataAndProgress;var i=n(167),r=_interopRequireDefault(i),o=n(1),a=_interopRequireDefault(o),s=n(13),l=_interopRequireWildcard(s),c=n(15),u=_interopRequireWildcard(c),d=n(120),p=_interopRequireWildcard(d),h=n(262),f=_interopRequireDefault(h),_=n(187);n(5);var m=p.actions.apiRequestDidError,g=p.errorLevel,v={Accept:"application/json; version="+l.BOWERBIRD_API_VERSION}},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=n(2),r=_interopRequireDefault(i),o=n(263),a=_interopRequireDefault(o),s=n(120),l=_interopRequireWildcard(s),c=n(15),u=_interopRequireWildcard(c),d=n(170),p=_interopRequireWildcard(d),h=t.initialState={collections:[],contentMetadata:{},didError:!1,isFetching:!1,requestedContentUris:[],topicsByContentUri:{}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.default.cloneDeep(e.collections),i=r.default.cloneDeep(e.topicsByContentUri),o=r.default.cloneDeep(e.contentMetadata),s=void 0,c=void 0,d=void 0;switch(t.type){case p.AJAX_REQUEST:return Object.assign({},e,{didError:!1,isFetching:!0});case p.AJAX_REQUEST_DID_ERROR:return Object.assign({},e,{didError:!0,isFetching:!1});case p.GET_COLLECTIONS_SUCCESS:var f=[];return r.default.forEach(t.collections,function(e){r.default.has(e,"is_owned")&&!e.is_owned||(f.push(e),r.default.forEach(e.content,function(e){i[e.api_url]=e.metadata.topics}))}),Object.assign({},e,{collections:f,didError:!1,isFetching:!1,topicsByContentUri:i});case p.DELETE_COLLECTION_SUCCESS:return c=n.findIndex(function(e){return e.id===t.collectionId}),d=(0,a.default)(n,{$splice:[[c,1]]}),Object.assign({},e,{collections:d,didError:!1,isFetching:!1});case p.UPDATE_COLLECTION_SUCCESS:return s=u.moveCollectionToFront(n,t.collection.id),s[0]=t.collection,Object.assign({},e,{collections:s,didError:!1,isFetching:!1});case p.CREATE_COLLECTION_SUCCESS:return n.unshift(t.collection),Object.assign({},e,{collections:n,didError:!1,isFetching:!1});case p.ADD_CONTENT_SUCCESS:return n=u.addContentToCollectionsState(n,t.collectionId,t.content),s=u.moveCollectionToFront(n,t.collectionId),Object.assign({},e,{collections:s,didError:!1,isFetching:!1});case p.REMOVE_CONTENT_SUCCESS:return n=u.removeContentFromCollectionsState(n,t.collectionId,t.content),s=u.moveCollectionToFront(n,t.collectionId),Object.assign({},e,{collections:s,didError:!1,isFetching:!1});case p.CONTENT_URI_METADATA_REQUEST:return Object.assign({},e,{requestedContentUris:r.default.union(e.requestedContentUris,t.contentUris)});case p.GET_CONTENT_METADATA_SUCCESS:return r.default.forEach(t.metadata,function(e){var t=Object.assign({},o[e.api_url]||{},e);o[e.api_url]=t}),Object.assign({},e,{contentMetadata:o,didError:!1,isFetching:!1});case p.GET_USER_PROGRESS_SUCCESS:return r.default.forEach(t.progress,function(e){o[e.api_url]||(o[e.api_url]={}),o[e.api_url].progress=e.progress}),Object.assign({},e,{contentMetadata:o,didError:!1,isFetching:!1});case l.types.API_REQUEST_DID_ERROR:return Object.assign({},e,{didError:!0,isFetching:!1})}return e}},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function selectCollection(e){return{type:r.SELECT_COLLECTION,collectionId:e}}function selectTopic(e){return{type:r.SELECT_TOPIC,topicSlug:e}}function setPageSize(e){return{type:r.SET_PAGE_SIZE,size:e}}function nextPage(){return{type:r.NEXT_PAGE}}function disableAnimateCollectionContent(){return{type:r.DISABLE_ANIMATE_COLLECTION_CONTENT}}function enableAnimateCollectionContent(){return{type:r.ENABLE_ANIMATE_COLLECTION_CONTENT}}Object.defineProperty(t,"__esModule",{value:!0}),t.selectCollection=selectCollection,t.selectTopic=selectTopic,t.setPageSize=setPageSize,t.nextPage=nextPage,t.disableAnimateCollectionContent=disableAnimateCollectionContent,t.enableAnimateCollectionContent=enableAnimateCollectionContent;var i=n(171),r=_interopRequireWildcard(i)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=n(13),r=_interopRequireWildcard(i),o=n(171),a=_interopRequireWildcard(o),s=t.initialState={animateCollectionContent:!1,pageSize:r.CONTENT_ITEMS_PER_PAGINATION,selectedCollectionId:null,selectedTopicSlug:r.DEFAULT_TOPIC};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case a.SELECT_COLLECTION:return Object.assign({},e,{selectedCollectionId:t.collectionId});case a.SELECT_TOPIC:return Object.assign({},e,{selectedTopicSlug:t.topicSlug});case a.SET_PAGE_SIZE:return Object.assign({},e,{pageSize:t.size});case a.NEXT_PAGE:return Object.assign({},e,{pageSize:e.pageSize+r.CONTENT_ITEMS_PER_PAGINATION});case a.DISABLE_ANIMATE_COLLECTION_CONTENT:return Object.assign({},e,{animateCollectionContent:!1});case a.ENABLE_ANIMATE_COLLECTION_CONTENT:return Object.assign({},e,{animateCollectionContent:!0})}return e}},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function apiRequestDidError(e,t,n){return{error:e,level:t,message:n,type:r.API_REQUEST_DID_ERROR}}function apiRequestResetError(){return{type:r.API_REQUEST_RESET_ERROR}}function flashError(e){return{type:r.FLASH_ERROR,message:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.apiRequestDidError=apiRequestDidError,t.apiRequestResetError=apiRequestResetError,t.flashError=flashError;var i=n(172),r=_interopRequireWildcard(i)},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=t.errorLevel=void 0;var i=n(172),r=_interopRequireWildcard(i),o=t.errorLevel={FATAL:"FATAL",WARN:"WARN"},a=t.initialState={didError:!1,errorLevel:null,message:null,responseText:null,statusCode:null,url:null,timestamp:null};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case r.API_REQUEST_DID_ERROR:return t.error.status?Object.assign({},e,{didError:!0,errorLevel:t.level,message:t.message,responseText:t.error.statusText,statusCode:t.error.status,timestamp:Date.now(),url:""}):Object.assign({},e,{didError:!0,errorLevel:t.level,message:t.message,responseText:t.error.response.statusText,statusCode:t.error.response.status,timestamp:Date.now(),url:t.error.response.config.url});case r.FLASH_ERROR:return Object.assign({},e,{didError:!0,errorLevel:o.WARN,message:t.message,timestamp:Date.now()})}return e}},function(e,t,n){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(195),r=n(112),o=_interopRequireWildcard(r),a=n(113),s=_interopRequireWildcard(a),l=n(120),c=_interopRequireWildcard(l),u=(0,i.combineReducers)({collectionsState:o.reducer,contentState:s.reducer,errorState:c.reducer});t.default=u,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function onLeaveDisableCollectionContentAnimation(){return function(){return _.default.dispatch(m())}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(113),r=_interopRequireWildcard(i),o=n(3),a=_interopRequireDefault(o),s=n(119),l=n(199),c=_interopRequireDefault(l),u=n(201),d=_interopRequireDefault(u),p=n(203),h=_interopRequireDefault(p),f=n(24),_=_interopRequireDefault(f),m=r.actions.disableAnimateCollectionContent;t.default=a.default.createElement(s.Router,{history:s.browserHistory},a.default.createElement(s.Route,{path:"/c/",component:h.default,onLeave:onLeaveDisableCollectionContentAnimation(_.default)}),a.default.createElement(s.Route,{path:"/c/topic/:topic_slug/",component:h.default,onLeave:onLeaveDisableCollectionContentAnimation(_.default)}),a.default.createElement(s.Route,{path:"/c/new-collection/",component:c.default}),a.default.createElement(s.Route,{path:"/c/edit-collection/:collection_id/",component:d.default}),a.default.createElement(s.Route,{path:"/c/collection/:collection_id/topic/:topic_slug/",component:h.default,onLeave:onLeaveDisableCollectionContentAnimation(_.default)}),a.default.createElement(s.Route,{path:"/c/collection/:collection_id/",component:h.default,onLeave:onLeaveDisableCollectionContentAnimation(_.default)})),e.exports=t.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=function(){return r.default.createElement("svg",{viewBox:"0 0 24 16",version:"1.1"},r.default.createElement("title",null,"add to queue"),r.default.createElement("defs",null),r.default.createElement("g",{id:"Invision",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"off",transform:"translate(-272.000000, -521.000000)"},r.default.createElement("g",{id:"Group",transform:"translate(64.000000, 504.000000)"},r.default.createElement("g",{id:"queue-copy-2",transform:"translate(196.000000, 10.000000)"},r.default.createElement("g",{id:"add-to-queue",transform:"translate(12.000000, 5.000000)"},r.default.createElement("path",{d:"M7.61538462,10.8201978 C7.49639363,10.8201978 7.37988338,10.7906497 7.26585036,10.7315526 L0.401592548,7.07493812 C0.277643611,7.01091627 0.179725419,6.91857844 0.107835036,6.79792187 C0.0359446526,6.6772653 0,6.54799235 0,6.41009912 C0,6.2722059 0.0359446526,6.14416412 0.107835036,6.02596993 C0.179725419,5.90777573 0.277643611,5.81420674 0.401592548,5.74526013 L7.26585036,2.09603278 C7.49887437,1.96798907 7.73189487,1.96798907 7.96491887,2.09603278 L14.8366136,5.74526013 C15.0993854,5.88807811 15.2307692,6.10968889 15.2307692,6.41009912 C15.2307692,6.72035887 15.0969064,6.94196965 14.8291767,7.07493812 L7.96491887,10.7315526 C7.85088585,10.7906497 7.7343756,10.8201978 7.61538462,10.8201978 L7.61538462,10.8201978 L7.61538462,10.8201978 Z M2.3500601,6.41009912 L7.61538462,9.21719708 L12.8807092,6.41009912 L7.61538462,3.61038826 L2.3500601,6.41009912 L2.3500601,6.41009912 Z M14.8291767,8.90693889 C15.0969064,9.04975687 15.2307692,9.27136764 15.2307692,9.57177788 C15.2307692,9.87218811 15.0993854,10.0937989 14.8366136,10.2366169 L7.96491887,13.8858442 C7.85088585,13.9449413 7.7343756,13.9744894 7.61538462,13.9744894 C7.49639363,13.9744894 7.37988338,13.9449413 7.26585036,13.8858442 L0.401592548,10.2366169 C0.133862845,10.0937989 0,9.87218811 0,9.57177788 C0,9.2762924 0.131383902,9.05468162 0.39415565,8.90693889 L0.706505408,8.74442269 L7.61538462,12.3714887 L14.5242638,8.74442269 L14.8291767,8.90693889 L14.8291767,8.90693889 Z M14.8291767,12.0686176 C15.0969064,12.2015861 15.2307692,12.4231969 15.2307692,12.7334566 C15.2307692,13.0338669 15.0993854,13.2554777 14.8366136,13.3982957 L7.96491887,17.047523 C7.85088585,17.1066201 7.7343756,17.1361682 7.61538462,17.1361682 C7.49639363,17.1361682 7.37988338,17.1066201 7.26585036,17.047523 L0.401592548,13.3982957 C0.277643611,13.329349 0.179725419,13.23578 0.107835036,13.1175858 C0.0359446526,12.9993917 0,12.8713499 0,12.7334566 C0,12.5955634 0.0359446526,12.4662905 0.107835036,12.3456339 C0.179725419,12.2249773 0.27516467,12.1326395 0.39415565,12.0686176 L0.706505408,11.9061015 L7.61538462,15.5331675 L14.5242638,11.9061015 L14.8291767,12.0686176 L14.8291767,12.0686176 Z",id:"icon--queue-copy",fill:"#E98300"}),r.default.createElement("g",{id:"add-to-queue-check",transform:"translate(20.303301, 4.596194) rotate(-315.000000) translate(-20.303301, -4.596194) translate(17.803301, 0.596194)",stroke:"#E98300",fill:"#D8D8D8"},r.default.createElement("rect",{id:"Rectangle-598",x:"0.25",y:"5.75",width:"4",height:"1.5",rx:"1"}),r.default.createElement("rect",{id:"Rectangle-605",x:"2.75",y:"0.25",width:"1.5",height:"7",rx:"1"}))))))))};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=function(){return r.default.createElement("svg",{width:"10",height:"12",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 10",version:"1.1",fill:"#9B9B9B"},r.default.createElement("desc",null,"Book icon"),r.default.createElement("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd"},r.default.createElement("path",{d:"M7.93 8.27C7.89 8.31 7.84 8.33 7.79 8.33L7.37 8.33C7.31 8.33 7.26 8.31 7.22 8.27 7.18 8.23 7.16 8.18 7.16 8.13L7.16 1.04C7.16 0.98 7.14 0.94 7.1 0.9 7.06 0.86 7.01 0.83 6.95 0.83L2.32 0.84C2.26 0.84 2.2 0.85 2.13 0.88 2.06 0.91 2.01 0.94 1.96 0.98L1.43 1.52C1.38 1.56 1.37 1.6 1.38 1.63 1.39 1.65 1.43 1.67 1.48 1.67L6.29 1.67C6.35 1.67 6.4 1.69 6.44 1.73 6.48 1.77 6.5 1.82 6.5 1.88L6.5 9.79C6.5 9.85 6.48 9.9 6.44 9.94 6.4 9.98 6.35 10 6.29 10L0.21 10C0.15 10 0.1 9.98 0.06 9.94 0.02 9.9 0 9.85 0 9.79L0 1.88C0 1.74 0.05 1.62 0.15 1.52L1.52 0.15C1.56 0.11 1.61 0.08 1.68 0.05 1.75 0.02 1.82 0 1.88 0L7.79 0C7.84 0 7.89 0.02 7.93 0.06 7.97 0.1 7.99 0.15 7.99 0.21L7.99 8.13C7.99 8.18 7.97 8.23 7.93 8.27Z"})))};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=function(){return r.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("title",null,"Collection contains this title"),r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("path",{strokeOpacity:".008",stroke:"#000",strokeWidth:".5",d:"M1 1h18v18H1z"}),r.default.createElement("path",{fill:"#1D2225",d:"M7.75 13.15L4.6 10l-1.05 1.05 4.2 4.2 9-9L15.7 5.2"})))};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=function(){return r.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("title",null,"icon-plus"),r.default.createElement("path",{d:"M6.386 4.19L2.826.627c-.276-.275-.72-.276-.99-.004l-.657.657c-.28.28-.272.716.003.99l3.56 3.56-3.56 3.562c-.275.275-.277.718-.004.99l.655.657c.278.277.716.27.99-.006l3.56-3.56 3.562 3.56c.275.275.717.277.99.005l.656-.658c.278-.278.27-.716-.004-.99l-3.562-3.56 3.56-3.56c.276-.277.278-.72.005-.99l-.656-.658c-.278-.278-.716-.27-.99.004l-3.56 3.56z",fill:"#E94F50",fillRule:"evenodd"}))};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=function(){return r.default.createElement("svg",{className:"icon-added-to-playlist-sml",viewBox:"0 0 16 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{fillRule:"nonzero",fill:"#000000"},r.default.createElement("g",null,r.default.createElement("path",{d:"M3.21246459,13.3814663 L7,9.69833039 L5.9490085,8.66666667 L2.50849858,12.0123425 L1.0509915,10.5950101 L0,11.6170321 L1.80453258,13.3814663 C1.99070343,13.5639962 2.24412709,13.6666667 2.50849858,13.6666667 C2.77287008,13.6666667 3.02629374,13.5639962 3.21246459,13.3814663 L3.21246459,13.3814663 Z"}),r.default.createElement("g",null,r.default.createElement("rect",{x:"4.21483376",y:"0",width:"11.7851662",height:"1.86666667"}),r.default.createElement("ellipse",{cx:"1.2685422",cy:"4.66666667",rx:"1",ry:"1"}),r.default.createElement("ellipse",{cx:"1.2685422",cy:"0.933333333",rx:"1",ry:"1"}),r.default.createElement("rect",{x:"4.21483376",y:"3.73333333",width:"11.7851662",height:"1.86666667"}),r.default.createElement("rect",{x:"8.14322251",y:"7.46666667",width:"7.85677749",height:"1.86666667"}),r.default.createElement("rect",{x:"8.14322251",y:"11.2",width:"7.85677749",height:"1.86666667"}))))))};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=function(){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"20",height:"20",version:"1.1",fill:"#4A3C31"},r.default.createElement("desc",null,"queue icon"),r.default.createElement("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd"},r.default.createElement("path",{d:"M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z"})))};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=function(){return r.default.createElement("svg",{width:"35px",height:"30px",viewBox:"0 0 35 30"},r.default.createElement("title",null,"search"),r.default.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"state:-default--search-focused",transform:"translate(-463.000000, -94.000000)"},r.default.createElement("g",{id:"modal-default",transform:"translate(20.000000, 30.000000)"},r.default.createElement("g",{id:"search",transform:"translate(443.000000, 64.000000)"},r.default.createElement("g",{id:"Layer_1"},r.default.createElement("rect",{id:"Rectangle",fill:"#FFFFFF",x:"0",y:"0",width:"35",height:"30"}),r.default.createElement("g",{id:"Group",transform:"translate(6.000000, 6.000000)",fill:"#858585"},r.default.createElement("path",{d:"M6.75,13.5 C3,13.5 0,10.5 0,6.75 C0,3 3,0 6.75,0 C10.5,0 13.5,3 13.5,6.75 C13.5,10.5 10.5,13.5 6.75,13.5 L6.75,13.5 Z M6.75,1.5 C3.825,1.5 1.5,3.825 1.5,6.75 C1.5,9.675 3.825,12 6.75,12 C9.675,12 12,9.675 12,6.75 C12,3.825 9.675,1.5 6.75,1.5 L6.75,1.5 Z",id:"Shape"}),r.default.createElement("path",{d:"M17.25,18 C17.025,18 16.875,17.925 16.725,17.775 L10.725,11.775 C10.425,11.475 10.425,11.025 10.725,10.725 C11.025,10.425 11.475,10.425 11.775,10.725 L17.775,16.725 C18.075,17.025 18.075,17.475 17.775,17.775 C17.625,17.925 17.475,18 17.25,18 L17.25,18 Z",id:"Shape"}))))))))};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=function(){return r.default.createElement("svg",{width:"32",height:"32",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M1280 896q0-37-30-54l-512-320q-31-20-65-2-33 18-33 56v640q0 38 33 56 16 8 31 8 20 0 34-10l512-320q30-17 30-54zm512 0q0 96-1 150t-8.5 136.5-22.5 147.5q-16 73-69 123t-124 58q-222 25-671 25t-671-25q-71-8-124.5-58t-69.5-123q-14-65-21.5-147.5t-8.5-136.5-1-150 1-150 8.5-136.5 22.5-147.5q16-73 69-123t124-58q222-25 671-25t671 25q71 8 124.5 58t69.5 123q14 65 21.5 147.5t8.5 136.5 1 150z"}))};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),o=function(){return r.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("title",null,"Click to edit"),r.default.createElement("g",{fillRule:"evenodd"},r.default.createElement("path",{d:"M18.2 24H3.8C1.7 24 0 22.3 0 20.2V5.8C0 3.7 1.7 2 3.8 2H11c.6 0 1 .4 1 1s-.4 1-1 1H3.8C2.8 4 2 4.8 2 5.8v14.3c0 1 .8 1.8 1.8 1.8h14.3c1 0 1.8-.8 1.8-1.8V13c0-.6.4-1 1-1s1 .4 1 1v7.2c.1 2.1-1.6 3.8-3.7 3.8z"}),r.default.createElement("path",{d:"M6 19c-.3 0-.5-.1-.7-.3-.2-.2-.3-.6-.3-.9l1-5c0-.2.1-.4.3-.5l12-12c.4-.4 1-.4 1.4 0l4 4c.4.4.4 1 0 1.4l-12 12c-.1.1-.3.2-.5.3l-5 1H6zm1.9-5.5l-.6 3.2 3.2-.6L21.6 5 19 2.4 7.9 13.5z"})))};t.default=o,e.exports=t.default},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="'+(null==(__t=css_class)?"":__t)+" "+(null==(__t=state)?"":__t)+' js-feedback feedback" style="display: none;">\n    <em class="text">\n    '+(null==(__t=msg)?"":__t)+"\n    ","expired"===state?__p+='\n       <span class="expired">Please <a href="/subscribe/">subscribe</a> in order to re-enable.</a></span>\n    ':"canceled"===state&&(__p+='\n       <span class="canceled">Please <a href="/subscribe/">reactivate</a> in order to re-enable.</a></span>\n    '),__p+="\n    </em>\n</div>";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},,,,,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a=n(10),s=n(4),l=n(8),c=n(12),u=n(14);return t=s.Model.extend({defaults:{reading_mode:null},validStateDefaults:["library","archive_list"],initialize:function(){u.stateQueue=[],this.validStates=t.prototype.validStateDefaults.slice(0),this.bind("change:reading_mode",this.triggerModeEvent)},validate:function(e){if(e.nav_state&&a.indexOf(this.validStates,e.nav_state)<0)return e.nav_state+" is not a valid nav state"},addState:function(e){if(-1!==a.indexOf(this.validStates,e))throw new Error("ApplicaitonModel#addState: "+e+"already exists in ApplicationModel.validStates");this.validStates.push(e)},removeState:function(e){var t=a.indexOf(this.validStates,e);return!(t<0)&&this.validStates.splice(t,1)[0]},triggerModeEvent:function(e,t){c.storePaginationPreferences(t),u.trigger("app:reading_mode",t,e.previous("reading_mode"))},setReadingMode:function(e){this.set("reading_mode",e)},isPaged:function(){return this.has("reading_mode")&&"page"===this.get("reading_mode")},isScrolling:function(){return this.has("reading_mode")&&"scroll"===this.get("reading_mode")}}),i=function(){return r||(r=new t),r},o={get:i},l.TESTING&&(o.model=t,o.reset=function(){r=null}),o}.call(t,n,t,e))&&(e.exports=i)},,,,,,function(e,t,n){"use strict";(function(e){e.retryAjax=function(t){var n,i=e;return t.tryCount=t.tryCount?t.tryCount:0,t.retryLimit=t.retryLimit?t.retryLimit:2,t.retryDelay=t.retryDelay?t.retryDelay:1e3,n=t.error?t.error:function(){},t.error=function(e,t){if(++this.tryCount<=this.retryLimit){this.tryCount===this.retryLimit&&(this.error=n);var r=this;return setTimeout(function(){i.ajax(r)},this.retryDelay),!0}return!0},i.ajax(t)}}).call(t,n(1))},function(e,t,n){"use strict";var i;void 0!==(i=function(e){function getCSRFCookieName(){return t("html").attr("data-csrf-cookie")}function isNotMobile(){return!r.IS_IOS&&!r.IS_ANDROID}var t=n(1),i=n(2),r=(n(21),n(8)),o=(n(6),n(12),n(7));return n(5),o.Behavior.extend({triggers:{track:this.onTrack},initialize:function(e){i.bindAll(this),e=e||{}},events:{"mouseup .dashboard__module--recommended-for-you a.actions--queue:not(.active)":function(e){t(e.target).closest("a.actions--queue").hasClass("queued")||this.queueActionHomepage(e,"queue")},"mouseup .dashboard__module--recommended-for-you .ss-queue:not(.active)":function(e){t(e.target).hasClass("active")||this.queueActionHomepage(e,"queue")},'mouseup .dashboard__module--recommended-for-you li:not(.does-exist-in-collection) a:contains("Queue")':function(e){this.queueActionHomepage(e,"queue")},"touchstart .dashboard__module--recommended-for-you .actions .actions--queue:not(.active)":function(e){t(e.target).closest("a.actions--queue").hasClass("queued")||this.queueActionHomepage(e,"queue")},"touchstart .dashboard__module--recommended-for-you .ss-queue:not(.active)":function(e){t(e.target).hasClass("active")||this.queueActionHomepage(e,"queue")},'touchstart .dashboard__module--recommended-for-you li:not(.does-exist-in-collection) a:contains("Queue")':function(e){this.queueActionHomepage(e,"queue")},"click .dashboard__module--recommended-for-you .card--mini-card .cover":function(e){this.queueActionHomepage(e,"view")},"click .dashboard__module--recommended-for-you div.metadata--title":function(e){this.queueActionHomepage(e,"view")},"click .dashboard__module--recommended-for-you .actions .actions--info":function(e){this.queueActionHomepage(e,"view")},"click .dashboard__module--recommended-for-you .actions .actions--read":function(e){this.queueActionHomepage(e,"view")},"click li.title-card > div.card--mini-card .cover.js-tracked":function(e){this.queueActionRecommendations(e,"view")},"click li.title-card > div.card--mini-card .metadata--title":function(e){this.queueActionRecommendations(e,"view")},"click li.title-card > div.card--mini-card .actions--info":function(e){this.queueActionRecommendations(e,"view")},"click li.title-card > div.card--mini-card .actions--verb":function(e){this.queueActionRecommendations(e,"view")},"click li.title-card > div.card--mini-card .title-remove-from-recommendations":function(e){this.queueActionRecommendations(e,"reject")},"mouseup .t-blackbird-recommendations .actions--queue:not(.queued)":function(e){this.queueActionRecommendations(e,"queue")},"touchstart .t-blackbird-recommendations .actions--queue:not(.queued)":function(e){this.queueActionRecommendations(e,"queue")},"touchend li.title-card > div.card--mini-card .ss-queue:not(.active)":function(e){this.queueActionRecommendations(e,"queue")},'touchend li.title-card > div.card--mini-card li:not(.does-exist-in-collection) a:contains("Queue")':function(e){this.queueActionRecommendations(e,"queue")},"mouseup li.title-card > div.card--mini-card .ss-queue:not(.active)":function(e){isNotMobile()&&this.queueActionRecommendations(e,"queue")},'mouseup li.title-card > div.card--mini-card li:not(.does-exist-in-collection) a:contains("Queue")':function(e){isNotMobile()&&this.queueActionRecommendations(e,"queue")}},queueActionHomepage:function(e,n){if(e.isPropagationStopped())return!1;e.stopPropagation();var i=t(e.target).closest("div.card--mini-card"),r=i.closest(".dashboard__module__card-array"),o=n,a=t(e.target).closest(".card--mini-card"),s=a.attr("data-identifier"),l=parseInt(r.find("div.card--mini-card").index(i))+1,c=a.attr("data-recommender-system");this.triggerMethod("action",[t.cookie(getCSRFCookieName()),s,o,"homepage",l,c])},queueActionRecommendations:function(e,n){if(e.isPropagationStopped())return!1;e.stopPropagation();var i=t(e.target).closest(".title-card"),r=i.closest(".title-cards"),o=n,a=i.find(".card--mini-card"),s=a.attr("data-identifier"),l=parseInt(r.find("li.title-card").index(i))+1,c=a.attr("data-recommender-system");this.triggerMethod("action",[t.cookie(getCSRFCookieName()),s,o,"recommendations",l,c])},onAction:function(e,n){n=n||{};var o="web";if(!e||0===e.length)return!1;if(r.IS_IOS?o="ios":r.IS_ANDROID&&(o="android"),i.contains(["queue","view","reject"],e[2])){var a={csrfmiddlewaretoken:e[0],title_id:e[1],action:e[2],client_type:o,context:e[3],recommender_system:e[5],recommendation_position:e[4]};this._currentAjax=t.ajax({type:"POST",url:"/r/api/",contentType:"application/json",data:JSON.stringify(a)}).always(i.bind(function(){this._currentAjax=null,this._saveAgain=!1},this))}}})}.call(t,n,t,e))&&(e.exports=i)},,,,,,function(e,t,n){"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i;void 0!==(i=function(e){var t,i,r,o,a,s,l,c,u=n(4),d=n(7),p=n(19),h=n(11),f=n(2),_=n(1),m=n(8),g="/api/v1/queue-simple/",v="active",y=n(28),b=n(241),T=n(229);return i=u.Model.extend({defaults:{url:null,is_whole_book:!1,natural_key:[]},url:function(){return this.get("url")},initialize:function(){var e=this.get("natural_key")[1]&&this.get("natural_key")[1].length||this.get("is_whole_book");this.set({is_whole_book:e,id:this.cid},{silent:!0}),this.on("remove",this.destroy)},destroy:function(e){var t=this;return e=e||{},e={url:g,data:JSON.stringify([this.get("url")]),contentType:"application/json",dataType:"text",wait:!0,success:function(){h.channel("queue").trigger("delete:success",t.get("url"),t.$btn)},error:function(e,n,i){h.channel("queue").trigger("delete:error",t.get("url"),t.$btn,i.errorThrown)}},u.Model.prototype.destroy.call(this,e)}}),t=u.Collection.extend({model:i,url:g,destroy:function(){this.remove(this.models)},parse:function(e){return e.results},reset:function(){p.loggedIn()&&this.fetch().done(function(){h.channel("queue").trigger("fetch:success",this)})},create:function(e,t){t=t||{},u.Collection.prototype.create.call(this,e,t)}}),r=d.CompositeView.extend({el:"body",events:{"click .js-queue":"toggleQueue"},initialize:function(e){e=e||{},this.enableFeedback=e.enableFeedback,this.includeTitles=!0,null!==e.includeTitles&&(this.includeTitles=e.includeTitles),f.bindAll(this),this.listenTo(h.channel("queue"),"delete:success",this.onDeleteSuccess),this.listenTo(h.channel("queue"),"delete:error",this.onQueueError),this.listenTo(h.channel("queue"),"create:success",this.onCreateSuccess),this.listenTo(h.channel("queue"),"create:error",this.onQueueError),this.listenTo(h.channel("queue"),"fetch:success",this.onFetchSuccess)},destroy:function(){this.stopListening(h.channel("queue"),"delete:success",this.onDeleteSuccess),this.stopListening(h.channel("queue"),"create:success",this.onCreateSuccess),this.stopListening(h.channel("queue"),"fetch:success",this.onFetchSuccess)},behaviors:[_defineProperty({behaviorClass:y},"behaviorClass",b)],updateButton:function(e){e=e||{};var t=e.el,n={addTxt:"Add to Queue",removeTxt:"Remove from Queue"};e.add?t.hasClass(v)||(t.addClass(v).attr("aria-label",n.removeTxt),this.includeTitles&&t.attr("title",n.removeTxt)):(t.removeClass(v).attr("aria-label",n.addTxt),this.includeTitles&&t.attr("title",n.addTxt))},updateHandler:function(e){var t=this.$el.find("[data-queue-endpoint='"+e.url+"']"),n=this;t.length>1?t.each(function(){n.updateButton({el:_(this),add:e.add})}):this.updateButton({el:t,add:e.add})},getCategoryForAnalytics:function(e){var t={"js-current-chapter-queue":"Reader Queue","js-reader-toc-queue":"Reader Navigation","js-partners-queue":"Partner Pages","js-search-queue":"Search"};return f.find(t,function(t,n){return e.hasClass(n)})},getActionForAnalytics:function(e,t){var n={"js-current-chapter-queue":t?"Add to Queue":"Remove from Queue","js-reader-toc-queue":t?"TOC Add to Queue":"TOC Remove from Queue","js-partners-queue":t?"Add to Queue":"Remove from Queue","js-search-queue":t?"Add to Queue":"Remove from Queue"};return f.find(n,function(t,n){return e.hasClass(n)})},onDeleteSuccess:function(e,t){var n={category:this.getCategoryForAnalytics(t),action:this.getActionForAnalytics(t,!1),label:this.idForAnalytics(e)},i={};this.updateHandler({url:e,add:!1}),this.enableFeedback&&(i={css_class:"ss-queue",state:"removed",msg:"Removed from your queue",el:t.closest("li.result-item")},this.showFeedback(i)),this.triggerMethod("track",["send","event",n.category,n.action,n.label],{store:!1})},onQueueError:function(e,t,n){if(this.enableFeedback){var i={css_class:"ss-queue",state:"error",msg:"Error: "+n,el:t.closest("li.result-item")};this.showFeedback(i)}},onCreateSuccess:function(e,t){var n,i={category:this.getCategoryForAnalytics(t),action:this.getActionForAnalytics(t,!0),label:this.idForAnalytics(e)};this.updateHandler({url:e,add:!0}),this.enableFeedback&&(n={css_class:"ss-queue",state:"added",msg:"Added to your queue",el:t.closest("li.result-item")},this.showFeedback(n)),this.triggerMethod("track",["send","event",i.category,i.action,i.label],{store:!1})},showFeedback:function(e){var t=T(e);e.el.prepend(t).find(".js-feedback").fadeIn(),setTimeout(function(){e.el.find(".js-feedback").fadeOut().promise().done(function(){this.remove()})},1200)},onFetchSuccess:function(){var e=this;f.delay(e.updateStatus,1500)},idForAnalytics:function(e){var t,n,i=e.split("/");return 0===e.indexOf("http")&&i.splice(0,3,""),t=i[4],n=i[6],n?t+":"+n:t},updateStatus:function(e){var t=this;(e?this.$(e):this.$el).find(".js-queue").each(function(){var e=_(this).attr("data-queue-endpoint");t.collection.findWhere({url:e})instanceof u.Model?t.updateHandler({url:e,add:!0}):t.updateHandler({url:e,add:!1})})},toggleQueue:function(e){e.preventDefault();var t=this.$(e.currentTarget),n={queueEndpoint:t.attr("data-queue-endpoint"),is_whole_book:t.attr("data-is-whole-book")||null},i=this.collection.findWhere({url:n.queueEndpoint});i instanceof u.Model?(i.$btn=t,this.collection.remove(i)):this.collection.create({url:n.queueEndpoint,is_whole_book:n.is_whole_book},{url:g,type:"POST",data:JSON.stringify([n.queueEndpoint]),contentType:"application/json",dataType:"text",success:function(){h.channel("queue").trigger("create:success",n.queueEndpoint,t)},error:function(e,i,r){h.channel("queue").trigger("create:error",n.queueEndpoint,t,r.errorThrown)}},{wait:!0})}}),a=function(){o.destroy(),o=null},c=function(e){e=e||{},o&&!e.forceReset||(o=new r({collection:new t,enableFeedback:e.enableFeedback||!1,includeTitles:e.includeTitles}),(e.reset||e.forceReset)&&p.loggedIn()&&o.collection.reset())},s=function(e){o.setElement(e)},l=function(){return o},m.TESTING?{Collection:t,Model:i,View:r,attach:s,destroy:a,get:l,init:c}:{View:r,Collection:t,attach:s,get:l,init:f.once(c)}}.call(t,n,t,e))&&(e.exports=i)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r=n(10),o=n(1),a=n(4),s=n(14),l=n(18),c=n(12),u=n(8);return t=a.Model.extend({defaults:{client_timestamp:null,chapter:null,start_percentage:null,end_percentage:null,usage_is_complete:!1,product:null,usage_uuid:null},initialize:function(){r.bindAll(this),this.has("is_offline")||this.set({client_timestamp:l.formatLocalDate()}),this.on({remove:this.onRemove,change:this.availableUsage},this),this.has("usage_uuid")||this.has("is_offline")||this.set({usage_uuid:c.serializer.guuid()},{silent:!0}),s.on({"document:render":this.reset},this)},reset:function(e){this.set({chapter:e.get("chapter"),start_percentage:e.get("top_percentage"),end_percentage:null,product:e.get("product")},{validate:!1,silent:!0}),this.percentAvailable=100},resetAll:function(){this.destroy(),s.off({"document:render":this.reset},this),this.off({invalid:this.onInvalid,remove:this.onRemove,change:this.availableUsage},this),this.set({chapter:null,start_percentage:null,end_percentage:null,usage_is_complete:!1,product:null}),this.percentAvailable=100},availableUsage:function(){var e,t=this.get("start_percentage"),n=this.get("end_percentage"),i=!1;this.hasChanged("chapter")&&(this.percentAvailable=100),null!==n&&(e=Math.abs(t-n),this.percentAvailable=this.percentAvailable-e),this.percentAvailable<=0&&(i=!0),this.set({usage_is_complete:i},{silent:!0})},onRemove:function(e){e.destroy()},onInvalid:function(){},validate:function(e){var t=["chapter","start_percentage","end_percentage","client_timestamp","usage_uuid"],n=["is_offline","usage_is_complete","id","idAttribute","product"],i=r.keys(e),o=r.difference(i,t,n),a=r.difference(t,i);if(this.isVideo){if(e.start_percentage>=e.end_percentage)return"start_percentage was greater than or equal to the end_percentage.";if(Math.abs(e.start_percentage-e.end_percentage)>50)return"difference between start_percentage and end_percentage was greater than 50."}return o.length>0?o.join(", ")+" are invalid attributes of UsageEvent.":a.length>0?a.join(", ")+" are required attributes of UsageEvent.":r.isNull(e.chapter)||r.isNaN(e.chapter)||r.isUndefined(e.chapter)?"chapter must be a defined value.":e.start_percentage>100||e.start_percentage<0?"start_percentage must be between 0 and 100.":e.end_percentage>100||e.end_percentage<0?"end_percentage must be between 0 and 100.":r.isNumber(e.start_percentage)&&r.isNumber(e.end_percentage)?"is_offline"in e&&"boolean"!=typeof e.is_offline?"is_offline must be either null or boolean.":"usage_is_completed"in e&&!(e.usage_is_complete instanceof Boolean)?"usage_is_complete must be either null or boolean.":e.start_percentage===e.end_percentage?"Position hasn't changed since last usage calculation":void 0:"Start or End percentage is not a number."},sync:function(e,t,n){var i;return n=n||{},"create"===e&&(i=c.browserStore.create(u.LOCALSTORE_USAGE_KEY,{id:t.get("usage_uuid"),item:t.attributes},n)),"update"===e&&(i=c.browserStore.update(u.LOCALSTORE_USAGE_KEY,{id:t.get("usage_uuid"),item:t.attributes},n)),i},save:function(e,t){var n=this.validate(r.merge(this.attributes,e));if(t=t||{},n)return console.warn(n),!1;var i=this.isNew()?"create":"update",a=o.Deferred();return r.merge(t,{idKey:"usage_uuid"}),t.success||(t.success=function(e){return a.resolve(e),a.promise()}),t.error||(t.error=function(e){return a.reject(e),a.promise()}),this.sync(i,this,t)},destroy:function(){c.browserStore.destroy(u.LOCALSTORE_USAGE_KEY,{id:this.has("usage_uuid")?this.get("usage_uuid"):this.get("idAttribute")})}}),i=function(e){return e=e||{},new t(e)},{get:i,Model:t}}.call(t,n,t,e))&&(e.exports=i)},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(t,i){var r,o,a,s,l,c=(n(1),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e});s=function(e){var n;return n=this.map(function(){var n,i,r,o;for(r="",n=this;(null!=n?n.nodeType:void 0)===Node.ELEMENT_NODE&&n!==e;)o=n.tagName.replace(":","\\:"),i=t(n.parentNode).children(o).index(n)+1,i="["+i+"]",r="/"+n.tagName.toLowerCase()+i+r,n=n.parentNode;return r}),n.get()},l=function(e){var t,n,i,r;return t=function(e){var t,n;return t=o(e),n=a(e),t+"["+n+"]"},r=e,n=function(e){var n;for(n="";e!==r;){if(null==e)throw new Error("Called getPathTo on a node which was not a descendant of @rootNode. "+r);n=t(e)+"/"+n,e=e.parentNode}return n="/"+n,n=n.replace(/\/$/,"")},i=this.map(function(){return n(this)}),i.get()},r=function(e,t,n){var i,r,a,s,l;if(!e.hasChildNodes())throw new Error("XPath error: node has no children!");for(r=e.childNodes,a=0,s=0,l=r.length;s<l;s++)if(i=r[s],o(i)===t&&(a+=1)===n)return i;throw new Error("XPath error: wanted child not found.")},o=function(e){var t;switch(t=e.nodeName.toLowerCase()){case"#text":return"text()";case"#comment":return"comment()";case"#cdata-section":return"cdata-section()";default:return t}},a=function(e){var t,n;for(t=0,n=e;n;)n.nodeName===e.nodeName&&t++,n=n.previousSibling;return t};var t,u,d,p,h,f;d=null,"undefined"!=typeof Gettext&&null!==Gettext?(p=new Gettext({domain:"annotator"}),d=function(e){return p.gettext(e)}):d=function(e){return e},f=function(e){return d(e)},(void 0!==i&&null!==i&&null!=(h=i.fn)?h.jquery:void 0)||console.error(f("Annotator requires jQuery: have you included lib/vendor/jquery.js?")),JSON&&JSON.parse&&JSON.stringify||console.error(f("Annotator requires a JSON implementation: have you included lib/vendor/json2.js?")),t=i,u={},u.flatten=function(e){var n;return(n=function(e){var i,r,o,a;for(r=[],o=0,a=e.length;o<a;o++)i=e[o],r=r.concat(i&&t.isArray(i)?n(i):i);return r})(e)},u.contains=function(e,t){var n;for(n=t;null!=n;){if(n===e)return!0;n=n.parentNode}return!1},u.getTextNodes=function(e){var t;return t=function(e){var n;if(e&&e.nodeType!==Node.TEXT_NODE){if(n=[],e.nodeType!==Node.COMMENT_NODE)for(e=e.lastChild;e;)n.push(t(e)),e=e.previousSibling;return n.reverse()}return e},e.map(function(){return u.flatten(t(this))})},u.getLastTextNodeUpTo=function(e){var t;switch(e.nodeType){case Node.TEXT_NODE:return e;case Node.ELEMENT_NODE:if(null!=e.lastChild&&null!=(t=u.getLastTextNodeUpTo(e.lastChild)))return t}return e=e.previousSibling,null!=e?u.getLastTextNodeUpTo(e):null},u.getFirstTextNodeNotBefore=function(e){var t;switch(e.nodeType){case Node.TEXT_NODE:return e;case Node.ELEMENT_NODE:if(null!=e.firstChild&&null!=(t=u.getFirstTextNodeNotBefore(e.firstChild)))return t}return e=e.nextSibling,null!=e?u.getFirstTextNodeNotBefore(e):null},u.readRangeViaSelection=function(e){var t;return t=u.getGlobal().getSelection(),t.removeAllRanges(),t.addRange(e.toRange()),t.toString()},u.xpathFromNode=function(e,t){var n;try{n=s.call(e,t)}catch(i){i,console.log("jQuery-based XPath construction failed! Falling back to manual."),n=l.call(e,t)}return n},u.nodeFromXPath=function(e,t){var n,i,o,a,s,l,c,u;for(s=e.substring(1).split("/"),o=t,l=0,c=s.length;l<c;l++)a=s[l],u=a.split("["),i=u[0],n=u[1],n=null!=n?parseInt((null!=n?n.split("]"):void 0)[0]):1,o=r(o,i.toLowerCase(),n);return o},u.escape=function(e){return e.replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},u.uuid=function(){var e;return e=0,function(){return e++}}(),u.getGlobal=function(){return function(){return this}()},u.maxZIndex=function(e){var n,i;return n=function(){var n,r,o;for(o=[],n=0,r=e.length;n<r;n++)i=e[n],"static"===t(i).css("position")?o.push(-1):o.push(parseInt(t(i).css("z-index"),10)||-1);return o}(),Math.max.apply(Math,n)},u.mousePosition=function(e,n){var i,r;return"absolute"!==(r=t(n).css("position"))&&"fixed"!==r&&"relative"!==r&&(n=t(n).offsetParent()[0]),i=t(n).offset(),{top:e.pageY-i.top,left:e.pageX-i.left}},u.preventEventDefault=function(e){return null!=e&&"function"==typeof e.preventDefault?e.preventDefault():void 0};var _,m,g,v,y,b,T=[].slice;if(m=["log","debug","info","warn","exception","assert","dir","dirxml","trace","group","groupEnd","groupCollapsed","time","timeEnd","profile","profileEnd","count","clear","table","error","notifyFirebug","firebug","userObjects"],"undefined"!=typeof console&&null!==console)for(null==console.group&&(console.group=function(e){return console.log("GROUP: ",e)}),null==console.groupCollapsed&&(console.groupCollapsed=console.group),g=0,y=m.length;g<y;g++)_=m[g],null==console[_]&&(console[_]=function(){return console.log(f("Not implemented:")+" console."+name)});else{for((void 0).console={},v=0,b=m.length;v<b;v++)_=m[v],(void 0).console[_]=function(){};(void 0).console.error=function(){var e;return e=1<=arguments.length?T.call(arguments,0):[],alert("ERROR: "+e.join(", "))},(void 0).console.warn=function(){var e;return e=1<=arguments.length?T.call(arguments,0):[],alert("WARNING: "+e.join(", "))}}var w,T=[].slice,C={}.hasOwnProperty;w=function(){function Delegator(e,n){this.options=t.extend(!0,{},this.options,n),this.element=t(e),this._closures={},this.on=this.subscribe,this.addEvents()}return Delegator.prototype.events={},Delegator.prototype.options={},Delegator.prototype.element=null,Delegator.prototype.addEvents=function(){var e,t,n,i,r;for(i=Delegator._parseEvents(this.events),r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(this._addEvent(e.selector,e.event,e.functionName));return r},Delegator.prototype.removeEvents=function(){var e,t,n,i,r;for(i=Delegator._parseEvents(this.events),r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(this._removeEvent(e.selector,e.event,e.functionName));return r},Delegator.prototype._addEvent=function(e,t,n){var i,r=this;return i=function(){return r[n].apply(r,arguments)},""===e&&Delegator._isCustomEvent(t)?this.subscribe(t,i):this.element.delegate(e,t,i),this._closures[e+"/"+t+"/"+n]=i,this},Delegator.prototype._removeEvent=function(e,t,n){var i;return i=this._closures[e+"/"+t+"/"+n],""===e&&Delegator._isCustomEvent(t)?this.unsubscribe(t,i):this.element.undelegate(e,t,i),delete this._closures[e+"/"+t+"/"+n],this},Delegator.prototype.publish=function(){return this.element.triggerHandler.apply(this.element,arguments),this},Delegator.prototype.subscribe=function(e,n){var i;return i=function(){return n.apply(this,[].slice.call(arguments,1))},i.guid=n.guid=t.guid+=1,this.element.bind(e,i),this},Delegator.prototype.unsubscribe=function(){return this.element.unbind.apply(this.element,arguments),this},Delegator}(),w._parseEvents=function(e){var t,n,i,r,o,a,s;n=[];for(r in e)i=e[r],s=r.split(" "),o=2<=s.length?T.call(s,0,a=s.length-1):(a=0,[]),t=s[a++],n.push({selector:o.join(" "),event:t,functionName:i});return n},w.natives=function(){var e,t,n;return t=function(){var t,r;t=i.event.special,r=[];for(e in t)C.call(t,e)&&(n=t[e],r.push(e));return r}(),"blur focus focusin focusout load resize scroll unload click dblclick\nmousedown mouseup mousemove mouseover mouseout mouseenter mouseleave\nchange select submit keydown keypress keyup error".split(/[^a-z]+/).concat(t)}(),w._isCustomEvent=function(e){return e=e.split(".")[0],-1===t.inArray(e,w.natives)};var M,C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e};M={},M.sniff=function(e){return null!=e.commonAncestorContainer?new M.BrowserRange(e):"string"==typeof e.start?new M.SerializedRange(e):e.start&&"object"===c(e.start)?new M.NormalizedRange(e):(console.error(f("Could not sniff range type")),!1)},M.nodeFromXPath=function(e,n){var i,r,o,a,s;return null==n&&(n=document),r=function(e,t){null==t&&(t=null);try{return document.evaluate("."+e,n,t,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(t){return t,console.log("XPath evaluation failed."),console.log("Trying fallback..."),u.nodeFromXPath(e,n)}},t.isXMLDoc(document.documentElement)?(i=document.createNSResolver(null===document.ownerDocument?document.documentElement:document.ownerDocument.documentElement),a=r(e,i),a||(e=function(){var t,n,i,r;for(i=e.split("/"),r=[],t=0,n=i.length;t<n;t++)s=i[t],s&&-1===s.indexOf(":")?r.push(s.replace(/^([a-z]+)/,"xhtml:$1")):r.push(s);return r}().join("/"),o=document.lookupNamespaceURI(null),i=function(e){return"xhtml"===e?o:document.documentElement.getAttribute("xmlns:"+e)},a=r(e,i)),a):r(e)},M.RangeError=function(e){function RangeError(e,t,n){this.type=e,this.message=t,this.parent=null!=n?n:null,RangeError.__super__.constructor.call(this,this.message)}return k(RangeError,e),RangeError}(Error),M.BrowserRange=function(){function BrowserRange(e){this.commonAncestorContainer=e.commonAncestorContainer,this.startContainer=e.startContainer,this.startOffset=e.startOffset,this.endContainer=e.endContainer,this.endOffset=e.endOffset}return BrowserRange.prototype.normalize=function(e){var t,n,i,r;if(this.tainted)return console.error(f("You may only call normalize() once on a BrowserRange!")),!1;if(this.tainted=!0,r={},this.startContainer.nodeType===Node.ELEMENT_NODE?(r.start=u.getFirstTextNodeNotBefore(this.startContainer.childNodes[this.startOffset]),r.startOffset=0):(r.start=this.startContainer,r.startOffset=this.startOffset),this.endContainer.nodeType===Node.ELEMENT_NODE){if(null!=(n=this.endContainer.childNodes[this.endOffset])){for(t=n;null!=t&&t.nodeType!==Node.TEXT_NODE;)t=t.firstChild;null!=t&&(r.end=t,r.endOffset=0)}null==r.end&&(n=this.endOffset?this.endContainer.childNodes[this.endOffset-1]:this.endContainer.previousSibling,r.end=u.getLastTextNodeUpTo(n),r.endOffset=r.end.nodeValue.length)}else r.end=this.endContainer,r.endOffset=this.endOffset;for(i={},r.startOffset>0?r.start.nodeValue.length>r.startOffset?i.start=r.start.splitText(r.startOffset):i.start=r.start.nextSibling:i.start=r.start,r.start===r.end?(i.start.nodeValue.length>r.endOffset-r.startOffset&&i.start.splitText(r.endOffset-r.startOffset),i.end=i.start):(r.end.nodeValue.length>r.endOffset&&r.end.splitText(r.endOffset),i.end=r.end),i.commonAncestor=this.commonAncestorContainer;i.commonAncestor.nodeType!==Node.ELEMENT_NODE;)i.commonAncestor=i.commonAncestor.parentNode;return new M.NormalizedRange(i)},BrowserRange.prototype.serialize=function(e,t){return this.normalize(e).serialize(e,t)},BrowserRange}(),M.NormalizedRange=function(){function NormalizedRange(e){this.commonAncestor=e.commonAncestor,this.start=e.start,this.end=e.end}return NormalizedRange.prototype.normalize=function(e){return this},NormalizedRange.prototype.limit=function(e){var n,i,r,o,a,s;if(n=t.grep(this.textNodes(),function(n){return n.parentNode===e||t.contains(e,n.parentNode)}),!n.length)return null;for(this.start=n[0],this.end=n[n.length-1],r=t(this.start).parents(),s=t(this.end).parents(),o=0,a=s.length;o<a;o++)if(i=s[o],-1!==r.index(i)){this.commonAncestor=i;break}return this},NormalizedRange.prototype.serialize=function(e,n){var i,r,o;return r=function(i,r){var o,a,s,l,c,d,p,h;for(l=n?t(i).parents(":not("+n+")").eq(0):t(i).parent(),d=u.xpathFromNode(l,e)[0],c=u.getTextNodes(l),a=c.slice(0,c.index(i)),s=0,p=0,h=a.length;p<h;p++)o=a[p],s+=o.nodeValue.length;return r?[d,s+i.nodeValue.length]:[d,s]},o=r(this.start),i=r(this.end,!0),new M.SerializedRange({start:o[0],end:i[0],startOffset:o[1],endOffset:i[1]})},NormalizedRange.prototype.text=function(){var e;return function(){var t,n,i,r;for(i=this.textNodes(),r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(e.nodeValue);return r}.call(this).join("")},NormalizedRange.prototype.textNodes=function(){var e,n,i,r;return i=u.getTextNodes(t(this.commonAncestor)),r=[i.index(this.start),i.index(this.end)],n=r[0],e=r[1],t.makeArray(i.slice(n,+e+1||9e9))},NormalizedRange.prototype.toRange=function(){var e;return e=document.createRange(),e.setStartBefore(this.start),e.setEndAfter(this.end),e},NormalizedRange}(),M.SerializedRange=function(){function SerializedRange(e){this.start=e.start,this.startOffset=e.startOffset,this.end=e.end,this.endOffset=e.endOffset}return SerializedRange.prototype.normalize=function(e){var n,i,r,o,a,s,l,c,d,p,h,f,_,m;for(s={},_=["start","end"],d=0,h=_.length;d<h;d++){a=_[d];try{o=M.nodeFromXPath(this[a],e)}catch(e){throw i=e,new M.RangeError(a,"Error while finding "+a+" node: "+this[a]+": "+i,i)}if(!o)throw new M.RangeError(a,"Couldn't find "+a+" node: "+this[a]);for(r=0,l=this[a+"Offset"],"end"===a&&l--,m=u.getTextNodes(t(o)),p=0,f=m.length;p<f;p++){if(c=m[p],r+c.nodeValue.length>l){s[a+"Container"]=c,s[a+"Offset"]=this[a+"Offset"]-r;break}r+=c.nodeValue.length}if(null==s[a+"Offset"])throw new M.RangeError(a+"offset","Couldn't find offset "+this[a+"Offset"]+" in element "+this[a])}return n=null==document.compareDocumentPosition?function(e,t){return e.contains(t)}:function(e,t){return 16&e.compareDocumentPosition(t)},t(s.startContainer).parents().each(function(){if(n(this,s.endContainer))return s.commonAncestorContainer=this,!1}),new M.BrowserRange(s).normalize(e)},SerializedRange.prototype.serialize=function(e,t){return this.normalize(e).serialize(e,t)},SerializedRange.prototype.toObject=function(){return{start:this.start,startOffset:this.startOffset,end:this.end,endOffset:this.endOffset}},SerializedRange}();var L,E,h,S=function(e,t){return function(){return e.apply(t,arguments)}},C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e};L=function(e){function Annotator(e,n){if(this.onDeleteAnnotation=S(this.onDeleteAnnotation,this),this.onEditAnnotation=S(this.onEditAnnotation,this),this.onAdderClick=S(this.onAdderClick,this),this.onAdderMousedown=S(this.onAdderMousedown,this),this.onHighlightMouseover=S(this.onHighlightMouseover,this),this.checkForEndSelection=S(this.checkForEndSelection,this),this.checkForStartSelection=S(this.checkForStartSelection,this),this.clearViewerHideTimer=S(this.clearViewerHideTimer,this),this.startViewerHideTimer=S(this.startViewerHideTimer,this),this.showViewer=S(this.showViewer,this),this.onEditorSubmit=S(this.onEditorSubmit,this),this.onEditorHide=S(this.onEditorHide,this),this.showEditor=S(this.showEditor,this),Annotator.__super__.constructor.apply(this,arguments),this.plugins={},!Annotator.supported())return this;this.options.readOnly||this._setupDocumentEvents(),this._setupWrapper()._setupViewer()._setupEditor(),this._setupDynamicStyle(),this.adder=t(this.html.adder).appendTo(this.wrapper).hide(),Annotator._instances.push(this)}return k(Annotator,e),Annotator.prototype.events={".annotator-adder button click":"onAdderClick",".annotator-adder button mousedown":"onAdderMousedown",".annotator-hl mouseover":"onHighlightMouseover",".annotator-hl mouseout":"startViewerHideTimer"},Annotator.prototype.html={adder:'<div class="annotator-adder"><button>'+f("Annotate")+"</button></div>",wrapper:'<div class="annotator-wrapper"></div>'},Annotator.prototype.options={readOnly:!1},Annotator.prototype.plugins={},Annotator.prototype.editor=null,Annotator.prototype.viewer=null,Annotator.prototype.selectedRanges=null,Annotator.prototype.mouseIsDown=!1,Annotator.prototype.ignoreMouseup=!1,Annotator.prototype.viewerHideTimer=null,Annotator.prototype._setupWrapper=function(){return this.wrapper=t(this.html.wrapper),this.element.find("script").remove(),this.element.wrapInner(this.wrapper),this.wrapper=this.element.find(".annotator-wrapper"),this},Annotator.prototype._setupViewer=function(){var e=this;return this.viewer=new Annotator.Viewer({readOnly:this.options.readOnly}),this.viewer.hide().on("edit",this.onEditAnnotation).on("delete",this.onDeleteAnnotation).addField({load:function(n,i){return i.text?t(n).html(u.escape(i.text)):t(n).html("<i>"+f("No Comment")+"</i>"),e.publish("annotationViewerTextField",[n,i])}}).element.appendTo(this.wrapper).bind({mouseover:this.clearViewerHideTimer,mouseout:this.startViewerHideTimer}),this},Annotator.prototype._setupEditor=function(){return this.editor=new Annotator.Editor,this.editor.hide().on("hide",this.onEditorHide).on("save",this.onEditorSubmit).addField({type:"textarea",label:f("Comments")+"",load:function(e,n){return t(e).find("textarea").val(n.text||"")},submit:function(e,n){return n.text=t(e).find("textarea").val()}}),this.editor.element.appendTo(this.wrapper),this},Annotator.prototype._setupDocumentEvents=function(){return t(document).bind({mouseup:this.checkForEndSelection,mousedown:this.checkForStartSelection}),this},Annotator.prototype._setupDynamicStyle=function(){var e,n,i,r;return i=t("#annotator-dynamic-style"),i.length||(i=t('<style id="annotator-dynamic-style"></style>').appendTo(document.head)),n="*"+function(){var e,t,n,i;for(n=["adder","outer","notice","filter"],i=[],e=0,t=n.length;e<t;e++)r=n[e],i.push(":not(.annotator-"+r+")");return i}().join(""),e=u.maxZIndex(t(document.body).find(n)),e=Math.max(e,1e3),i.text([".annotator-adder, .annotator-outer, .annotator-notice {","  z-index: "+(e+20)+";","}",".annotator-filter {","  z-index: "+(e+10)+";","}"].join("\n")),this},Annotator.prototype.destroy=function(){var e,n,i;t(document).unbind({mouseup:this.checkForEndSelection,mousedown:this.checkForStartSelection}),t("#annotator-dynamic-style").remove(),this.adder.remove(),this.viewer.destroy(),this.editor.destroy(),this.wrapper.find(".annotator-hl").each(function(){return t(this).contents().insertBefore(this),t(this).remove()}),this.wrapper.contents().insertBefore(this.wrapper),this.wrapper.remove(),this.element.data("annotator",null),i=this.plugins;for(n in i)i[n],this.plugins[n].destroy();if(this.removeEvents(),-1!==(e=Annotator._instances.indexOf(this)))return Annotator._instances.splice(e,1)},Annotator.prototype.getSelectedRanges=function(){var e,n,i,r,o,a,s,l,c;for(s=u.getGlobal().getSelection(),o=[],a=[],s.isCollapsed||(o=function(){var t,o,l;for(l=[],n=t=0,o=s.rangeCount;0<=o?t<o:t>o;n=0<=o?++t:--t)r=s.getRangeAt(n),e=new M.BrowserRange(r),i=e.normalize().limit(this.wrapper[0]),null===i&&a.push(r),l.push(i);return l}.call(this),s.removeAllRanges()),l=0,c=a.length;l<c;l++)r=a[l],s.addRange(r);return t.grep(o,function(e){return e&&s.addRange(e.toRange()),e})},Annotator.prototype.createAnnotation=function(){var e;return e={},this.publish("beforeAnnotationCreated",[e]),e},Annotator.prototype.setupAnnotation=function(e){var n,i,r,o,a,s,l,c,u,d;for(a=this.wrapper[0],e.ranges||(e.ranges=this.selectedRanges),r=[],d=e.ranges,s=0,c=d.length;s<c;s++){o=d[s];try{r.push(M.sniff(o).normalize(a))}catch(t){if(!((n=t)instanceof M.RangeError))throw n;this.publish("rangeNormalizeFail",[e,o,n])}}for(e.quote=[],e.ranges=[],e.highlights=[],l=0,u=r.length;l<u;l++)i=r[l],e.quote.push(t.trim(i.text())),e.ranges.push(i.serialize(this.wrapper[0],".annotator-hl")),t.merge(e.highlights,this.highlightRange(i));return e.quote=e.quote.join(" / "),t(e.highlights).data("annotation",e),e},Annotator.prototype.updateAnnotation=function(e){return this.publish("beforeAnnotationUpdated",[e]),this.publish("annotationUpdated",[e]),e},Annotator.prototype.deleteAnnotation=function(e){var n,i,r,o;if(null!=e.highlights)for(o=e.highlights,i=0,r=o.length;i<r;i++)n=o[i],null!=n.parentNode&&(n.childNodes[0],t(n).replaceWith(n.childNodes));return this.publish("annotationDeleted",[e]),e},Annotator.prototype.loadAnnotations=function(e){var t,n,i=this;return null==e&&(e=[]),n=function(e){var r,o,a,s;for(null==e&&(e=[]),o=e.splice(0,10),a=0,s=o.length;a<s;a++)r=o[a],i.setupAnnotation(r);return e.length>0?setTimeout(function(){return n(e)},10):i.publish("annotationsLoaded",[t])},t=e.slice(),n(e),this},Annotator.prototype.dumpAnnotations=function(){return this.plugins.Store?this.plugins.Store.dumpAnnotations():(console.warn(f("Can't dump annotations without Store plugin.")),!1)},Annotator.prototype.highlightRange=function(e,n){var i,r,o,a,s,l,c;for(null==n&&(n="annotator-hl"),o=/^\s*$/,i=t("<span class='"+n+"'></span>"),l=e.textNodes(),c=[],a=0,s=l.length;a<s;a++)r=l[a],o.test(r.nodeValue)||c.push(t(r).wrapAll(i).parent().show()[0]);return c},Annotator.prototype.highlightRanges=function(e,n){var i,r,o,a;for(null==n&&(n="annotator-hl"),i=[],o=0,a=e.length;o<a;o++)r=e[o],t.merge(i,this.highlightRange(r,n));return i},Annotator.prototype.addPlugin=function(e,t){var n,i;return this.plugins[e]?console.error(f("You cannot have more than one instance of any plugin.")):(n=Annotator.Plugin[e],"function"==typeof n?(this.plugins[e]=new n(this.element[0],t),this.plugins[e].annotator=this,"function"==typeof(i=this.plugins[e]).pluginInit&&i.pluginInit()):console.error(f("Could not load ")+e+f(" plugin. Have you included the appropriate <script> tag?"))),this},Annotator.prototype.showEditor=function(e,t){return this.editor.element.css(t),this.editor.load(e),this.publish("annotationEditorShown",[this.editor,e]),this},Annotator.prototype.onEditorHide=function(){return this.publish("annotationEditorHidden",[this.editor]),this.ignoreMouseup=!1},Annotator.prototype.onEditorSubmit=function(e){return this.publish("annotationEditorSubmit",[this.editor,e])},Annotator.prototype.showViewer=function(e,t){return this.viewer.element.css(t),this.viewer.load(e),this.publish("annotationViewerShown",[this.viewer,e])},Annotator.prototype.startViewerHideTimer=function(){if(!this.viewerHideTimer)return this.viewerHideTimer=setTimeout(this.viewer.hide,250)},Annotator.prototype.clearViewerHideTimer=function(){return clearTimeout(this.viewerHideTimer),this.viewerHideTimer=!1},Annotator.prototype.checkForStartSelection=function(e){return e&&this.isAnnotator(e.target)||this.startViewerHideTimer(),this.mouseIsDown=!0},Annotator.prototype.checkForEndSelection=function(e){var n,i,r,o,a;if(this.mouseIsDown=!1,!this.ignoreMouseup){for(this.selectedRanges=this.getSelectedRanges(),a=this.selectedRanges,r=0,o=a.length;r<o;r++)if(i=a[r],n=i.commonAncestor,t(n).hasClass("annotator-hl")&&(n=t(n).parents("[class!=annotator-hl]")[0]),this.isAnnotator(n))return;return e&&this.selectedRanges.length?this.adder.css(u.mousePosition(e,this.wrapper[0])).show():this.adder.hide()}},Annotator.prototype.isAnnotator=function(e){return!!t(e).parents().addBack().filter("[class^=annotator-]").not(this.wrapper).length},Annotator.prototype.onHighlightMouseover=function(e){var n;return this.clearViewerHideTimer(),!this.mouseIsDown&&!this.viewer.isShown()&&(n=t(e.target).parents(".annotator-hl").addBack().map(function(){return t(this).data("annotation")}),this.showViewer(t.makeArray(n),u.mousePosition(e,this.wrapper[0])))},Annotator.prototype.onAdderMousedown=function(e){return null!=e&&e.preventDefault(),this.ignoreMouseup=!0},Annotator.prototype.onAdderClick=function(e){var n,i,r,o,a,s=this;return null!=e&&e.preventDefault(),o=this.adder.position(),this.adder.hide(),n=this.setupAnnotation(this.createAnnotation()),t(n.highlights).addClass("annotator-hl-temporary"),a=function(){return r(),t(n.highlights).removeClass("annotator-hl-temporary"),s.publish("annotationCreated",[n])},i=function(){return r(),s.deleteAnnotation(n)},r=function(){return s.unsubscribe("annotationEditorHidden",i),s.unsubscribe("annotationEditorSubmit",a)},this.subscribe("annotationEditorHidden",i),this.subscribe("annotationEditorSubmit",a),this.showEditor(n,o)},Annotator.prototype.onEditAnnotation=function(e){var t,n,i,r=this;return n=this.viewer.element.position(),i=function(){return t(),r.updateAnnotation(e)},t=function(){return r.unsubscribe("annotationEditorHidden",t),r.unsubscribe("annotationEditorSubmit",i)},this.subscribe("annotationEditorHidden",t),this.subscribe("annotationEditorSubmit",i),this.viewer.hide(),this.showEditor(e,n)},Annotator.prototype.onDeleteAnnotation=function(e){return this.viewer.hide(),this.deleteAnnotation(e)},Annotator}(w),L.Plugin=function(e){function Plugin(e,t){Plugin.__super__.constructor.apply(this,arguments)}return k(Plugin,e),Plugin.prototype.pluginInit=function(){},Plugin.prototype.destroy=function(){return this.removeEvents()},Plugin}(w),E=u.getGlobal(),null==(null!=(h=E.document)?h.evaluate:void 0)&&t.getScript("http://assets.annotateit.org/vendor/xpath.min.js"),null==E.getSelection&&t.getScript("http://assets.annotateit.org/vendor/ierange.min.js"),null==E.JSON&&t.getScript("http://assets.annotateit.org/vendor/json2.min.js"),null==E.Node&&(E.Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}),L.$=t,L.Delegator=w,L.Range=M,L.Util=u,L._instances=[],L._t=f,L.supported=function(){return function(){return!!this.getSelection}()},t.fn.annotator=function(e){var n;return n=Array.prototype.slice.call(arguments,1),this.each(function(){var i;return i=t.data(this,"annotator"),i?e&&i[e].apply(i,n):(i=new L(this,e),t.data(this,"annotator",i))})},L.noConflict=function(){return u.getGlobal().Annotator=L,this};var C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e};L.Widget=function(e){function Widget(e,n){Widget.__super__.constructor.apply(this,arguments),this.classes=t.extend({},L.Widget.prototype.classes,this.classes)}return k(Widget,e),Widget.prototype.classes={hide:"annotator-hide",invert:{x:"annotator-invert-x",y:"annotator-invert-y"}},Widget.prototype.destroy=function(){return this.removeEvents(),this.element.remove()},Widget.prototype.checkOrientation=function(){var e,n,i,r,o;return this.resetOrientation(),o=t(L.Util.getGlobal()),r=this.element.children(":first"),n=r.offset(),i={top:o.scrollTop(),right:o.width()+o.scrollLeft()},e={top:n.top,right:n.left+r.width()},e.top-i.top<0&&this.invertY(),e.right-i.right>0&&this.invertX(),this},Widget.prototype.resetOrientation=function(){return this.element.removeClass(this.classes.invert.x).removeClass(this.classes.invert.y),this},Widget.prototype.invertX=function(){return this.element.addClass(this.classes.invert.x),this},Widget.prototype.invertY=function(){return this.element.addClass(this.classes.invert.y),this},Widget.prototype.isInvertedY=function(){return this.element.hasClass(this.classes.invert.y)},Widget.prototype.isInvertedX=function(){return this.element.hasClass(this.classes.invert.x)},Widget}(w);var S=function(e,t){return function(){return e.apply(t,arguments)}},C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e};L.Editor=function(e){function Editor(e){this.onCancelButtonMouseover=S(this.onCancelButtonMouseover,this),this.processKeypress=S(this.processKeypress,this),this.submit=S(this.submit,this),this.load=S(this.load,this),this.hide=S(this.hide,this),this.show=S(this.show,this),Editor.__super__.constructor.call(this,t(this.html)[0],e),this.fields=[],this.annotation={}}return k(Editor,e),Editor.prototype.events={"form submit":"submit",".annotator-save click":"submit",".annotator-cancel click":"hide",".annotator-cancel mouseover":"onCancelButtonMouseover","textarea keydown":"processKeypress"},Editor.prototype.classes={hide:"annotator-hide",focus:"annotator-focus"},Editor.prototype.html='<div class="annotator-outer annotator-editor">\n  <form class="annotator-widget">\n    <ul class="annotator-listing"></ul>\n    <div class="annotator-controls">\n      <a href="#cancel" class="annotator-cancel">'+f("Cancel")+'</a>\n<a href="#save" class="annotator-save annotator-focus">'+f("Save")+"</a>\n    </div>\n  </form>\n</div>",Editor.prototype.options={},Editor.prototype.show=function(e){return L.Util.preventEventDefault(e),this.element.removeClass(this.classes.hide),this.element.find(".annotator-save").addClass(this.classes.focus),this.checkOrientation(),this.element.find(":input:first").focus(),this.setupDraggables(),this.publish("show")},Editor.prototype.hide=function(e){return L.Util.preventEventDefault(e),this.element.addClass(this.classes.hide),this.publish("hide")},Editor.prototype.load=function(e){var t,n,i,r;for(this.annotation=e,this.publish("load",[this.annotation]),r=this.fields,n=0,i=r.length;n<i;n++)t=r[n],t.load(t.element,this.annotation);return this.show()},Editor.prototype.submit=function(e){var t,n,i,r;for(L.Util.preventEventDefault(e),r=this.fields,n=0,i=r.length;n<i;n++)t=r[n],t.submit(t.element,this.annotation);return this.publish("save",[this.annotation]),this.hide()},Editor.prototype.addField=function(e){var n,i,r;switch(i=t.extend({id:"annotator-field-"+L.Util.uuid(),type:"input",label:"",load:function(){},submit:function(){}},e),r=null,n=t('<li class="annotator-item" />'),i.element=n[0],i.type){case"textarea":r=t("<textarea />");break;case"input":case"checkbox":r=t("<input />");break;case"select":r=t("<select />")}return n.append(r),r.attr({id:i.id,placeholder:i.label}),"checkbox"===i.type&&(r[0].type="checkbox",n.addClass("annotator-checkbox"),n.append(t("<label />",{for:i.id,html:i.label}))),this.element.find("ul:first").append(n),this.fields.push(i),i.element},Editor.prototype.checkOrientation=function(){var e,t;return Editor.__super__.checkOrientation.apply(this,arguments),t=this.element.find("ul"),e=this.element.find(".annotator-controls"),this.element.hasClass(this.classes.invert.y)?e.insertBefore(t):e.is(":first-child")&&e.insertAfter(t),this},Editor.prototype.processKeypress=function(e){return 27===e.keyCode?this.hide():13!==e.keyCode||e.shiftKey?void 0:this.submit()},Editor.prototype.onCancelButtonMouseover=function(){return this.element.find("."+this.classes.focus).removeClass(this.classes.focus)},Editor.prototype.setupDraggables=function(){var e,n,i,r,o,a,s,l,c,u,d;return this.element.find(".annotator-resize").remove(),i=this.element.hasClass(this.classes.invert.y)?this.element.find(".annotator-item:last"):this.element.find(".annotator-item:first"),i&&t('<span class="annotator-resize"></span>').appendTo(i),o=null,e=this.classes,r=this.element,u=null,c=r.find(".annotator-resize"),n=r.find(".annotator-controls"),d=!1,a=function(e){if(e.target===this)return o={element:this,top:e.pageY,left:e.pageX},u=r.find("textarea:first"),t(window).bind({"mouseup.annotator-editor-resize":l,"mousemove.annotator-editor-resize":s}),e.preventDefault()},l=function(){return o=null,t(window).unbind(".annotator-editor-resize")},s=function(t){var i,a,s,l,p;if(o&&!1===d)return i={top:t.pageY-o.top,left:t.pageX-o.left},o.element===c[0]?(l=u.outerHeight(),p=u.outerWidth(),a=r.hasClass(e.invert.x)?-1:1,s=r.hasClass(e.invert.y)?1:-1,u.height(l+i.top*s),u.width(p+i.left*a),u.outerHeight()!==l&&(o.top=t.pageY),u.outerWidth()!==p&&(o.left=t.pageX)):o.element===n[0]&&(r.css({top:parseInt(r.css("top"),10)+i.top,left:parseInt(r.css("left"),10)+i.left}),o.top=t.pageY,o.left=t.pageX),d=!0,setTimeout(function(){return d=!1},1e3/60)},c.bind("mousedown",a),n.bind("mousedown",a)},Editor}(L.Widget);var D,S=function(e,t){return function(){return e.apply(t,arguments)}},C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e};L.Viewer=function(e){function Viewer(e){this.onDeleteClick=S(this.onDeleteClick,this),this.onEditClick=S(this.onEditClick,this),this.load=S(this.load,this),this.hide=S(this.hide,this),this.show=S(this.show,this),Viewer.__super__.constructor.call(this,t(this.html.element)[0],e),this.item=t(this.html.item)[0],this.fields=[],this.annotations=[]}return k(Viewer,e),Viewer.prototype.events={".annotator-edit click":"onEditClick",".annotator-delete click":"onDeleteClick"},Viewer.prototype.classes={hide:"annotator-hide",showControls:"annotator-visible"},Viewer.prototype.html={element:'<div class="annotator-outer annotator-viewer">\n  <ul class="annotator-widget annotator-listing"></ul>\n</div>',item:'<li class="annotator-annotation annotator-item">\n  <span class="annotator-controls">\n    <a href="#" title="View as webpage" class="annotator-link">View as webpage</a>\n    <button title="Edit" class="annotator-edit">Edit</button>\n    <button title="Delete" class="annotator-delete">Delete</button>\n  </span>\n</li>'},Viewer.prototype.options={readOnly:!1},Viewer.prototype.show=function(e){var t,n=this;return L.Util.preventEventDefault(e),t=this.element.find(".annotator-controls").addClass(this.classes.showControls),setTimeout(function(){return t.removeClass(n.classes.showControls)},500),this.element.removeClass(this.classes.hide),this.checkOrientation().publish("show")},Viewer.prototype.isShown=function(){return!this.element.hasClass(this.classes.hide)},Viewer.prototype.hide=function(e){return L.Util.preventEventDefault(e),this.element.addClass(this.classes.hide),this.publish("hide")},Viewer.prototype.load=function(e){var n,i,r,o,a,s,l,c,u,d,p,h,f,_,m,g,v;for(this.annotations=e||[],p=this.element.find("ul:first").empty(),g=this.annotations,h=0,_=g.length;h<_;h++)for(n=g[h],c=t(this.item).clone().appendTo(p).data("annotation",n),r=c.find(".annotator-controls"),u=r.find(".annotator-link"),a=r.find(".annotator-edit"),o=r.find(".annotator-delete"),d=new D(n.links||[]).get("alternate",{type:"text/html"}),0===d.length||null==d[0].href?u.remove():u.attr("href",d[0].href),this.options.readOnly?(a.remove(),o.remove()):i={showEdit:function(){return a.removeAttr("disabled")},hideEdit:function(){return a.attr("disabled","disabled")},showDelete:function(){return o.removeAttr("disabled")},hideDelete:function(){return o.attr("disabled","disabled")}},v=this.fields,f=0,m=v.length;f<m;f++)l=v[f],s=t(l.element).clone().appendTo(c)[0],l.load(s,n,i);return this.publish("load",[this.annotations]),this.show()},Viewer.prototype.addField=function(e){var n;return n=t.extend({load:function(){}},e),n.element=t("<div />")[0],this.fields.push(n),n.element,this},Viewer.prototype.onEditClick=function(e){return this.onButtonClick(e,"edit")},Viewer.prototype.onDeleteClick=function(e){return this.onButtonClick(e,"delete")},Viewer.prototype.onButtonClick=function(e,n){var i;return i=t(e.target).parents(".annotator-annotation"),this.publish(n,[i.data("annotation")])},Viewer}(L.Widget),D=function(){function LinkParser(e){this.data=e}return LinkParser.prototype.get=function(e,n){var i,r,o,a,s,l,c,u;for(null==n&&(n={}),n=t.extend({},n,{rel:e}),o=function(){var e;e=[];for(r in n)C.call(n,r)&&(a=n[r],e.push(r));return e}(),c=this.data,u=[],s=0,l=c.length;s<l;s++)i=c[s],o.reduce(function(e,t){return e&&i[t]===n[t]},!0)&&u.push(i);return u},LinkParser}();var L,S=function(e,t){return function(){return e.apply(t,arguments)}},C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e};L=L||{},L.Notification=function(e){function Notification(e){this.hide=S(this.hide,this),this.show=S(this.show,this),Notification.__super__.constructor.call(this,t(this.options.html).appendTo(document.body)[0],e)}return k(Notification,e),Notification.prototype.events={click:"hide"},Notification.prototype.options={html:"<div class='annotator-notice'></div>",classes:{show:"annotator-notice-show",info:"annotator-notice-info",success:"annotator-notice-success",error:"annotator-notice-error"}},Notification.prototype.show=function(e,n){return null==n&&(n=L.Notification.INFO),this.currentStatus=n,t(this.element).addClass(this.options.classes.show).addClass(this.options.classes[this.currentStatus]).html(u.escape(e||"")),setTimeout(this.hide,5e3),this},Notification.prototype.hide=function(){return null==this.currentStatus&&(this.currentStatus=L.Notification.INFO),t(this.element).removeClass(this.options.classes.show).removeClass(this.options.classes[this.currentStatus]),this},Notification}(w),L.Notification.INFO="info",L.Notification.SUCCESS="success",L.Notification.ERROR="error",t(function(){var e;return e=new L.Notification,L.showNotification=e.show,L.hideNotification=e.hide});var h,C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e};L.Plugin.Unsupported=function(e){function Unsupported(){return h=Unsupported.__super__.constructor.apply(this,arguments)}return k(Unsupported,e),Unsupported.prototype.options={message:L._t("Sorry your current browser does not support the Annotator")},Unsupported.prototype.pluginInit=function(){var e=this;if(!L.supported())return t(function(){if(L.showNotification(e.options.message),void 0===window.XMLHttpRequest&&void 0!==ActiveXObject)return t("html").addClass("ie6")})},Unsupported}(L.Plugin);var O,x,R,A,C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e};R=function(e){var t,n,i,r,o,a;return r="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",t=e.match(new RegExp(r)),i=0,n=new Date(t[1],0,1),t[3]&&n.setMonth(t[3]-1),t[5]&&n.setDate(t[5]),t[7]&&n.setHours(t[7]),t[8]&&n.setMinutes(t[8]),t[10]&&n.setSeconds(t[10]),t[12]&&n.setMilliseconds(1e3*Number("0."+t[12])),t[14]&&(i=60*Number(t[16])+Number(t[17]),i*=null!=(a="-"===t[15])?a:{1:-1}),i-=n.getTimezoneOffset(),o=Number(n)+60*i*1e3,n.setTime(Number(o)),n},O=function(e){var t,n,i,r,o,a,s,l,c,u,d,p;if("undefined"!=typeof atob&&null!==atob)return atob(e);if(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,t=0,"",p=[],!e)return e;for(e+="";l<e.length;)r=n.indexOf(e.charAt(l++)),o=n.indexOf(e.charAt(l++)),a=n.indexOf(e.charAt(l++)),s=n.indexOf(e.charAt(l++)),i=r<<18|o<<12|a<<6|s,c=i>>16&255,u=i>>8&255,d=255&i,p[t++]=64===a?String.fromCharCode(c):64===s?String.fromCharCode(c,u):String.fromCharCode(c,u,d);return p.join("")},x=function(e){var t,n,i;if(0!==(t=e.length%4))for(n=0,i=4-t;0<=i?n<i:n>i;0<=i?++n:--n)e+="=";return e=e.replace(/-/g,"+"),e=e.replace(/_/g,"/"),O(e)},A=function(e){var t,n;return n=e.split("."),n[0],t=n[1],n[2],JSON.parse(x(t))},L.Plugin.Auth=function(e){function Auth(e,t){Auth.__super__.constructor.apply(this,arguments),this.waitingForToken=[],this.options.token?this.setToken(this.options.token):this.requestToken()}return k(Auth,e),Auth.prototype.options={token:null,tokenUrl:"/auth/token",autoFetch:!0},Auth.prototype.requestToken=function(){var e=this;return this.requestInProgress=!0,t.ajax({url:this.options.tokenUrl,dataType:"text",xhrFields:{withCredentials:!0}}).done(function(t,n,i){return e.setToken(t)}).fail(function(e,t,n){var i;return i=L._t("Couldn't get auth token:"),console.error(i+" "+n,e),L.showNotification(i+" "+e.responseText,L.Notification.ERROR)}).always(function(){return e.requestInProgress=!1})},Auth.prototype.setToken=function(e){var t,n=this;if(this.token=e,this._unsafeToken=A(e),this.haveValidToken()){for(this.options.autoFetch&&(this.refreshTimeout=setTimeout(function(){return n.requestToken()},1e3*(this.timeToExpiry()-2))),this.updateHeaders(),t=[];this.waitingForToken.length>0;)t.push(this.waitingForToken.pop()(this._unsafeToken));return t}if(console.warn(L._t("Didn't get a valid token.")),this.options.autoFetch)return console.warn(L._t("Getting a new token in 10s.")),setTimeout(function(){return n.requestToken()},1e4)},Auth.prototype.haveValidToken=function(){return!!(this._unsafeToken&&this._unsafeToken.issuedAt&&this._unsafeToken.ttl&&this._unsafeToken.consumerKey&&this.timeToExpiry()>0)},Auth.prototype.timeToExpiry=function(){var e,t,n,i;return n=(new Date).getTime()/1e3,t=R(this._unsafeToken.issuedAt).getTime()/1e3,e=t+this._unsafeToken.ttl,i=e-n,i>0?i:0},Auth.prototype.updateHeaders=function(){var e;return e=this.element.data("annotator:headers"),this.element.data("annotator:headers",t.extend(e,{"x-annotator-auth-token":this.token}))},Auth.prototype.withToken=function(e){if(null!=e)return this.haveValidToken()?e(this._unsafeToken):(this.waitingForToken.push(e),this.requestInProgress?void 0:this.requestToken())},Auth}(L.Plugin);var S=function(e,t){return function(){return e.apply(t,arguments)}},C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e},P=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};L.Plugin.Store=function(e){function Store(e,t){this._onError=S(this._onError,this),this._onLoadAnnotationsFromSearch=S(this._onLoadAnnotationsFromSearch,this),this._onLoadAnnotations=S(this._onLoadAnnotations,this),this._getAnnotations=S(this._getAnnotations,this),Store.__super__.constructor.apply(this,arguments),this.annotations=[]}return k(Store,e),Store.prototype.events={annotationCreated:"annotationCreated",annotationDeleted:"annotationDeleted",annotationUpdated:"annotationUpdated"},Store.prototype.options={annotationData:{},emulateHTTP:!1,loadFromSearch:!1,prefix:"/store",urls:{create:"/annotations",read:"/annotations/:id",update:"/annotations/:id",destroy:"/annotations/:id",search:"/search"}},Store.prototype.pluginInit=function(){if(L.supported())return this.annotator.plugins.Auth?this.annotator.plugins.Auth.withToken(this._getAnnotations):this._getAnnotations()},Store.prototype._getAnnotations=function(){return this.options.loadFromSearch?this.loadAnnotationsFromSearch(this.options.loadFromSearch):this.loadAnnotations()},Store.prototype.annotationCreated=function(e){var t=this;return P.call(this.annotations,e)<0?(this.registerAnnotation(e),this._apiRequest("create",e,function(n){return null==n.id&&console.warn(L._t("Warning: No ID returned from server for annotation "),e),t.updateAnnotation(e,n)})):this.updateAnnotation(e,{})},Store.prototype.annotationUpdated=function(e){var t=this;if(P.call(this.annotations,e)>=0)return this._apiRequest("update",e,function(n){return t.updateAnnotation(e,n)})},Store.prototype.annotationDeleted=function(e){var t=this;if(P.call(this.annotations,e)>=0)return this._apiRequest("destroy",e,function(){return t.unregisterAnnotation(e)})},Store.prototype.registerAnnotation=function(e){return this.annotations.push(e)},Store.prototype.unregisterAnnotation=function(e){return this.annotations.splice(this.annotations.indexOf(e),1)},Store.prototype.updateAnnotation=function(e,n){return P.call(this.annotations,e)<0?console.error(L._t("Trying to update unregistered annotation!")):t.extend(e,n),t(e.highlights).data("annotation",e)},Store.prototype.loadAnnotations=function(){return this._apiRequest("read",null,this._onLoadAnnotations)},Store.prototype._onLoadAnnotations=function(e){var t,n,i,r,o,a,s,l,c;for(null==e&&(e=[]),i={},c=this.annotations,o=0,s=c.length;o<s;o++)t=c[o],i[t.id]=t;for(r=[],a=0,l=e.length;a<l;a++)t=e[a],i[t.id]?(n=i[t.id],this.updateAnnotation(n,t)):r.push(t);return this.annotations=this.annotations.concat(r),this.annotator.loadAnnotations(r.slice())},Store.prototype.loadAnnotationsFromSearch=function(e){return this._apiRequest("search",e,this._onLoadAnnotationsFromSearch)},Store.prototype._onLoadAnnotationsFromSearch=function(e){return null==e&&(e={}),this._onLoadAnnotations(e.rows||[])},Store.prototype.dumpAnnotations=function(){var e,t,n,i,r;for(i=this.annotations,r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(JSON.parse(this._dataFor(e)));return r},Store.prototype._apiRequest=function(e,n,i){var r,o,a,s;return r=n&&n.id,s=this._urlFor(e,r),o=this._apiRequestOptions(e,n,i),a=t.ajax(s,o),a._id=r,a._action=e,a},Store.prototype._apiRequestOptions=function(e,n,i){var r,o,a;return o=this._methodFor(e),a={type:o,headers:this.element.data("annotator:headers"),dataType:"json",success:i||function(){},error:this._onError},!this.options.emulateHTTP||"PUT"!==o&&"DELETE"!==o||(a.headers=t.extend(a.headers,{"X-HTTP-Method-Override":o}),a.type="POST"),"search"===e?a=t.extend(a,{data:n}):(r=n&&this._dataFor(n),this.options.emulateJSON?(a.data={json:r},this.options.emulateHTTP&&(a.data._method=o),a):a=t.extend(a,{data:r,contentType:"application/json; charset=utf-8"}))},Store.prototype._urlFor=function(e,t){var n;return n=null!=this.options.prefix?this.options.prefix:"",n+=this.options.urls[e],n=n.replace(/\/:id/,null!=t?"/"+t:""),n=n.replace(/:id/,null!=t?t:"")},Store.prototype._methodFor=function(e){var t;return t={create:"POST",read:"GET",update:"PUT",destroy:"DELETE",search:"GET"},t[e]},Store.prototype._dataFor=function(e){var n,i;return i=e.highlights,delete e.highlights,t.extend(e,this.options.annotationData),n=JSON.stringify(e),i&&(e.highlights=i),n},Store.prototype._onError=function(e){var t,n;switch(t=e._action,n=L._t("Sorry we could not ")+t+L._t(" this annotation"),"search"===e._action?n=L._t("Sorry we could not search the store for annotations"):"read"!==e._action||e._id||(n=L._t("Sorry we could not ")+t+L._t(" the annotations from the store")),e.status){case 401:n=L._t("Sorry you are not allowed to ")+t+L._t(" this annotation");break;case 404:n=L._t("Sorry we could not connect to the annotations store");break;case 500:n=L._t("Sorry something went wrong with the annotation store")}return L.showNotification(n,L.Notification.ERROR),console.error(L._t("API request failed:")+" '"+e.status+"'")},Store}(L.Plugin);var S=function(e,t){return function(){return e.apply(t,arguments)}},C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e};L.Plugin.Permissions=function(e){function Permissions(e,t){this._setAuthFromToken=S(this._setAuthFromToken,this),this.updateViewer=S(this.updateViewer,this),this.updateAnnotationPermissions=S(this.updateAnnotationPermissions,this),this.updatePermissionsField=S(this.updatePermissionsField,this),this.addFieldsToAnnotation=S(this.addFieldsToAnnotation,this),Permissions.__super__.constructor.apply(this,arguments),this.options.user&&(this.setUser(this.options.user),delete this.options.user)}return k(Permissions,e),Permissions.prototype.events={beforeAnnotationCreated:"addFieldsToAnnotation"},Permissions.prototype.options={showViewPermissionsCheckbox:!0,showEditPermissionsCheckbox:!0,userId:function(e){return e},userString:function(e){return e},userAuthorize:function(e,t,n){var i,r,o,a;if(t.permissions){if(r=t.permissions[e]||[],0===r.length)return!0;for(o=0,a=r.length;o<a;o++)if(i=r[o],this.userId(n)===i)return!0;return!1}return!t.user||!!n&&this.userId(n)===this.userId(t.user)},user:"",permissions:{read:[],update:[],delete:[],admin:[]}},Permissions.prototype.pluginInit=function(){var e,t,n=this;if(L.supported())return t=this,e=function(e,n){return function(i,r){return t[e].call(t,n,i,r)}},!this.user&&this.annotator.plugins.Auth&&this.annotator.plugins.Auth.withToken(this._setAuthFromToken),!0===this.options.showViewPermissionsCheckbox&&this.annotator.editor.addField({type:"checkbox",label:L._t("Allow anyone to <strong>view</strong> this annotation"),load:e("updatePermissionsField","read"),submit:e("updateAnnotationPermissions","read")}),!0===this.options.showEditPermissionsCheckbox&&this.annotator.editor.addField({type:"checkbox",label:L._t("Allow anyone to <strong>edit</strong> this annotation"),load:e("updatePermissionsField","update"),submit:e("updateAnnotationPermissions","update")}),this.annotator.viewer.addField({load:this.updateViewer}),this.annotator.plugins.Filter?this.annotator.plugins.Filter.addFilter({label:L._t("User"),property:"user",isFiltered:function(e,t){var i,r,o,a;if(t=n.options.userString(t),!e||!t)return!1;for(a=e.split(/\s*/),r=0,o=a.length;r<o;r++)if(i=a[r],-1===t.indexOf(i))return!1;return!0}}):void 0},Permissions.prototype.setUser=function(e){return this.user=e},Permissions.prototype.addFieldsToAnnotation=function(e){if(e&&(e.permissions=this.options.permissions,this.user))return e.user=this.user},Permissions.prototype.authorize=function(e,t,n){return void 0===n&&(n=this.user),!this.options.userAuthorize||this.options.userAuthorize.call(this.options,e,t,n)},Permissions.prototype.updatePermissionsField=function(e,n,i){var r;return n=t(n).show(),r=n.find("input").removeAttr("disabled"),this.authorize("admin",i)||n.hide(),this.authorize(e,i||{},null)?r.attr("checked","checked"):r.removeAttr("checked")},Permissions.prototype.updateAnnotationPermissions=function(e,n,i){return i.permissions||(i.permissions=this.options.permissions),e+"-permissions",t(n).find("input").is(":checked")?i.permissions[e]=[]:i.permissions[e]=[this.options.userId(this.user)]},Permissions.prototype.updateViewer=function(e,n,i){var r,o;if(e=t(e),o=this.options.userString(n.user),n.user&&o&&"string"==typeof o?(r=L.Util.escape(this.options.userString(n.user)),e.html(r).addClass("annotator-user")):e.remove(),i&&(this.authorize("update",n)||i.hideEdit(),!this.authorize("delete",n)))return i.hideDelete()},Permissions.prototype._setAuthFromToken=function(e){return this.setUser(e.userId)},Permissions}(L.Plugin);var h,S=function(e,t){return function(){return e.apply(t,arguments)}},C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e},P=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};L.Plugin.AnnotateItPermissions=function(e){function AnnotateItPermissions(){return this._setAuthFromToken=S(this._setAuthFromToken,this),this.updateAnnotationPermissions=S(this.updateAnnotationPermissions,this),this.updatePermissionsField=S(this.updatePermissionsField,this),this.addFieldsToAnnotation=S(this.addFieldsToAnnotation,this),h=AnnotateItPermissions.__super__.constructor.apply(this,arguments)}return k(AnnotateItPermissions,e),AnnotateItPermissions.prototype.options={showViewPermissionsCheckbox:!0,showEditPermissionsCheckbox:!0,groups:{world:"group:__world__",authenticated:"group:__authenticated__",consumer:"group:__consumer__"},userId:function(e){return e.userId},userString:function(e){return e.userId},userAuthorize:function(e,t,n){var i,r,o,a,s,l;return r=t.permissions||{},i=r[e]||[],o=this.groups.world,P.call(i,o)>=0||null!=n&&null!=n.userId&&null!=n.consumerKey&&(n.userId===t.user&&n.consumerKey===t.consumer||(a=this.groups.authenticated,P.call(i,a)>=0||(n.consumerKey===t.consumer&&(s=this.groups.consumer,P.call(i,s)>=0)||(n.consumerKey===t.consumer&&(l=n.userId,P.call(i,l)>=0)||!(n.consumerKey!==t.consumer||!n.admin)))))},permissions:{read:["group:__world__"],update:[],delete:[],admin:[]}},AnnotateItPermissions.prototype.addFieldsToAnnotation=function(e){if(e&&(e.permissions=this.options.permissions,this.user))return e.user=this.user.userId,e.consumer=this.user.consumerKey},AnnotateItPermissions.prototype.updatePermissionsField=function(e,n,i){var r;return n=t(n).show(),r=n.find("input").removeAttr("disabled"),this.authorize("admin",i)||n.hide(),this.user&&this.authorize(e,i||{},{userId:"__nonexistentuser__",consumerKey:this.user.consumerKey})?r.attr("checked","checked"):r.removeAttr("checked")},AnnotateItPermissions.prototype.updateAnnotationPermissions=function(e,n,i){return i.permissions||(i.permissions=this.options.permissions),e+"-permissions",t(n).find("input").is(":checked")?i.permissions[e]=["read"===e?this.options.groups.world:this.options.groups.consumer]:i.permissions[e]=[]},AnnotateItPermissions.prototype._setAuthFromToken=function(e){return this.setUser(e)},AnnotateItPermissions}(L.Plugin.Permissions);var S=function(e,t){return function(){return e.apply(t,arguments)}},C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e};L.Plugin.Filter=function(e){function Filter(e,n){this._onPreviousClick=S(this._onPreviousClick,this),this._onNextClick=S(this._onNextClick,this),this._onFilterKeyup=S(this._onFilterKeyup,this),this._onFilterBlur=S(this._onFilterBlur,this),this._onFilterFocus=S(this._onFilterFocus,this),this.updateHighlights=S(this.updateHighlights,this);var i;e=t(this.html.element).appendTo((null!=n?n.appendTo:void 0)||this.options.appendTo),Filter.__super__.constructor.call(this,e,n),(i=this.options).filters||(i.filters=[]),this.filter=t(this.html.filter),this.filters=[],this.current=0}return k(Filter,e),Filter.prototype.events={".annotator-filter-property input focus":"_onFilterFocus",".annotator-filter-property input blur":"_onFilterBlur",".annotator-filter-property input keyup":"_onFilterKeyup",".annotator-filter-previous click":"_onPreviousClick",".annotator-filter-next click":"_onNextClick",".annotator-filter-clear click":"_onClearClick"},Filter.prototype.classes={active:"annotator-filter-active",hl:{hide:"annotator-hl-filtered",active:"annotator-hl-active"}},Filter.prototype.html={element:'<div class="annotator-filter">\n  <strong>'+L._t("Navigate:")+'</strong>\n<span class="annotator-filter-navigation">\n  <button class="annotator-filter-previous">'+L._t("Previous")+'</button>\n<button class="annotator-filter-next">'+L._t("Next")+"</button>\n</span>\n<strong>"+L._t("Filter by:")+"</strong>\n</div>",filter:'<span class="annotator-filter-property">\n  <label></label>\n  <input/>\n  <button class="annotator-filter-clear">'+L._t("Clear")+"</button>\n</span>"},Filter.prototype.options={appendTo:"body",filters:[],addAnnotationFilter:!0,isFiltered:function(e,t){var n,i,r,o;if(!e||!t)return!1;for(o=e.split(/\s+/),i=0,r=o.length;i<r;i++)if(n=o[i],-1===t.indexOf(n))return!1;return!0}},Filter.prototype.pluginInit=function(){var e,t,n,i;for(i=this.options.filters,t=0,n=i.length;t<n;t++)e=i[t],this.addFilter(e);if(this.updateHighlights(),this._setupListeners()._insertSpacer(),!0===this.options.addAnnotationFilter)return this.addFilter({label:L._t("Annotation"),property:"text"})},Filter.prototype.destroy=function(){var e,n;return Filter.__super__.destroy.apply(this,arguments),n=t("html"),e=parseInt(n.css("padding-top"),10)||0,n.css("padding-top",e-this.element.outerHeight()),this.element.remove()},Filter.prototype._insertSpacer=function(){var e,n;return n=t("html"),e=parseInt(n.css("padding-top"),10)||0,n.css("padding-top",e+this.element.outerHeight()),this},Filter.prototype._setupListeners=function(){var e,t,n,i;for(t=["annotationsLoaded","annotationCreated","annotationUpdated","annotationDeleted"],n=0,i=t.length;n<i;n++)e=t[n],this.annotator.subscribe(e,this.updateHighlights);return this},Filter.prototype.addFilter=function(e){var n,i;return i=t.extend({label:"",property:"",isFiltered:this.options.isFiltered},e),function(){var e,t,r,o;for(r=this.filters,o=[],e=0,t=r.length;e<t;e++)n=r[e],n.property===i.property&&o.push(n);return o}.call(this).length||(i.id="annotator-filter-"+i.property,i.annotations=[],i.element=this.filter.clone().appendTo(this.element),i.element.find("label").html(i.label).attr("for",i.id),i.element.find("input").attr({id:i.id,placeholder:L._t("Filter by ")+i.label+""}),i.element.find("button").hide(),i.element.data("filter",i),this.filters.push(i)),this},Filter.prototype.updateFilter=function(e){var n,i,r,o,a,s,l;if(e.annotations=[],this.updateHighlights(),this.resetHighlights(),r=t.trim(e.element.find("input").val())){for(i=this.highlights.map(function(){return t(this).data("annotation")}),l=t.makeArray(i),a=0,s=l.length;a<s;a++)n=l[a],o=n[e.property],e.isFiltered(r,o)&&e.annotations.push(n);return this.filterHighlights()}},Filter.prototype.updateHighlights=function(){return this.highlights=this.annotator.element.find(".annotator-hl:visible"),this.filtered=this.highlights.not(this.classes.hl.hide)},Filter.prototype.filterHighlights=function(){var e,n,i,r,o,a,s,l,c,u;for(e=t.grep(this.filters,function(e){return!!e.annotations.length}),r=(null!=(u=e[0])?u.annotations:void 0)||[],e.length>1&&(i=[],t.each(e,function(){return t.merge(i,this.annotations)}),s=[],r=[],t.each(i,function(){return-1===t.inArray(this,s)?s.push(this):r.push(this)})),o=this.highlights,a=l=0,c=r.length;l<c;a=++l)n=r[a],o=o.not(n.highlights);return o.addClass(this.classes.hl.hide),this.filtered=this.highlights.not(this.classes.hl.hide),this},Filter.prototype.resetHighlights=function(){return this.highlights.removeClass(this.classes.hl.hide),this.filtered=this.highlights,this},Filter.prototype._onFilterFocus=function(e){var n;return n=t(e.target),n.parent().addClass(this.classes.active),n.next("button").show()},Filter.prototype._onFilterBlur=function(e){var n;if(!e.target.value)return n=t(e.target),n.parent().removeClass(this.classes.active),n.next("button").hide()},Filter.prototype._onFilterKeyup=function(e){var n;if(n=t(e.target).parent().data("filter"))return this.updateFilter(n)},Filter.prototype._findNextHighlight=function(e){var t,n,i,r,o,a,s,l;return this.highlights.length?(a=e?0:-1,l=e?-1:0,s=e?"lt":"gt",t=this.highlights.not("."+this.classes.hl.hide),i=t.filter("."+this.classes.hl.active),i.length||(i=t.eq(a)),n=i.data("annotation"),r=t.index(i[0]),o=t.filter(":"+s+"("+r+")").not(n.highlights).eq(l),o.length||(o=t.eq(l)),this._scrollToHighlight(o.data("annotation").highlights)):this},Filter.prototype._onNextClick=function(e){return this._findNextHighlight()},Filter.prototype._onPreviousClick=function(e){return this._findNextHighlight(!0)},Filter.prototype._scrollToHighlight=function(e){return e=t(e),this.highlights.removeClass(this.classes.hl.active),e.addClass(this.classes.hl.active),t("html, body").animate({scrollTop:e.offset().top-(this.element.height()+20)},150)},Filter.prototype._onClearClick=function(e){return t(e.target).prev("input").val("").keyup().blur()},Filter}(L.Plugin);var S=function(e,t){return function(){return e.apply(t,arguments)}},C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e};L.Plugin.Markdown=function(e){function Markdown(e,t){this.updateTextField=S(this.updateTextField,this),null!=("undefined"!=typeof Showdown&&null!==Showdown?Showdown.converter:void 0)?(Markdown.__super__.constructor.apply(this,arguments),this.converter=new Showdown.converter):console.error(L._t("To use the Markdown plugin, you must include Showdown into the page first."))}return k(Markdown,e),Markdown.prototype.events={annotationViewerTextField:"updateTextField"},Markdown.prototype.updateTextField=function(e,n){var i;return i=L.Util.escape(n.text||""),t(e).html(this.convert(i))},Markdown.prototype.convert=function(e){return this.converter.makeHtml(e)},Markdown}(L.Plugin);var h,S=function(e,t){return function(){return e.apply(t,arguments)}},C={}.hasOwnProperty,k=function(e,t){function ctor(){this.constructor=e}for(var n in t)C.call(t,n)&&(e[n]=t[n]);return ctor.prototype=t.prototype,e.prototype=new ctor,e.__super__=t.prototype,e};L.Plugin.Tags=function(e){function Tags(){return this.setAnnotationTags=S(this.setAnnotationTags,this),this.updateField=S(this.updateField,this),h=Tags.__super__.constructor.apply(this,arguments)}return k(Tags,e),Tags.prototype.options={parseTags:function(e){var n;return e=t.trim(e),n=[],e&&(n=e.split(/\s+/)),n},stringifyTags:function(e){return e.join(" ")}},Tags.prototype.field=null,Tags.prototype.input=null,Tags.prototype.pluginInit=function(){if(L.supported())return this.field=this.annotator.editor.addField({label:L._t("Add some tags here")+"",load:this.updateField,submit:this.setAnnotationTags}),this.annotator.viewer.addField({load:this.updateViewer}),this.annotator.plugins.Filter&&this.annotator.plugins.Filter.addFilter({label:L._t("Tag"),property:"tags",isFiltered:L.Plugin.Tags.filterCallback}),this.input=t(this.field).find(":input")},Tags.prototype.parseTags=function(e){return this.options.parseTags(e)},Tags.prototype.stringifyTags=function(e){return this.options.stringifyTags(e)},Tags.prototype.updateField=function(e,t){var n;return n="",t.tags&&(n=this.stringifyTags(t.tags)),this.input.val(n)},Tags.prototype.setAnnotationTags=function(e,t){return t.tags=this.parseTags(this.input.val())},Tags.prototype.updateViewer=function(e,n){return e=t(e),n.tags&&t.isArray(n.tags)&&n.tags.length?e.addClass("annotator-tags").html(function(){return t.map(n.tags,function(e){return'<span class="annotator-tag">'+L.Util.escape(e)+"</span>"}).join(" ")}):e.remove()},Tags}(L.Plugin),L.Plugin.Tags.filterCallback=function(e,t){var n,i,r,o,a,s,l,c;if(null==t&&(t=[]),r=0,i=[],e)for(i=e.split(/\s+/g),a=0,l=i.length;a<l;a++)if(n=i[a],t.length)for(s=0,c=t.length;s<c;s++)o=t[s],-1!==o.indexOf(n)&&(r+=1);return r===i.length};var C={}.hasOwnProperty,P=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};L.prototype.setupPlugins=function(e,n){var i,r,o,a,s,l,c,u;null==e&&(e={}),null==n&&(n={}),s=L.Util.getGlobal(),o=["Unsupported","Auth","Tags","Filter","Store","AnnotateItPermissions"],s.Showdown&&o.push("Markdown"),a=s.location.href.split(/#|\?/).shift()||"",r={Tags:{},Filter:{filters:[{label:L._t("User"),property:"user"},{label:L._t("Tags"),property:"tags"}]},Auth:{tokenUrl:e.tokenUrl||"http://annotateit.org/api/token"},Store:{prefix:e.storeUrl||"http://annotateit.org/api",annotationData:{uri:a},loadFromSearch:{uri:a}}};for(i in n)C.call(n,i)&&(n[i],P.call(o,i)<0&&o.push(i));for(t.extend(!0,r,n),u=[],l=0,c=o.length;l<c;l++)i=o[l],i in r&&!r[i]?u.push(void 0):u.push(this.addPlugin(i,r[i]));return u},e.exports=L}).call(t,n(1),n(1))},,,,,,,,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o=n(10),a=n(1),s=n(4),l=n(8),c=n(12),u=n(279),d=n(14),p=n(11),h="/api/v1/usage-event/",f=n(115);return t=s.Collection.extend({model:u.Model,url:h,comparator:"client_timestamp",initialize:function(){this.on({add:this.onAdd,reset:this.onReset},this)},destroy:function(){this.off({add:this.onAdd,reset:this.onReset},this),this.reset()},validateCollection:function(e){var t=this,n=0,i=a.Deferred();return e=e||this,n=e.length,e.each(function(r){r instanceof t.model&&(r.isValid()||t.remove(r)),0===(n-=1)&&i.resolve(e)}),i.promise()},onReset:function(e){var t=this;this.validateCollection(e).done(function(e){e.length&&(t.sync("create",e).done(function(e){t.onSuccess(e)}).fail(function(e,n){t.onError(e,n)}),o.last(e.models)&&d.trigger("usage:stored_position",o.last(e.models)))})},onSuccess:function(){p.channel("usage").trigger("sync:success",this.models),this.remove(this.models)},setOffline:function(e){var t,n=this;o.each(e,function(e){t=n.findWhere({client_timestamp:e.client_timestamp}),o.isObject(t)&&t.set({is_offline:!0},{silent:!0})})},onError:function(e,t){f.error({source:"usage:collection#OnError handler",errorStatus:e.status,responseText:e.responseText,userAgent:window.navigator.userAgent,models:JSON.stringify(this.toJSON()),xhr:t}),this.setOffline(this.toJSON()),this.validateCollection()},onAdd:function(){var e=this;this.length>=l.USAGE_EVENT_SYNC_INTERVAL&&this.validateCollection(this).done(function(t){t.length&&e.sync("create",t).done(function(t){e.onSuccess(t)}).fail(function(t,n){e.onError(t,n)})})}}),i=function(e){return o.map(e,function(e){return o.extend(e,{is_offline:!0})})},r=function(e){e=e||{};var n=c.browserStore.read(l.LOCALSTORE_USAGE_KEY),r=new t;return r.reset(i(n)),r},{get:r,Collection:t}}.call(t,n,t,e))&&(e.exports=i)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a,s,l,c,u,d,p=n(1),h=n(10),f=n(12),_=n(8),m=n(18),g=n(14),v=/rgb\((\d+)/;return t=["#book","#book-info","#main","#nav-top-selector","#results","#working",".book-info"],i=["#book","#nav-top-selector"],o=function(){var e=f.retrieveReaderPreferences();return e.zoom_factor=f.retrieveZoomPreferences(),e},r=function(e){f.storeReaderPreferences("zoom_factor",e),e.zoom_factor&&f.storeZoomPreferences(e.zoom_factor)},function(){var e="rgb("+_.BRIGHTNESS_MAX+", "+_.BRIGHTNESS_MAX+","+_.BRIGHTNESS_MAX+")";p.each(t,function(t,n){p(n).css("backgroundColor",e)}),p.each(i,function(e,t){p(t).css("backgroundColor","white")})},a=function(e,t){var n,i=p(e),r=f.retrieveBrightnessPreferences()||"rgb(255,255,255)",o=Math.floor(v.exec(r)[1]);"darker"===t?o=Math.max(_.BRIGHTNESS_MIN,o-_.BRIGHTNESS_STEP_VALUE):"brighter"===t&&(o=Math.min(_.BRIGHTNESS_MAX,o+_.BRIGHTNESS_STEP_VALUE)),n="rgb("+o+", "+o+","+o+")",i.css("backgroundColor",n),i.parent().parent().css("backgroundColor",n),f.storeBrightnessPreferences(n)},s=function(e,t,n){var i=p(t),r=e||o().font_size||_.FONT_SIZE_DEFAULT,a=r+"em",s=h.template(i.attr("data-template")),l=n+" p, "+n+" div { font-size:"+a+"!important; }";_.IS_IE8?p("body").append("<style>"+l+"</style>"):i.text(s({font_size:a}))},l=function(e){var t,n=f.retrieveZoomPreferences();m.debug("Current zoom factor: "+n),"larger"===e?t=Math.min(_.ZOOM_FACTOR_MAX,n*_.ZOOM_FACTOR_STEP_MULTIPLE):"smaller"===e?t=Math.max(_.ZOOM_FACTOR_MIN,n/_.ZOOM_FACTOR_STEP_MULTIPLE):"number"==typeof e&&(t=e),g.trigger("zoom_factor:change",t),r({zoom_factor:t})},c=function(e,t,n){var i=p(t+" #pdf-main .pd,"+t+" #pdf-main .pf"),r=_.IS_IE8?Math.ceil(391*e+30):Math.ceil(i.width()*e+30),o=i.height()*e,a=i.size(),s=16*a*e,l=Math.ceil(o*a+s);Modernizr.csstransforms?(p(t+" #pdf-main,"+t+" #pdf-main.page").css(Modernizr.prefixed("transformOrigin"),"top left"),p(t+" #pdf-main,"+t+" #pdf-main.page").css(Modernizr.prefixed("transform"),"scale("+e+")"),p(t+" #pdf-main").css("height",l)):Modernizr.zoom&&!_.IS_IE8&&p(t+" #pdf-main .pd,"+t+" #pdf-main .pf,"+t+" #pdf-main.page").css("zoom",e),p(n).css("max-width",r)},u=function(e,t){p(t).removeAttr("style");var n=1*p(e+" #pdf-main .pd,"+e+" #pdf-main .pf,"+e+" #pdf-main.page").css("width").replace("px","").replace("pt",""),i=p(e).width(),r=i/n*.98;h.defer(function(e){l(e)},r)},d=o(),d.zoom_factor||f.storeZoomPreferences(_.ZOOM_FACTOR_DEFAULT),{getDisplayPreferences:o,updateBrightness:a,setFontSize:s,updateZoomFactor:l,setZoomFactor:c,zoomToFit:u}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a=n(1),s=n(8),l="/api/v1/player/kaltura_session/";return n(240),t=function(e){l=e},i=function(){var e="?"+a.param({reference_id:a(s.IBIS_BOOK_CLASS).attr("data-reference-id")});return l+e},r=function(){return a.getJSON(i())},o=function(e){var t,n=r();e=e||{},e.success&&n.done(e.success),n.fail(function(n){e.forbidden&&403===n.status?e.forbidden():(t=a.retryAjax({contentType:"application/json",url:i()}),e.success&&t.done(e.success),e.error&&t.fail(e.error))})},{getKalturaSession:r,setNewKalturaSessionEndpoint:t,endpoint:i,get:o}}.call(t,n,t,e))&&(e.exports=i)},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a=n(4),s=n(10),l=n(18),c=n(379),u=n(234).get(),d=n(378),p=n(14),h=n(234).get();return t=a.Model.extend({defaults:{top_percentage:0,chapter:null,book_id:null,chapter_href:null,title:null},initialize:function(){s.bindAll(this),this.bind("change",this.onChange,this)},onChange:function(e){(e.hasChanged("book_id")||e.hasChanged("chapter_href"))&&(e.items||(e.items=new r),e.items.chapter=e.get("chapter"),e.items.book_id=e.get("book_id"),e.items.chapter_href=e.get("chapter_href")),p.trigger("archive:change",e.changedAttributes())},parse:function(e){return s.isArray(e)?e[0]:e},removeAnchor:function(){delete this.target_anchor},resolveLink:function(e){var t,n,i,r=this.get("chapter_href");return-1!==e.indexOf("/")?i=new c.URI(e).resolve(new c.URI(r)).toString():(t="/"+r,n=new c.URI(e).resolve(new c.URI(t)).toString(),i=n.slice(1)),i},getSlug:function(e){var t,n=[u.get("router_prefix"),"view",this.get("title").replace(/\//g,"_").replace(/#/g,""),this.get("book_id")];return e&&n.push(this.resolveLink(e)),t=n.join("/").replace(/\s/g,"+"),e||(t+="/"),decodeURIComponent(t)},safeTitle:function(){var e=this.get("title")||"";return encodeURIComponent(e.replace(/\//g,"_").replace(/#/g,"").replace(/\s/g,"-"))},fetchItems:function(e){var t=this,n=l.getImageSize();if(e||(e={}),"undefined"!=typeof g&&g.loaded_from_server)return this.set({top_percentage:g.position_cache.position,chapter:g.position_cache.chapter,title:g.title,author_list:g.author_list,format:g.format,is_system_book:g.is_system_book,source:g.source,is_public:g.is_public,allow_scripts:g.allow_scripts,next_chapter_uri:g.position_cache.next_chapter_uri}),this.user_uuid=g.position_cache.user_uuid,p.trigger("document:render",this),void(e.success&&e.success());this.items.fetch({url:"/nest/epub/block/",type:"POST",data:{book_id:t.book_id||t.get("book_id"),hrefs:t.get("chapter_href")||void 0,package_resources:1,screen_width:h.get("enableImageResizing")?n.width:"",screen_height:h.get("enableImageResizing")?n.height:"",update_progress:!!t.get("chapter_href")},dataType:"json",success:function(e,n){var i=n[0];i&&(i.title&&t.set("title",i.title),i.chapter_label&&t.set("label",i.chapter_label),i.format&&t.set("format",i.format),i.source&&t.set("source",i.source),t.set("chapter","/api/v1/book/"+i.book_id+"/chapter/"+i.chapter_href),t.set("is_system_book",i.is_system_book),t.set("as_sample",i.as_sample),t.set("is_public",i.is_public),t.set("allow_scripts",i.allow_scripts),t.set("next_chapter_uri",i.next_chapter_uri),t.set("top_percentage",0)),p.trigger("document:render",t),n.error&&(alert(n.error),location.href=n.url)},error:function(e,t){}})},getOPFItem:function(){if(this.items)return this.items.find(function(e){return"application/xhtml+xml"===e.get("content_type")})},getChapterCSS:function(){var e,t,n,i,r=[],o={};if(!this.opf_item)return!1;for(i=this.opf_item.get("stylesheets"),this.items.each(function(e){"text/css"===e.get("content_type")&&(o[e.get("uri")]=e.get("content"))}),e=i.length,t=0;t<e;t+=1)(n=i[t])in o&&r.push(o[n]);return r},getContent:function(){var e;if(!this.opf_item)return!1;if(e=this.opf_item.get("content"),"crypt64"===this.opf_item.get("encoding"))try{if(e=d.decrypt(this.get("book_id"),this.opf_item.get("uri"),e),d.checksum(e)!==this.opf_item.get("checksum"))throw new Error(gettext("This chapter could not be decrypted."))}catch(e){return alert(e.message),!1}return e},getChapter:function(){var e={topPercentage:null,cssContent:null,content:null,targetAnchor:null,isSample:null,label:null,allowScripts:null};return this.opf_item=this.getOPFItem(),void 0===this.opf_item?(l.debug("No local chapter found, possibly not loaded yet?"),void alert(gettext("This book is still loading, please retry in a moment."))):(e.cssContent=this.getChapterCSS(),e.content=this.getContent(),e.topPercentage=this.opf_item.get("top_percentage")||0,e.targetAnchor=this.target_anchor,e.isSample=this.opf_item.get("as_sample"),e.label=this.opf_item.get("label"),e.allowScripts=this.opf_item.get("allow_scripts"),e)}}),i=a.Collection.extend({model:t}),o=a.Model.extend({defaults:{uri:null,content:null,content_type:null,label:null,encoding:null,checksum:null,date_modified:null,stylesheets:[]},parse:function(e){return{uri:e.uri||e.chapter_href,content:e.content,content_type:e.content_type,label:e.label||e.chapter_label,encoding:e.encoding,checksum:e.checksum,item_order:e.item_order,as_sample:e.as_sample,is_public:e.is_public,stylesheets:e.stylesheets,allow_scripts:e.allow_scripts}}}),r=a.Collection.extend({model:o,comparator:function(e){return e.get("item_order")},parse:function(e){var t=[];return s.each(e,function(e){t.push({uri:e.uri||e.chapter_href,content:e.content,content_type:e.content_type,label:e.label||e.chapter_label,encoding:e.encoding,checksum:e.checksum,item_order:e.item_order,as_sample:e.as_sample,is_public:e.is_public,allow_scripts:e.allow_scripts,stylesheets:e.stylesheets}),e.resources&&s.each(e.resources,function(n){n&&t.push({uri:n.uri||n.chapter_href,content:n.content,content_type:n.content_type,encoding:n.encoding,stylesheets:e.stylesheets})})}),t}}),{Model:t,Collection:i,Item:o,Package:r}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(10),i=n(7),r=n(234).get(),o=n(11);return i.Object.extend({playerEvents:["firstPlay","playerPaused","playerSeekStart","playerSeekEnd","playerPlayEnd","playerPlayed","playerUpdatePlayhead","updatedPlaybackRate","playerReady","playbackComplete","playerPlayEnd","entryFailed","mediaError","entryNotAvailable","switchingChangeComplete"],initialize:function(e){var t=this;this.mergeOptions(e,["model"]),kWidget.addReadyCallback(function(e){t.broadcastOnPlayerEvents(e)})},destroy:function(){var e=this;t.each(this.playerEvents,function(t){e.kdp.kUnbind(t)})},getPlayer:function(e){return document.getElementById(e)},broadcastOnPlayerEvents:function(e){var n=this.getPlayer(e),i={kdp:n,archive:this.model};this.mergeOptions(i,["kdp","archive"]),r.get("enableUsage")&&n&&t.each(this.playerEvents,function(e){n.kBind(e,function(n,r){t.merge(i,{arg:n||!1,argTwo:r||!1}),o.channel("kaltura").trigger("video:"+e.toString(),i)})})}})}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(10),i=n(8),r=n(7),o=n(12),a=n(347),s=n(11),l=n(115);return r.Object.extend({events:function(){return{"video:firstPlay":this.onFirstPlay,"video:playerPaused":this.onPlayerPaused,"video:playerPlayed":this.onPlayerPlayed,"video:playerSeekStart":this.onPlayerSeekStart,"video:playerSeekEnd":this.onPlayerSeekEnd,"video:playerUpdatePlayhead":this.onPlayerUpdatePlayhead,"video:playerReady":this.onPlayerReady,"video:updatedPlaybackRate":this.onUpdatedPlaybackRate,"video:playbackComplete":this.onPlaybackComplete,"video:entryFailed":this.onEntryFailed,"video:mediaError":this.onMediaError,"video:entryNotAvailable":this.onEntryNotAvailable,"video:switchingChangeComplete":this.onSwitchingChangeComplete}},initialize:function(e){t.bindAll(this),this.subscribeToPlayerEvents(),this.mergeOptions(e,["model","collection"]),this.model.isVideo=!0,this.playerReady=!1},destroy:function(){var e=this;t.each(this.events(),function(t,n){e.stopListening(s.channel("kaltura"),n,t)}),this.model.destroy(),this.collection.destroy()},onSwitchingChangeComplete:function(e){this.playerReady&&e.arg&&e.arg.newBitrate&&o.browser.set(i.VIDEO_PREFERENCE_STORAGE_KEY.playback_quality,e.arg.newBitrate)},onUpdatedPlaybackRate:function(e){o.browser.set(i.VIDEO_PREFERENCE_STORAGE_KEY.playback_rate,e.arg)},onEntryFailed:function(e){l.error({chapter:e.archive.get("chapter"),source:"video:onEntryFailed event"})},onMediaError:t.throttle(function(e){var t={success:function(t){e.kdp.setKDPAttribute("servicesProxy.kalturaClient","ks",t.ks)},error:function(){e.kdp.sendNotification("alert",{title:"Very sorry, the video provider timed out generating a session.",message:"Reload the page to try again."})},forbidden:function(){e.kdp.sendNotification("alert",{title:"Forbidden",message:"You may not have permission to view this clip in full."})}};l.error({chapter:e.archive.get("chapter"),source:"video:onMediaError event",mediaError:e.errorEvent}),a.get(t)},9e4),onEntryNotAvailable:function(e){l.error({chapter:e.archive.get("chapter"),source:"video:entryNotAvailable event",entryId:e.entryId})},subscribeToPlayerEvents:function(){var e=this;t.each(this.events(),function(t,n){e.listenTo(s.channel("kaltura"),n,t)})},toPercentage:function(e,t){return 1e3*e/(1e3*t.evaluate("{duration}"))*100},toSeconds:function(e,t){return e/100*t.evaluate("{duration}")},log:function(e){var t=this;this.model.set({chapter:e.archive.get("chapter"),product:e.archive.get("product")||null}),this.model.set({end_percentage:this.getPositionPercentage(e.kdp)},{validate:!0}),this.model.isValid()&&(this.collection.create({client_timestamp:t.model.get("client_timestamp"),chapter:t.model.get("chapter"),start_percentage:t.model.get("start_percentage"),end_percentage:t.model.get("end_percentage"),usage_is_complete:t.model.get("usage_is_complete"),product:t.model.get("product")},{validate:!0}),this.model.set({start_percentage:this.model.get("end_percentage")},{validate:!1,silent:!0}))},intervalLogger:t.throttle(function(e){this.log(e)},i.USAGE_UPDATE_INTERVAL,{trailing:!1}),onPlayerUpdatePlayhead:function(e){t.isNumber(e.arg)&&(this.intervalLogger(e),this.isIOS&&(Math.abs(e.arg-this.lastRuntime)>1&&this.onPlayerSeekEnd(e),this.lastRuntime=e.arg))},onFirstPlay:function(e){this.isIOS&&this.rememberLastPosition(e)},onPlayerSeekStart:function(e){this.log(e)},onPlayerSeekEnd:function(e){this.model.set({start_percentage:this.getPositionPercentage(e.kdp),end_percentage:null},{validate:!1,silent:!0})},getPositionPercentage:function(e){var t=e.evaluate("{video.player.currentTime}");return this.toPercentage(t,e)},onPlayerPaused:function(e){this.log(e)},onPlaybackComplete:function(e){this.log(e)},onPlayerPlayEnd:function(e){this.log(e)},rememberLastPosition:function(e){var t,n=e.archive.get("top_percentage");n>0&&(t=this.toSeconds(n,e.kdp))>=15&&setTimeout(function(){e.kdp.sendNotification("doSeek",t)},500)},onPlayerReady:function(e){this.playerReady=!0,this.isIOS||this.rememberLastPosition(e),this.model.set({start_percentage:this.getPositionPercentage(e.kdp),end_percentage:null,chapter:e.archive.get("chapter")},{validate:!1,silent:!0})},onPlayerPlayed:function(e){this.model.set({start_percentage:this.getPositionPercentage(e.kdp)},{validate:!1,silent:!0})}})}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a,s,l,c,u,d,p,h,f=n(10),_=n(14),m=n(315),g=n(12),v=n(279),y=n(8);return o=function(){u.set({start_percentage:0,end_percentage:null},{validate:!1,silent:!0}),a(u)},i=function(e){u.set({end_percentage:e.get("top_percentage")},{validate:!0}),a(u)},c=function(e){u.set({start_percentage:e.get("top_percentage"),end_percentage:null},{validate:!1,silent:!0})},a=function(e){e.isValid()&&(d.create({client_timestamp:e.get("client_timestamp"),chapter:e.get("chapter"),start_percentage:e.get("start_percentage"),end_percentage:e.get("end_percentage"),usage_is_complete:e.get("usage_is_complete"),product:e.get("product")||null},{wait:!0}),e.set({start_percentage:e.get("end_percentage")},{validate:!1,silent:!0}))},r=f.throttle(function(e){u.set({end_percentage:e.get("top_percentage")},{validate:!0}),a(u)},y.USAGE_UPDATE_INTERVAL),l=function(e){u.has("start_percentage")||u.set({start_percentage:e.get("top_percentage"),product:e.get("product")||null}),u.set({chapter:e.get("chapter")}),r(e)},p={"usage:leaving_chapter":i,"usage:new_chapter":o,"usage:new_start":c},h=function(){return{model:u,collection:d}},s=function(){u.resetAll(),d.reset(),f.each(p,function(e,t){_.off(t,e)}),g.browserStore.reset(y.LOCALSTORE_USAGE_KEY)},t=function(e){f.each(p,function(e,t){_.on(t,e)}),d=m.get(),u=v.get(),u.reset(e)},y.TESTING?{get:h,init:t,destroy:s,triggerRead:l}:{init:f.once(t),triggerRead:l}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a,s,l,c,u,d=n(1),p=n(19),h=n(18),f=n(382),_=n(380),m="blowfish_key",g="",v=f.rstr2binl;return t=function(){if(!g){var e=localStorage[m];if(!e){if(!p.loggedIn())throw new Error(gettext("You must be signed in to read this book."));d.ajax({async:!1,url:"/nest/key/",dataType:"json",error:function(e,t,n){throw h.debug("Got error when retrieving user key: "+n),new Error(gettext("Unable to decrypt content"))},success:function(t){e=t.key}}),localStorage[m]=e}g=e}return g},i=function(){g="",localStorage.removeItem(m)},r=function(e){for(var t=f.binl2rstr(e);!t.charCodeAt(t.length-1);)t=t.slice(0,-1);return t},o=function(e,t){var n,i,o,a,s,l,c,u,d=v(t),p=v(e),h=p.length,f=2654435769;c=function(e){return 4294967295&e},u=function(){return(i>>>5^n<<2)+(n>>>3^i<<4)^(o^n)+(d[3&a^l]^i)},s=6+Math.floor(52/h),o=c(s*f),n=p[0];do{for(l=o>>>2&3,a=h-1;a>0;a--)i=p[a-1],n=p[a]=c(p[a]-u());i=p[h-1],n=p[0]=c(p[0]-u()),o=c(o-f)}while(0!==o);return r(p)},a=function(e){g=e},s=function(){return!!localStorage[m]},l=function(e,n){var i,r=t(),o=Math.max(r.length,e.length,n.length),a=[],s="";for(i=0;i<o;i++)a[i%16]^=r.charCodeAt(i)^e.charCodeAt(i)^n.charCodeAt(i);for(i=0;i<16;i++)s+=String.fromCharCode(a[i]);return s},c=function(e,t,n){var i,r=l(e,t);try{i=(window.atob||_.decode)(n)}catch(e){i=(window.atob||_.decode)(n.replace(/\s/g,""))}return o(i,r)},u=function(e){var t=e.substr(0,256)+e.substr(-256,256);return f.hex_md5(t)},{checksum:u,decrypt:c,set_user_key:a,compute_key:l,clear_user_key:i,get_user_key:t,has_key:s}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){function merge(e,t){var n=/^(.*)\//;return e.authority&&!e.path?"/"+t:e.getPath().match(n)[0]+t}function remove_dot_segments(e){if(!e)return"";var t=e.replace(/\/\.\//g,"/");for(t=t.replace(/\/\.$/,"/");t.match(i);)t=t.replace(i,"/");for(t=t.replace(/\/([^\/]*)\/\.\.$/,"/");t.match(/\/\.\.\//);)t=t.replace(/\/\.\.\//,"/");return t}function hashkeys(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function uriUnescape(e){return e}var t,n,i=/\/((?!\.\.\/)[^\/]*)\/\.\.\//;return t=function(e){e||(e="");var t=/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/,n=e.match(t),i=n[1]||null,r=n[2]||null,o=n[3]||null,a=n[4]||null,s=n[5]||null;this.getScheme=function(){return i},this.setScheme=function(e){i=e},this.getAuthority=function(){return r},this.setAuthority=function(e){r=e},this.getPath=function(){return o},this.setPath=function(e){o=e},this.getQuery=function(){return a},this.setQuery=function(e){a=e},this.getFragment=function(){return s},this.setFragment=function(e){s=e}},t.prototype.toString=function(){var e="";return this.getScheme()&&(e+=this.getScheme()+":"),this.getAuthority()&&(e+="//"+this.getAuthority()),this.getPath()&&(e+=this.getPath()),this.getQuery()&&(e+="?"+this.getQuery()),this.getFragment()&&(e+="#"+this.getFragment()),e},t.prototype.resolve=function(e){var n=new t;return this.getScheme()?(n.setScheme(this.getScheme()),n.setAuthority(this.getAuthority()),n.setPath(remove_dot_segments(this.getPath())),n.setQuery(this.getQuery())):(this.getAuthority()?(n.setAuthority(this.getAuthority()),n.setPath(remove_dot_segments(this.getPath())),n.setQuery(this.getQuery())):(this.getPath()?("/"===this.getPath().charAt(0)?n.setPath(remove_dot_segments(this.getPath())):(n.setPath(merge(e,this.getPath())),n.setPath(remove_dot_segments(n.getPath()))),n.setQuery(this.getQuery())):(n.setPath(e.getPath()),this.getQuery()?n.setQuery(this.getQuery()):n.setQuery(e.getQuery())),n.setAuthority(e.getAuthority())),n.setScheme(e.getScheme())),n.setFragment(this.getFragment()),n},t.prototype.parseQuery=function(){return n.fromString(this.getQuery(),this.querySeparator)},n=function(){this.params={},this.separator="&"},n.fromString=function(e,t){var i=new n;return t&&(i.separator=t),i.addStringParams(e),i},n.prototype.addStringParams=function(e){for(var t,n,i,r=e.split(this.separator),o=0;o<r.length;o++)t=r[o].split("=",2),n=uriUnescape(t[0].replace(/\+/g," ")),i=uriUnescape(t[1].replace(/\+/g," ")),this.params.hasOwnProperty(n)||(this.params[n]=[]),this.params[n].push(i)},n.prototype.getParam=function(e){return this.params.hasOwnProperty(e)?this.params[e][0]:null},n.prototype.toString=function(){var e,t,n=[],i=hashkeys(this.params);for(e=0;e<i.length;e++)for(t=0;t<this.params[i[e]].length;t++)n.push(i[e].replace(/ /g,"+")+"="+this.params[i[e]][t].replace(/ /g,"+"));return n.join(this.separator)},{URI:t,URIQuery:n}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t={};return t.PADCHAR="=",t.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.makeDOMException=function(){try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(t){var e=new Error("DOM Exception 5");return e.code=e.number=5,e.name=e.description="INVALID_CHARACTER_ERR",e.toString=function(){return"Error: "+e.name+": "+e.message},e}},t.getbyte64=function(e,n){var i=t.ALPHA.indexOf(e.charAt(n));if(-1===i)throw t.makeDOMException();return i},t.decode=function(e){e=""+e;var n,i,r,o=t.getbyte64,a=e.length;if(0===a)return e;if(a%4!=0)throw t.makeDOMException();n=0,e.charAt(a-1)===t.PADCHAR&&(n=1,e.charAt(a-2)===t.PADCHAR&&(n=2),a-=4);var s=[];for(i=0;i<a;i+=4)r=o(e,i)<<18|o(e,i+1)<<12|o(e,i+2)<<6|o(e,i+3),s.push(String.fromCharCode(r>>16,r>>8&255,255&r));switch(n){case 1:r=o(e,i)<<18|o(e,i+1)<<12|o(e,i+2)<<6,s.push(String.fromCharCode(r>>16,r>>8&255));break;case 2:r=o(e,i)<<18|o(e,i+1)<<12,s.push(String.fromCharCode(r>>16))}return s.join("")},t.getbyte=function(e,n){var i=e.charCodeAt(n);if(i>255)throw t.makeDOMException();return i},t.encode=function(e){if(1!==arguments.length)throw new SyntaxError("Not enough arguments");var n,i,r=t.PADCHAR,o=t.ALPHA,a=t.getbyte,s=[];e=""+e;var l=e.length-e.length%3;if(0===e.length)return e;for(n=0;n<l;n+=3)i=a(e,n)<<16|a(e,n+1)<<8|a(e,n+2),s.push(o.charAt(i>>18)),s.push(o.charAt(i>>12&63)),s.push(o.charAt(i>>6&63)),s.push(o.charAt(63&i));switch(e.length-l){case 1:i=a(e,n)<<16,s.push(o.charAt(i>>18)+o.charAt(i>>12&63)+r+r);break;case 2:i=a(e,n)<<16|a(e,n+1)<<8,s.push(o.charAt(i>>18)+o.charAt(i>>12&63)+o.charAt(i>>6&63)+r)}return s.join("")},{decode:t.decode,encode:t.encode}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i,r,o;!function(a){r=[n(1)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){e.ui=e.ui||{};e.ui.version="1.12.1";!function(){function getOffsets(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function parseCss(t,n){return parseInt(e.css(t,n),10)||0}function getDimensions(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var t,n=Math.max,i=Math.abs,r=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==t)return t;var n,i,r=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return e("body").append(r),n=o.offsetWidth,r.css("overflow","scroll"),i=o.offsetWidth,n===i&&(i=r[0].clientWidth),r.remove(),t=n-i},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:r,offset:i||r?{left:0,top:0}:e(t).offset(),scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var l,u,d,p,h,f,_=e(t.of),m=e.position.getWithinInfo(t.within),g=e.position.getScrollInfo(m),v=(t.collision||"flip").split(" "),y={};return f=getDimensions(_),_[0].preventDefault&&(t.at="left top"),u=f.width,d=f.height,p=f.offset,h=e.extend({},p),e.each(["my","at"],function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):o.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=o.test(i[1])?i[1]:"center",e=a.exec(i[0]),n=a.exec(i[1]),y[this]=[e?e[0]:0,n?n[0]:0],t[this]=[s.exec(i[0])[0],s.exec(i[1])[0]]}),1===v.length&&(v[1]=v[0]),"right"===t.at[0]?h.left+=u:"center"===t.at[0]&&(h.left+=u/2),"bottom"===t.at[1]?h.top+=d:"center"===t.at[1]&&(h.top+=d/2),l=getOffsets(y.at,u,d),h.left+=l[0],h.top+=l[1],this.each(function(){var r,o,a=e(this),s=a.outerWidth(),c=a.outerHeight(),f=parseCss(this,"marginLeft"),b=parseCss(this,"marginTop"),T=s+f+parseCss(this,"marginRight")+g.width,w=c+b+parseCss(this,"marginBottom")+g.height,C=e.extend({},h),M=getOffsets(y.my,a.outerWidth(),a.outerHeight());"right"===t.my[0]?C.left-=s:"center"===t.my[0]&&(C.left-=s/2),"bottom"===t.my[1]?C.top-=c:"center"===t.my[1]&&(C.top-=c/2),C.left+=M[0],C.top+=M[1],r={marginLeft:f,marginTop:b},e.each(["left","top"],function(n,i){e.ui.position[v[n]]&&e.ui.position[v[n]][i](C,{targetWidth:u,targetHeight:d,elemWidth:s,elemHeight:c,collisionPosition:r,collisionWidth:T,collisionHeight:w,offset:[l[0]+M[0],l[1]+M[1]],my:t.my,at:t.at,within:m,elem:a})}),t.using&&(o=function(e){var r=p.left-C.left,o=r+u-s,l=p.top-C.top,h=l+d-c,f={target:{element:_,left:p.left,top:p.top,width:u,height:d},element:{element:a,left:C.left,top:C.top,width:s,height:c},horizontal:o<0?"left":r>0?"right":"center",vertical:h<0?"top":l>0?"bottom":"middle"};u<s&&i(r+o)<u&&(f.horizontal="center"),d<c&&i(l+h)<d&&(f.vertical="middle"),n(i(r),i(o))>n(i(l),i(h))?f.important="horizontal":f.important="vertical",t.using.call(this,e,f)}),a.offset(e.extend(C,{using:o}))})},e.ui.position={fit:{left:function(e,t){var i,r=t.within,o=r.isWindow?r.scrollLeft:r.offset.left,a=r.width,s=e.left-t.collisionPosition.marginLeft,l=o-s,c=s+t.collisionWidth-a-o;t.collisionWidth>a?l>0&&c<=0?(i=e.left+l+t.collisionWidth-a-o,e.left+=l-i):e.left=c>0&&l<=0?o:l>c?o+a-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=n(e.left-s,e.left)},top:function(e,t){var i,r=t.within,o=r.isWindow?r.scrollTop:r.offset.top,a=t.within.height,s=e.top-t.collisionPosition.marginTop,l=o-s,c=s+t.collisionHeight-a-o;t.collisionHeight>a?l>0&&c<=0?(i=e.top+l+t.collisionHeight-a-o,e.top+=l-i):e.top=c>0&&l<=0?o:l>c?o+a-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=n(e.top-s,e.top)}},flip:{left:function(e,t){var n,r,o=t.within,a=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-s-l,p="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];u<0?((n=e.left+p+h+f+t.collisionWidth-s-a)<0||n<i(u))&&(e.left+=p+h+f):d>0&&((r=e.left-t.collisionPosition.marginLeft+p+h+f-l)>0||i(r)<d)&&(e.left+=p+h+f)},top:function(e,t){var n,r,o=t.within,a=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-s-l,p="top"===t.my[1],h=p?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,_=-2*t.offset[1];u<0?((r=e.top+h+f+_+t.collisionHeight-s-a)<0||r<i(u))&&(e.top+=h+f+_):d>0&&((n=e.top-t.collisionPosition.marginTop+h+f+_-l)>0||i(n)<d)&&(e.top+=h+f+_)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}();e.ui.position})},function(e,t,n){"use strict";var i;void 0!==(i=function(e){function hex_md5(e){return rstr2hex(rstr_md5(str2rstr_utf8(e)))}function rstr_md5(e){return binl2rstr(binl_md5(rstr2binl(e),8*e.length))}function rstr2hex(e){for(var n,i=t?"0123456789ABCDEF":"0123456789abcdef",r="",o=0;o<e.length;o++)n=e.charCodeAt(o),r+=i.charAt(n>>>4&15)+i.charAt(15&n);return r}function str2rstr_utf8(e){for(var t,n,i="",r=-1;++r<e.length;)t=e.charCodeAt(r),n=r+1<e.length?e.charCodeAt(r+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),r++),t<=127?i+=String.fromCharCode(t):t<=2047?i+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i}function rstr2binl(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(var n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function binl2rstr(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function binl_md5(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,i=-271733879,r=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=n,l=i,c=r,u=o;n=md5_ff(n,i,r,o,e[a+0],7,-680876936),o=md5_ff(o,n,i,r,e[a+1],12,-389564586),r=md5_ff(r,o,n,i,e[a+2],17,606105819),i=md5_ff(i,r,o,n,e[a+3],22,-1044525330),n=md5_ff(n,i,r,o,e[a+4],7,-176418897),o=md5_ff(o,n,i,r,e[a+5],12,1200080426),r=md5_ff(r,o,n,i,e[a+6],17,-1473231341),i=md5_ff(i,r,o,n,e[a+7],22,-45705983),n=md5_ff(n,i,r,o,e[a+8],7,1770035416),o=md5_ff(o,n,i,r,e[a+9],12,-1958414417),r=md5_ff(r,o,n,i,e[a+10],17,-42063),i=md5_ff(i,r,o,n,e[a+11],22,-1990404162),n=md5_ff(n,i,r,o,e[a+12],7,1804603682),o=md5_ff(o,n,i,r,e[a+13],12,-40341101),r=md5_ff(r,o,n,i,e[a+14],17,-1502002290),i=md5_ff(i,r,o,n,e[a+15],22,1236535329),n=md5_gg(n,i,r,o,e[a+1],5,-165796510),o=md5_gg(o,n,i,r,e[a+6],9,-1069501632),r=md5_gg(r,o,n,i,e[a+11],14,643717713),i=md5_gg(i,r,o,n,e[a+0],20,-373897302),n=md5_gg(n,i,r,o,e[a+5],5,-701558691),o=md5_gg(o,n,i,r,e[a+10],9,38016083),r=md5_gg(r,o,n,i,e[a+15],14,-660478335),i=md5_gg(i,r,o,n,e[a+4],20,-405537848),n=md5_gg(n,i,r,o,e[a+9],5,568446438),o=md5_gg(o,n,i,r,e[a+14],9,-1019803690),r=md5_gg(r,o,n,i,e[a+3],14,-187363961),i=md5_gg(i,r,o,n,e[a+8],20,1163531501),n=md5_gg(n,i,r,o,e[a+13],5,-1444681467),o=md5_gg(o,n,i,r,e[a+2],9,-51403784),r=md5_gg(r,o,n,i,e[a+7],14,1735328473),i=md5_gg(i,r,o,n,e[a+12],20,-1926607734),n=md5_hh(n,i,r,o,e[a+5],4,-378558),o=md5_hh(o,n,i,r,e[a+8],11,-2022574463),r=md5_hh(r,o,n,i,e[a+11],16,1839030562),i=md5_hh(i,r,o,n,e[a+14],23,-35309556),n=md5_hh(n,i,r,o,e[a+1],4,-1530992060),o=md5_hh(o,n,i,r,e[a+4],11,1272893353),r=md5_hh(r,o,n,i,e[a+7],16,-155497632),i=md5_hh(i,r,o,n,e[a+10],23,-1094730640),n=md5_hh(n,i,r,o,e[a+13],4,681279174),o=md5_hh(o,n,i,r,e[a+0],11,-358537222),r=md5_hh(r,o,n,i,e[a+3],16,-722521979),i=md5_hh(i,r,o,n,e[a+6],23,76029189),n=md5_hh(n,i,r,o,e[a+9],4,-640364487),o=md5_hh(o,n,i,r,e[a+12],11,-421815835),r=md5_hh(r,o,n,i,e[a+15],16,530742520),i=md5_hh(i,r,o,n,e[a+2],23,-995338651),n=md5_ii(n,i,r,o,e[a+0],6,-198630844),o=md5_ii(o,n,i,r,e[a+7],10,1126891415),r=md5_ii(r,o,n,i,e[a+14],15,-1416354905),i=md5_ii(i,r,o,n,e[a+5],21,-57434055),n=md5_ii(n,i,r,o,e[a+12],6,1700485571),o=md5_ii(o,n,i,r,e[a+3],10,-1894986606),r=md5_ii(r,o,n,i,e[a+10],15,-1051523),i=md5_ii(i,r,o,n,e[a+1],21,-2054922799),n=md5_ii(n,i,r,o,e[a+8],6,1873313359),o=md5_ii(o,n,i,r,e[a+15],10,-30611744),r=md5_ii(r,o,n,i,e[a+6],15,-1560198380),i=md5_ii(i,r,o,n,e[a+13],21,1309151649),n=md5_ii(n,i,r,o,e[a+4],6,-145523070),o=md5_ii(o,n,i,r,e[a+11],10,-1120210379),r=md5_ii(r,o,n,i,e[a+2],15,718787259),i=md5_ii(i,r,o,n,e[a+9],21,-343485551),n=safe_add(n,s),i=safe_add(i,l),r=safe_add(r,c),o=safe_add(o,u)}return Array(n,i,r,o)}function md5_cmn(e,t,n,i,r,o){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(i,o)),r),n)}function md5_ff(e,t,n,i,r,o,a){return md5_cmn(t&n|~t&i,e,t,r,o,a)}function md5_gg(e,t,n,i,r,o,a){return md5_cmn(t&i|n&~i,e,t,r,o,a)}function md5_hh(e,t,n,i,r,o,a){return md5_cmn(t^n^i,e,t,r,o,a)}function md5_ii(e,t,n,i,r,o,a){return md5_cmn(n^(t|~i),e,t,r,o,a)}function safe_add(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function bit_rol(e,t){return e<<t|e>>>32-t}var t=0;return{hex_md5:hex_md5,rstr2binl:rstr2binl,binl2rstr:binl2rstr}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(4),o=_interopRequireDefault(r),a=n(19),s=_interopRequireDefault(a),l=n(330).Promise,c=o.default.Model,u="/u/information_for_javascript",d=function(e){function AccountProfile(e){_classCallCheck(this,AccountProfile);var t=_possibleConstructorReturn(this,(AccountProfile.__proto__||Object.getPrototypeOf(AccountProfile)).call(this,e));return t.defaults={user_id:null,session_id:null,user_uuid:null,username:null,subscription_status:null,account:null},t.url=u,t}return _inherits(AccountProfile,e),AccountProfile}(c),p=function(){function Main(){_classCallCheck(this,Main),this.accountProfile=void 0,this.accountProfileLoaded=!1}return i(Main,[{key:"api",value:function(){return{Model:d,get:this.generateAccountProfile.bind(this)}}},{key:"generateAccountProfile",value:function(){var e=this;return new l(function(t,n){e.accountProfileLoaded&&t(e.accountProfile),!1===e.accountProfileLoaded&&void 0===e.accountProfile&&(e.accountProfile=new d),s.default.loggedIn()?e.accountProfile.fetch().done(function(){e.accountProfileLoaded=!0,t(e.accountProfile)}):n("User is not logged in.")})}}]),Main}(),h=new p;t.default=h.api(),e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o=n(10),a=n(4),s=n(1),l=n(8),c=n(18),u=n(14),d=n(346),p=n(12),h=n(234),f=n(692);return t=a.View.extend({el:".application",events:{"click .masthead":"toggleMasthead","click #sbo-menu":"toggleMenu","click .toggle-pagination":"togglePagination"},labelToScrolling:"Enable scrolling",labelToPaging:"Enable paging",initialize:function(){var e=p.retrievePaginationPreferences()||"scroll";o.bindAll(this,"triggerViewport","onOrientationsOrResize","offOrientationsOrResize"),this.dbTrigger=o.debounce(this.triggerViewport,300),this.model=h.get(),this.checkPagingSupport(),this.setFonts(),this.model.bind("change:reading_mode",this.changeMode,this),this.model.setReadingMode(e)},setFonts:function(){this.fontPanel=new f({appModel:h.get()})},renderMenu:function(e){this.$(".menu-contents").empty().html(e)},renderNav:function(e){this.clearNav().html(e),this.checkPagingSupport()},clearNav:function(){return this.$(".interface-control-btns").empty()},showNav:function(){return this.$(".interface-control-btns").show()},hideNav:function(){return this.$(".interface-control-btns").hide()},checkPagingSupport:function(){if(l.SUPPORTS_PAGED_READING&&this.model.get("enablePaging")){var e=this.model.get("reading_mode"),t="scroll"===e?this.labelToPaging:this.labelToScrolling,n='<li><a href="#" class="ir toggle-pagination">'+t+"</a></li>";this.$(".interface-control-btns").append(n).end().find("a").addClass(e)}},brighter:function(e){return e.preventDefault(),d.updateBrightness(this.el,"brighter"),!1},darker:function(e){return e.preventDefault(),d.updateBrightness(this.el,"darker"),!1},toggleMenu:function(e){e.preventDefault(),this.$(e.target).closest(".nav-container").toggleClass("open")},toggleMasthead:function(e){this.$(e.target).toggleClass("open")},togglePagination:function(e){e.preventDefault();var t=this.model.get("reading_mode"),n="scroll"===t?"page":"scroll";this.model.set("reading_mode",n),this.$(e.target).toggleClass(t+" "+n),this.$el.toggleClass("sbo-"+t,!1).toggleClass("sbo-"+n,!0)},changeMode:function(e,t){"scroll"===t?this.toScrolling():this.toPaging()},setHeight:function(e){var t=c.getViewport();this.$el.css("height",e||t.height+"px")},toPaging:function(){this.onOrientationsOrResize(),this.setHeight(),this.$(".toggle-pagination").text(this.labelToScrolling)},triggerViewport:function(e){this.setHeight(),u.trigger("viewport:change",e)},onOrientationsOrResize:function(){s(window).on("resize",this.dbTrigger),s(window).on("orientationchange",this.triggerViewport)},toScrolling:function(){this.offOrientationsOrResize(),this.setHeight("auto"),this.$(l.IBIS_BOOK_CLASS).css("-webkit-transform","none"),this.$(".toggle-pagination").text(this.labelToPaging)},offOrientationsOrResize:function(){s(window).off("resize",this.dbTrigger),s(window).off("orientationchange",this.triggerViewport)}}),i=function(){return r||(r=new t),r},{get:i}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(1),i=n(10),r=n(4),o=n(14),a=n(632),s=n(565),l="sbo-toc-open";return r.View.extend({events:{"click .tocList a":"saveReadingProgress","click .sbo-toc-thumb":"toggle","click .resume":"destroy"},el:".toc-menu",navState:"reading",template:s,initialize:function(e){i.bindAll(this),this.options=e||{},e&&e.model&&(this.chapters=new a.Chapters,this.model.on("change",this.modelChange,this))},modelChange:function(e){if(e.changedAttributes().book_id)return this.resetState(),void this.updateTOC()},updateCurrentlyReading:function(){this.$el.find(".currently-reading").removeClass("currently-reading"),this.$el.find("a[href*='"+this.model.get("chapter_href")+"']").closest("li").addClass("currently-reading")},destroy:function(){o.unbind("destory",this.destroy),this.resetState(),this.model&&(this.model.off("change",this.modelChange),this.model=null),this.chapters&&(this.chapters.off(),this.chapters=null),this.$el.off().find(".toc-contents").empty()},resetState:function(){this.renderID=null,this.renderHref=null},render:function(){var e,t=this,n={},r=["book_id","title","title_safe","authors","publisher","pub_date","detail_url","detail_position","thumbnail_tag"];i.each(r,function(e){t.chapters[e]&&(n[e]=t.chapters[e])}),n=i.extend(n,{chapters:this.chapters.toJSON()}),e=this.template({data:n}),this.$(".toc-contents").empty().append(e),this.renderID=this.model.get("book_id"),this.renderHref=this.model.get("chapter_href"),this.updateCurrentlyReading()},show:function(){if(!this.chapters.length)return this.chapters.on("reset",this.show,this),void this.updateTOC();this.renderID&&this.renderID===this.model.get("book_id")&&this.renderHref===this.model.get("chapter_href")||this.render(),this.chapters.off(),this.$el.addClass(l)},hide:function(){this.$el.removeClass(l)},toggle:function(e){e.preventDefault(),e.stopImmediatePropagation(),this.$el.hasClass(l)?this.hide(e):this.show(e)},navToLink:function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.$(e.currentTarget).attr("href");if("#"===t||""===t)return!0;r.history.navigate(t,!0)},saveReadingProgress:function(e){t(e.currentTarget).hasClass("currently-reading")||(o.trigger("usage:leaving_chapter",this.model),this.navToLink(e))},updateTOC:function(){this.model.has("book_id")&&this.getTOC()},getTOC:function(){this.chapters.fetch({book_id:this.model.get("book_id"),chapter_href:this.model.get("chapter_href")})}})}.call(t,n,t,e))&&(e.exports=i)},,,,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(623),i=n(1),r=n(2),o=n(14),a=n(8),s=n(118);return n(307),n(688),n(689),t.prototype.render=function(){this.$el=i(this.el),this.$el.annotator(),this.setupPlugins(),this.setupLocalPlugins(),this.attachFastClick(),o.trigger("annotations:rendered"),this.$el.annotator("addPlugin","HeronExtensions",{archiveModel:this.model})},t.prototype.attachFastClick=function(){var e,t=["sbo-reading-menu","topbar","highlights","annotator-editor-wrapper","annotator-touch-controls"];window.attachfastclick&&window.attachfastclick.destroy(),r.each(t,function(t){(e=document.getElementsByClassName(t)[0])&&s.attach(e)})},t.prototype.setupLocalPlugins=function(){this.$el.annotator("addPlugin","StoreEvents"),a.IS_MOBILE&&(this.$el.annotator().annotator("addPlugin","Touch",{force:!0}),this.$el.annotator("addPlugin","TouchExtensions"))},t}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(374);return t.Model.prototype.getBitIdentifier=function(){return this.get("book_id")+":"+encodeURIComponent(this.get("chapter_href"))},t}.call(t,n,t,e))&&(e.exports=i)},,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(4),i=n(2);return t.Model.extend({initialize:function(){this.buildFullPath(),this.setWebUrl(),this.setHighlightedContent()},buildFullPath:function(){this.has("natural_key")&&this.set("full_path",this.get("natural_key")[1])},setWebUrl:function(){var e=this.get("web_url").split("/"),t=i.drop(e,1),n="/"+t.join("/");this.set("web_url",n)},setHighlightedContent:function(){this.has("highlights")&&this.get("highlights").content&&this.set("highlighted_content",this.get("highlights").content)}})}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(8);return{setLocation:function(e){t.TESTING||(window.location=e)},ensureAbsoluteUrl:function(e){var t=window.location,n=t.port?":"+t.port:"";return 0===e.indexOf("http")?e:t.protocol+"//"+t.hostname+n+e},shouldStayOnPage:function(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||e.which&&e.which>1},isMiddleClick:function(e){return e.which&&e.which>1},noop:function(){}}}.call(t,n,t,e))&&(e.exports=i)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",data.options.isVideo?(__p+='\n  <div class="sbo-toc">\n    <button type="button" class="sbo-toc-thumb close"><div class="visuallyhidden">Close</div></button>\n    <div class="sbo-book-meta">\n      ',data.options.display_completed&&(__p+="\n      <h2>Table of Contents</h2>\n      "),__p+='\n      <span class="cover">\n       <a href="'+(null==(__t=data.detail_url)?"":__t)+'" class="js-toc-link toc-link">\n        '+(null==(__t=data.thumbnail_tag)?"":__t)+'\n      </a>\n      </span>\n      <span class="title">\n        ',window.PUBLISHER_PAGES&&(__p+="\n          ",data.publisher&&data.publisher.logo&&(__p+='\n              <a class="t-publisher-link js-toc-link toc-link" href=\'',print("/library/publisher/"+data.publisher.slug+"/"),__p+="'>\n                <img src=\"/static/images/partners/"+(null==(__t=data.publisher.slug)?"":__t)+"/"+(null==(__t=data.publisher.logo)?"":__t)+'"\n                     class="publisher-logo video" alt="publisher logo"/>\n              </a>\n          '),__p+="\n        "),__p+='\n\n        <a href="'+(null==(__t=data.detail_url)?"":__t)+'" class="js-toc-link toc-link">'+(null==(__t=data.title)?"":__t)+"</a>\n      </span>\n      ",data.authors&&(__p+='\n      <span class="authors">by '+(null==(__t=data.authors)?"":__t)+"</span>\n      "),__p+="\n      ",data.publisher&&(__p+='\n        <span class="publishers t-publishers">Published by\n          \x3c!-- Show publisher page link if publisher pages switch is on --\x3e\n          ',window.PUBLISHER_PAGES?(__p+='\n            <a class="js-toc-link toc-link" class="t-publisher-link" href=\'',print("/library/publisher/"+data.publisher.slug+"/"),__p+="'>\n              "+(null==(__t=data.publisher.name)?"":__t)+"</a>",data.pub_date&&print(", "+new Date(data.pub_date).getFullYear()),__p+="\n          "):(__p+="\n              ",data.pub_date?(__p+="\n                "+(null==(__t=data.publisher.name)?"":__t)+", ",print(new Date(data.pub_date).getFullYear()),__p+="\n              "):__p+="\n                "+(null==(__t=data.publisher.name)?"":__t)+"\n              ",__p+="\n          "),__p+="\n        </span>\n      "),__p+="\n    ",data.options.display_detail_position&&(__p+='\n      <div class="progress-percent-complete">\n        <span class="percent-complete-bar">\n          <div class="percent-complete">\n            <div class="percent" style="width: '+(null==(__t=data.detail_position)?"":__t)+'%;"></div>\n            </div>\n        </span>\n      </div>\n    '),__p+='\n\n    </div>\n\n  <ol class="tocList">\n    ',_.each(data.chapters,function(e,t,n){__p+="\n      ",print(data.options.chapterTemplate({chapter:e,i:t,list:n,data:data,chapterTemplate:data.options.chapterTemplate})),__p+="\n    "}),__p+="\n   </ol>\n </div>\n\n"):(__p+='\n  <div class="sbo-toc">\n    <button type="button" class="sbo-toc-thumb close"><div class="visuallyhidden">Close</div></button>\n      <section class="ios-app-teaser">\n        <ul>\n            <li><a class="js-toc-link toc-link" href="https://itunes.apple.com/gb/app/safari-queue-library-over/id881697395?mt=8" role="button"\n                   class="js-ios-install-app">Install App</a></li>\n            <li><a class="js-toc-link toc-link" href="safaridetail://'+(null==(__t=data.book_id)?"":__t)+'" role="button" class="js-ios-open-in-app">Open in App</a></li>\n        </ul>\n      </section>\n      <div class="sbo-book-meta">\n        ',data.options.display_completed&&(__p+="\n        <h2>Table of Contents</h2>\n        "),__p+='\n        <span class="cover">\n         <a class="js-toc-link toc-link" href="'+(null==(__t=data.detail_url)?"":__t)+'">\n          '+(null==(__t=data.thumbnail_tag)?"":__t)+'\n        </a>\n        </span>\n        <span class="title">\n          ',window.PUBLISHER_PAGES&&(__p+="\n            ",data.publisher&&data.publisher.logo&&(__p+='\n                <a class="js-toc-link toc-link" class="t-publisher-link" href=\'',print("/library/publisher/"+data.publisher.slug+"/"),__p+="'>\n                  <img src=\"/static/images/partners/"+(null==(__t=data.publisher.slug)?"":__t)+"/"+(null==(__t=data.publisher.logo)?"":__t)+'"\n                       class="publisher-logo video" alt="publisher logo"/>\n                </a>\n            '),__p+="\n          "),__p+='\n\n          <a href="'+(null==(__t=data.detail_url)?"":__t)+'">'+(null==(__t=data.title)?"":__t)+"</a>\n        </span>\n        ",data.authors&&(__p+='\n        <span class="authors">by '+(null==(__t=data.authors)?"":__t)+"</span>\n        "),__p+="\n\n        ",data.publisher&&(__p+='\n        <span class="publishers t-publishers">Published by\n          \x3c!-- Show publisher page link if publisher pages switch is on --\x3e\n          ',window.PUBLISHER_PAGES?(__p+='\n            <a class="t-publisher-link toc-link js-toc-link" href=\'',print("/library/publisher/"+data.publisher.slug+"/"),__p+="'>\n              "+(null==(__t=data.publisher.name)?"":__t)+"</a>",data.pub_date&&print(", "+new Date(data.pub_date).getFullYear()),__p+="\n          "):(__p+="\n              ",data.pub_date?(__p+="\n                "+(null==(__t=data.publisher.name)?"":__t)+", ",print(new Date(data.pub_date).getFullYear()),__p+="\n              "):__p+="\n                "+(null==(__t=data.publisher.name)?"":__t)+"\n              ",__p+="\n          "),__p+="\n        </span>\n        "),__p+="\n\n    ",data.options.display_detail_position&&(__p+='\n      <div class="progress-percent-complete">\n        <span class="percent-complete-bar">\n          <div class="percent-complete">\n            <div class="percent" style="width: '+(null==(__t=data.detail_position)?"":__t)+'%;"></div>\n            </div>\n        </span>\n      </div>\n    '),__p+='\n\n    </div>\n  <ol class="tocList">\n    ',_.each(data.chapters,function(e,t,n){__p+="\n    ",e.label&&(__p+="\n    ",t>0&&e.depth<n[t-1].depth&&(__p+="\n    </ul>\n    "),__p+="\n     ",t>0&&e.depth>1&&e.depth>n[t-1].depth&&(__p+='\n     <ul class="toc-level-'+(null==(__t=e.depth)?"":__t)+'">\n     '),__p+='\n\n     <li class="toc-level'+(null==(__t=e.depth)?"":__t),e.selected&&print(" currently-reading"),__p+='">\n        ',data.options.display_completed&&(__p+='\n         <span class="ss-check progress-indicator js-display-completed" data-api-id="/api/v1/book/'+(null==(__t=data.book_id)?"":__t)+"/chapter/"+(null==(__t=e.uri)?"":__t)+'">\n         </span>\n        '),__p+='\n        <a class="js-toc-link toc-link" href="/library/view/',print(data.title_safe),__p+="/"+(null==(__t=data.book_id)?"":__t)+"/"+(null==(__t=e.uri)?"":__t)+'">\n        '+(null==(__t=e.label)?"":_.escape(__t))+" ",e.minutes_required&&(__p+='<span class="minutes">('+(null==(__t=e.minutes_required)?"":__t)+")</span>"),__p+="\n       </a>\n      "),__p+="\n        ",data.options.queueable&&(__p+='\n         <button type="button" class="rec-fav ss-queue js-queue js-reader-toc-queue" aria-label="Add to Queue" title="Add to Queue" data-queue-endpoint="'+(null==(__t=e.url)?"":__t)+'">\n          <span>Add to Queue</span>\n        </button>\n        '),__p+="\n      "}),__p+="\n   </ol>\n </div>\n\n"),__p+="\n\n";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(e,t){},,function(e,t,n){"use strict";var i,r;i=[n(1),n(4),n(2),n(19),n(626),n(135),n(14),n(247),n(693),n(682),n(127),n(706),n(193),n(144)],void 0!==(r=function(e,t,n,i,r,o,a,s,l,c,u,d,p,h){e(document).ready(function(){c.bind(),o.default.init(),s.init({reset:!0}),window.SBO.constants.ENABLE_ONLINE_TRAINING&&new h({el:"body",origin:"reader"}),r.init({states:{library:{onChapterOpen:function(e,n){t.trigger("track",["set",{location:document.location.toString()}]),d.init({archive:n})},afterChapterRender:function(e,n,r,o){var a=r.get("format"),s={};if(d.get().afterArchiveRender(),o||(document.title=[r.get("label"),r.get("title")].join(" - ")),"video"!==a?(s.dimension3="Book",s.metric1=1,s.contentGroup1=r.get("is_public")?"Chapter Public":"Chapter Preview"):"video"===a&&(s.dimension3="Video"),t.trigger("track",["send","pageview",s]),i.loggedIn()){var c=r.get("chapter");p.attachQueueToChapter(c,{el:".js-collections-dropdown"}),o&&"video"===a&&l.init(r.get("book_id"))}u.add([r.get("book_id"),r.get("chapter_href")].join(":"))},onVideoBegin:function(e,n){t.trigger("track",["send","pageview",{metric1:1}]),t.trigger("track",["send","event","Video","Play",n.getBitIdentifier()])},onVideoComplete:function(e,n){n.has("next_chapter_uri")&&n.get("next_chapter_uri").length&&t.history.navigate(n.get("next_chapter_uri"),!0)}}}})})}.apply(t,i))&&(e.exports=r)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,r;!function(o,a){void 0!==e&&e.exports?e.exports=a():(i=a,void 0!==(r="function"==typeof i?i.call(t,n,t,e):i)&&(e.exports=r))}(0,function(){function every(e,t){for(var n=0,i=e.length;n<i;++n)if(!t(e[n]))return r;return 1}function each(e,t){every(e,function(e){return t(e),1})}function $script(t,n,i){function loopFn(e){return e.call?e():l[e]}function callback(){if(!--p){l[s]=1,a&&a();for(var e in u)every(e.split("|"),loopFn)&&!each(u[e],loopFn)&&(u[e]=[])}}t=t[o]?t:[t];var r=n&&n.call,a=r?n:i,s=r?t.join(""):n,p=t.length;return setTimeout(function(){each(t,function loading(t,n){return null===t?callback():(n||/^https?:\/\//.test(t)||!e||(t=-1===t.indexOf(".js")?e+t+".js":e+t),d[t]?(s&&(c[s]=1),2==d[t]?callback():setTimeout(function(){loading(t,!0)},0)):(d[t]=1,s&&(c[s]=1),void create(t,callback)))})},0),$script}function create(e,r){var o,l=n.createElement("script");l.onload=l.onerror=l[s]=function(){l[a]&&!/^c|loade/.test(l[a])||o||(l.onload=l[s]=null,o=1,d[e]=2,r())},l.async=1,l.src=t?e+(-1===e.indexOf("?")?"?":"&")+t:e,i.insertBefore(l,i.lastChild)}var e,t,n=document,i=n.getElementsByTagName("head")[0],r=!1,o="push",a="readyState",s="onreadystatechange",l={},c={},u={},d={};return $script.get=create,$script.order=function(e,t,n){!function callback(i){i=e.shift(),e.length?$script(i,callback):$script(i,t,n)}()},$script.path=function(t){e=t},$script.urlArgs=function(e){t=e},$script.ready=function(e,t,n){e=e[o]?e:[e];var i=[];return!each(e,function(e){l[e]||i[o](e)})&&every(e,function(e){return l[e]})?t():function(e){u[e]=u[e]||[],u[e][o](t),n&&n(i)}(e.join("|")),$script},$script.done=function(e){$script([null],e)},$script})},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i;void 0!==(i=function(e){function getSelected(){return window.getSelection()}function selectText(e){var n,i,r=document,o=t(e);return o.length&&(o=o[0]),r.body.createTextRange?(n=document.body.createTextRange(),n.moveToElementText(o),n.select()):window.getSelection&&(i=window.getSelection(),n=document.createRange(),n.selectNodeContents(o),i.removeAllRanges(),i.addRange(n)),n}function clearSelection(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}var t=n(1);return{selectText:selectText,clearSelection:clearSelection,getSelected:getSelected}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(1),i=n(4),r=n(14);return n(307),i.View.extend({initialize:function(e){this.parent=e.parent,this.el=e.el},setupPlugins:function(){var e=this.model.safeTitle()+"/"+encodeURIComponent(this.model.get("book_id"))+"/"+encodeURIComponent(this.model.get("chapter_href"));this.$el.annotator("addPlugin","Store",{prefix:"/nest/api/a/",urls:{create:e+"/annotations/",read:e+"/annotations/:id",update:e+"/annotations/:id",destroy:e+"/annotations/:id",search:e+"/search"}})},render:function(){this.$el=t(this.el),this.$el.annotator(),this.setupPlugins(),r.trigger("annotations:rendered")},disableAnnotator:function(){var e;this.$el&&this.$el.annotator&&(e=this.$el.data("annotator"))&&e.destroy()},remove:function(){this.disableAnnotator()}})}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i=n(10),r=n(1),o=n(465).get(),a=n(14),s=n(471),l=n(694);return t=function(e){this.app=e.appModel,this.archive=e.archiveModel,this.app.bind("change:nav_state",this.onStateChange,this),i.bindAll(this,"onStateChange")},t.prototype={interfaceOptions:{enableAnnotations:!1,enablePaging:!0,enableTOC:!0,enableImageResizing:!0},trackingOptions:{enableUsage:!0},onStateChange:function(e,n){var i=n.charAt(0).toUpperCase()+n.slice(1),o=this.app.validStates.join(" ");r("body").removeClass(o).addClass(n),t.prototype.hasOwnProperty("to"+i)&&(a.trigger("destroy"),this["to"+i]())},toLibrary:function(){this.app.set(this.interfaceOptions),this.app.set(this.trackingOptions),new l({model:this.archive}),o.showNav(),this.interfaceOptions.enablePaging&&o.checkPagingSupport(),this.app.set("ready",!0)},toArchive_list:function(){o.hideNav(),this.app.set("ready",!0);var e=new s.Collection;e.fetch({isCollection:!0,success:function(t,n){e.reset(n),e.each(function(e){e.set("id",e.get("book_id"))})}})}},t}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(1),i=n(10),r=n(4),o=n(14);return new(r.View.extend({el:t("div[role~=status]"),initialize:function(){i.bindAll(this),o.bind("loading:show",this.show,this),o.bind("loading:hide",this.hide,this)},show:function(){this.$el.removeClass("hide")},hide:function(){this.$el.addClass("hide")}}))}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i=n(4),r=n(10),o=n(8),a=n(691),s=n(14),l=n(11),c=n(465),u=n(234).get(),d=n(115);return t=function(e){var t=this;this.options=e||{},this.options.states&&(r.each(this.options.states,function(e,t){"library"!==t&&u.addState(t)}),s.bind("document:render",function(e){var n=u.get("nav_state");t.options.states[n]&&t.options.states[n].onChapterOpen&&t.options.states[n].onChapterOpen(n,e)}),s.bind("document:render_complete",function(e,n,i){var r=u.get("nav_state");t.options.states[r]&&t.options.states[r].afterChapterRender&&t.options.states[r].afterChapterRender(r,e,n,i)}),s.bind("position:change",function(e,n){var i=u.get("nav_state");t.options.states[i]&&t.options.states[i].onPositionChange&&t.options.states[i].onPositionChange(i,e,n)}),s.bind("video:begin",function(e,n){var i=u.get("nav_state");t.options.states[i]&&t.options.states[i].onVideoBegin&&t.options.states[i].onVideoBegin(e,n)}),s.bind("video:complete",function(e,n){var i=u.get("nav_state");t.options.states[i]&&t.options.states[i].onVideoComplete&&t.options.states[i].onVideoComplete(e,n)}),s.bind("video:progress",function(e){var n=u.get("nav_state");t.options.states[n]&&t.options.states[n].onVideoProgress&&t.options.states[n].onVideoProgress(e)}),s.bind("video:resize",function(e,n){var i=u.get("nav_state");t.options.states[i]&&t.options.states[i].onVideoResize&&t.options.states[i].onVideoResize(e,n)}),l.channel("kaltura").on("video:playbackComplete",function(e){var n=u.get("nav_state");t.options.states[n]&&t.options.states[n].onVideoComplete&&t.options.states[n].onVideoComplete(e.kdp,e.archive)}),l.channel("kaltura").on("video:firstPlay",function(e){var n=u.get("nav_state");t.options.states[n]&&t.options.states[n].onVideoBegin&&t.options.states[n].onVideoBegin(e.kdp,e.archive)})),this.router||(this.router=new a),this.router.on("route",function(e,t,n){s.trigger("route",e,t,n),l.channel("reader").trigger("routeUpdate",e,t,n)}),d.init({token:o.LOGENTRIES_TOKEN,page_info:"per-page",print:!0}),c.get(),i.history.start({pushState:!0,hashChange:!1})},{init:t}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(4),i=n(10),r=(n(18),n(234).get()),o=n(690),a=n(471);return n(625),t.Router.extend({routes:{"*prefix/view/:title/:bookid/":"epub","*prefix/view/:title/:bookid/*chapteruri#*anchor":"anchor","*prefix/view/:title/:bookid/*chapteruri":"chapter","*action":"catchAll"},initialize:function(){this.archiveModel=new a.Model,r.currentArchive=this.archiveModel,new o({appModel:r,archiveModel:this.archiveModel})},prefixToState:function(e){return e.split("/")[0]},epub:function(e,t,n){r.set({nav_state:this.prefixToState(e),router_prefix:e}),this.archiveModel.set("book_id",n),this.archiveModel.fetchItems()},chapter:function(e,t,n,i){r.set({nav_state:this.prefixToState(e),router_prefix:e}),i=decodeURIComponent(i.split("?")[0]),this.archiveModel.set({book_id:n,chapter_href:i}),this.archiveModel.fetchItems()},anchor:function(e,t,n,i,o){r.set({nav_state:this.prefixToState(e),router_prefix:e}),o=o.split("?")[0],this.archiveModel.target_anchor=o,this.archiveModel.set({book_id:n,chapter_href:decodeURIComponent(i)}),this.archiveModel.fetchItems()},catchAll:function(e){r.trigger("error","A route does not exist for "+e)},addRoute:function(e,t,n){var o,a="(.*?)",s="*prefix";if(3!==arguments.length)throw new Error("addRoute: `name`, `route`, and `handler` are all required");if(i.isRegExp(e)&&2!==e.toString().indexOf(a))throw new Error("addRoute: a route RexExp must start with '^"+a+"'");if(i.isString(e)&&0!==e.indexOf(s))throw new Error("addRoute: a route String must start with '"+s+"'");o=function(){r.set({nav_state:t}),n.apply(this,arguments)},this.route(e,t,o)}})}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(10),i=n(4),r=n(1),o=n(8),a=n(14),s=n(346),l=n(12),c=n(1109),u=l.retrieveReaderPreferences();return n(381),n(633),n(634),n(5),i.View.extend({className:"font-flyout",template:c,events:{"click #decrease-font":"shrinkPDF","click #increase-font":"enlargePDF","click #day-mode":"dayMode","click #cloudy-mode":"cloudyMode","click #night-mode":"nightMode","click #reset":"resetOptions"},attachTo:"body",initialize:function(e){e&&(this.options=e,e.attachTo&&(this.attachTo=e.attachTo)),t.bindAll(this),this.render()},render:function(){var e=this.$el.html(this.template);return this.attach(),this.bindResize(),e},removeModes:function(){r("body").removeClass("cloudy-mode night-mode")},dayMode:function(e){e.preventDefault(),this.removeModes(),l.storeReaderPreferences("reading_mode","day-mode")},cloudyMode:function(e){e.preventDefault(),this.removeModes(),r("body").addClass("cloudy-mode"),l.storeReaderPreferences("reading_mode","cloudy-mode")},nightMode:function(e){e.preventDefault(),this.removeModes(),r("body").addClass("night-mode"),l.storeReaderPreferences("reading_mode","night-mode")},resetOptions:function(e){e.preventDefault(),this.removeModes(),l.destroyReaderPreferences(),this.resetFontSize(),this.resetColumnWidth()},resetFontSize:function(){var e=this.$el.find("#js-font-size-draggable");e.css("left","80px"),this.setDraggableFiller(e,50),r("#font-styles").html("")},resetColumnWidth:function(){var e=this.$el.find("#js-column-size-draggable");e.css("left","80px"),this.setDraggableFiller(e,50),r("#column-width").html("")},attach:function(){r("#font-controls").on("click",this.toggleResizePanel),r(this.attachTo).append(this.el),this.position(),this.createFontSizeDraggable(),this.createColumnSizeDraggable()},toggleResizePanel:function(e){e.preventDefault(),r(e.currentTarget).toggleClass("open"),this.toggle()},toggle:function(){this.position(),this.$el.toggleClass("open"),this.$el.hasClass("open")?this.onOpen():this.onClose()},position:function(){r("#font-controls").length&&this.$el.position({my:"left top",at:"left bottom",of:r("#font-controls")})},bindResize:function(){r(window).on("resize",this.position)},unbindResize:function(){r(window).off("resize",this.position)},onOpen:function(){r(window).on("click.windowclick",t.bind(this.closePanel,this))},onClose:function(){r(window).off("click.windowclick")},closePanel:function(e){var t=r(e.target);!t.closest(".js-font-control-panel").length&&!t.closest(".font-controls-panel").length&&(r("#font-controls").removeClass("open"),this.toggle())},destroy:function(){this.$el.find("#js-font-size-draggable").off(),this.$el.find("#js-column-size-draggable").off(),l.destroyReaderPreferences(),this.removeModes(),this.unbindResize(),this.remove()},isVisible:function(){return this.$el.is(":visible")},setColumnWidth:function(e){var n=r("#column-width"),i=t.template(n.attr("data-template"));n.text(i({column_width:e})),l.storeReaderPreferences("column_width",e)},setDraggableFiller:function(e,t){e.prev(".filler").css("width",t+"%")},bindDraggable:function(e,t){e.draggable(t)},createFontSizeDraggable:function(e){e=e||!1;var n,i,s,c=this,d=152,p=this.$el.find("#js-font-size-draggable"),h={axis:"x",containment:"parent",create:function(){s=u.font_size,s===o.FONT_SIZE_DEFAULT?c.resetFontSize({silent:!0}):(i=100*parseFloat(s-o.FONT_SIZE_MIN),r(this).css({top:0,left:i}),n=i/d*100,c.setDraggableFiller(r(this),n))},drag:function(e,s){var l=r(this);t.throttle(function(){i=parseFloat((s.position.left/100).toFixed(2))+o.FONT_SIZE_MIN,a.trigger("font_size:change",i),n=s.position.left/d*100,c.setDraggableFiller(l,n)},1e3)()},stop:function(n,r){i=parseFloat((r.position.left/100).toFixed(2))+o.FONT_SIZE_MIN,l.storeReaderPreferences("font_size",i),e&&t.isFunction(e)&&e(i)}};this.bindDraggable(p,h)},createColumnSizeDraggable:function(e){e=e||!1;var n,i,a,s=this,l=152,c=this.$el.find("#js-column-size-draggable"),d={axis:"x",containment:"parent",create:function(){i=u.column_width,i?i===o.READER_COLUMN_WIDTH_DEFAULT?s.resetColumnWidth():i<o.READER_COLUMN_WIDTH_MIN?(r(this).css({top:0,left:0}),s.setDraggableFiller(r(this),0)):(n=i/100*l,r(this).css({top:0,left:n}),a=n/l*100,s.setDraggableFiller(r(this),a)):s.resetColumnWidth()},drag:function(e,n){var i=r(this),c=parseFloat(n.position.left/l*100),u=Math.ceil(c);t.throttle(function(){u>=o.READER_COLUMN_WIDTH_MIN&&u<=o.READER_COLUMN_WIDTH_MAX&&s.setColumnWidth(u),a=n.position.left/l*100,s.setDraggableFiller(i,a)},500)()},stop:function(n,i){if(e&&t.isFunction(e)){var r=parseFloat(i.position.left/l*100),o=Math.ceil(r);e(o)}}};this.bindDraggable(c,d)},shrinkPDF:function(){return"application/pdf"===this.options.appModel.currentArchive.get("source")&&s.updateZoomFactor("smaller"),!1},enlargePDF:function(){return"application/pdf"===this.options.appModel.currentArchive.get("source")&&s.updateZoomFactor("larger"),!1}})}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o=n(10),a=n(1),s=n(4),l=n(8),c=n(18),u=n(14),d=n(346),p=n(377),h=n(695),f=n(234).get(),_=n(1111),m=n(1080),v=n(1079),y=n(631),b=n(470),T=n(604),w=n(118),C=a.Deferred(),M=null;return T(["//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=MML_HTMLorMML.js&delayStartupUntil=configured"],"mathjax"),n(635),n(132),!0===g.has_mathml?T.ready("mathjax",function(){C.resolve()}):C.reject(),o.defer(function(){r=o.template(m)}),Modernizr.addTest("zoom",function(){return void 0!==document.createElement("div").style.zoom}),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},i=t[Modernizr.prefixed("transition")],s.View.extend({el:"[role~=document]",pagedEvents:{click:"screenClick","click #sbo-rt-content a":"inBookLink",touchstart:"touchStart",touchmove:"touchMove",touchend:"touchEnd"},clickEvents:{"click .prev":"getPreviousChapter","click .next":"getNextChapter","click #sbo-rt-content a":"inBookLink"},keyEvents:{"keydown[Left]":"getPreviousChapter","keydown[Right]":"getNextChapter","keydown[K]":"getPreviousChapter","keydown[J]":"getNextChapter"},videoEvents:{"keydown[K]":"getPreviousChapter","keydown[J]":"getNextChapter"},navState:"reading",bodyClasses:{video:"video",pdf:"pdf"},addBodyClass:function(e){a("body").addClass(this.bodyClasses[e])},removeBodyClasses:function(){a("body").removeClass(o.values(this.bodyClasses).join(" "))},proxies:function(){u.on({"document:render":this.render,"app:reading_mode":this.changeMode,destroy:this.destroy,"viewport:change":this.updateViewport,"font_size:change":this.setFontCSS,"zoom_factor:change":this.setZoomFactor,"usage:stored_position":this.storedPosition,"annotations:rendered":function(){M.resolve()}},this)},initialize:function(){o.bindAll(this),this.isSwiping=!1,this.X_DELTA=60,this.Y_DELTA=20,this.videoContainerEl=".sbo-vid-wrapper",this.proxies(),d.updateBrightness(),this.changeMode(f.get("reading_mode"))},isPreview:function(){return this.$el.parents("body").hasClass("js-preview-content")},createTOC:function(){f.get("enableTOC")&&(this.tocView||new h({model:this.model}))},renderArchiveInfo:function(){var e=o.template(v,{model:this.model.toJSON()});a(".book-details .info").empty().html(e)},destroy:function(){u.unbind({"document:render":this.render,"viewport:change":this.adjustColumns,"font_size:change":this.setFontCSS,"zoom_factor:change":this.setZoomFactor,"app:reading_mode":this.changeMode,destroy:this.destroy,"archive:change":this.loadTOC,"usage:stored_position":this.storedPosition},this),u.unbind("viewport:change",this.updateViewport,this),this.unbindAnnotations(),this.unbindScroll(),this.$el.off().empty()},render:function(){var e,t,n="video"===this.model.get("format"),i="application/pdf"===this.model.get("source");return M=a.Deferred(),a.when(C,M).then(this.mathJaxTypeset),this.$content=null,this.removeBodyClasses(),"undefined"!=typeof g&&g.loaded_from_server?(this.model.serverRender=t=!0,delete g.loaded_from_server):(delete this.model.serverRender,(e=this.model.getChapter())&&(n||this.setCSS(e.cssContent),this.setTitle(e.label),this.$el.show().empty().append(e.content))),this.createTOC(),this.attachFastClick(),u.trigger("document:render_complete",this,this.model,t),i&&(a("#font-styles").remove(),this.addBodyClass("pdf"),this.$el.addClass("showPdf"),l.IS_IE8||(this.setZoomFactor(d.getDisplayPreferences().zoom_factor),this.zoomToFit(),a(window).on("resize",o.debounce(this.zoomToFit,100)))),n?(this.addBodyClass("video"),a(l.KALTURA_PLAYER_ID).length&&y.init(this.model),this):(!this.isPreview()&&f.get("enableUsage")&&(p.init(this.model),this.hasScrollBar=a(document).height()>a(window).height(),this.hasScrollBar||this.logVeryShortChapter()),this.bindAnnotations(),this.renderArchiveInfo(),this.$content=this.$(l.IBIS_BOOK_CLASS),this.initialMove(),i||n||(this.$content.find("img").attr("data-mfp-src",function(){return a(this).attr("src")}).magnificPopup({type:"image",mainClass:"mfp-fade",removalDelay:300,image:{verticalFit:!0}}),!t&&e&&e.allowScripts&&dispatchEvent(new Event("load"))),this)},logVeryShortChapter:function(){var e=this;this.saveCurrentPosition({top_percentage:0}),setTimeout(function(){e.saveCurrentPosition({top_percentage:100})},l.SCROLL_READING_DEBOUNCE)},attachFastClick:function(){window.attachfastclick=w.attach(document.body)},renderPagTemplate:function(e){return r(e)},updateChapterNav:function(e){this.$el.find(".sbo-nav-top").html(function(){var t=o.extend(e,{containerClass:"sbo-nav-top"});this.renderPagTemplate(t)})},setTitle:function(e){document.title=e},getNavTemplate:function(){var e=o.extend({},f.toJSON(),{app:f.toJSON(),archive:this.model.toJSON()});return o.template(_,e)},bindAnnotations:function(){f.get("enableAnnotations")&&(this.annotator=new b({parent:this,el:l.IBIS_BOOK_CLASS,model:this.model}),this.annotator.render())},unbindAnnotations:function(){this.annotator&&this.annotator.remove()},mathJaxTypeset:function(){var e=!1;null!==MathJax&&(void 0!==this.model.serverRender&&(e=this.model.serverRender),o.defer(function(){e?MathJax.Hub.Configured():MathJax.Hub.Queue(["Typeset",MathJax.Hub])}))},storedPosition:function(e){e.isValid()&&this.model.get("chapter")===e.get("chapter")&&e.has("end_percentage")&&(this.storagePosition=e.get("end_percentage"))},initialMove:function(){var e,t=this.model.target_anchor||s.history.getHash();t?(e=c.jq(t),this.model.target_anchor=null):f.isPaged()&&this.jumpToEnd?(e=100,delete this.jumpToEnd):(e=this.storagePosition?this.storagePosition:this.model.get("top_percentage")||0,this.storagePosition=void 0),f.isPaged()&&this.adjustColumns(),this.hideUrlBar(),this.moveTo(e)},setCSS:function(e){var t,n,i,r=e.length,o=a('style[title="ibis-book"]'),s=o.length,l=Math.max(r,s);for(t=0;t<l;t++)t<r&&t<s?(n=o.eq(t),n.text(e[t])):t<s?(n=o.eq(t),n.text("")):(i=a('<style type="text/css" title="ibis-book"></style>'),i.text(e[t]),n.after(i),n=i)},setFontCSS:function(e){d.setFontSize(e,"#font-styles",l.IBIS_BOOK_CLASS)},setZoomFactor:function(e){d.setZoomFactor(e,l.IBIS_BOOK_CLASS,'[role="document"]')},zoomToFit:function(){d.zoomToFit(l.IBIS_BOOK_CLASS,'[role="document"]')},adjustColumns:function(e){var t={};this.width=Math.floor(this.$el.width()),this.columnGap=Math.floor(this.$el.outerWidth()-this.width),this.columnOffset=this.columnGap/2,t[Modernizr.prefixed("columnGap")]=this.columnGap,this.$content.css(t),this.calculatePages(e)},updateViewport:function(){this.viewport=c.getViewport()},calculatePages:function(e){var t;this.contentWidth=this.$content[0].scrollWidth,this.numberOfPages=Math.floor(this.contentWidth/(this.width+this.columnOffset)),1===this.numberOfPages&&this.$(l.LAST_SELECTOR).length&&this.$(l.LAST_SELECTOR).offset().left<this.width&&(this.numberOfPages=0),e&&(t=this.percentToPage(this.model.get("top_percentage")),this._pageTo(t,!0))},changeMode:function(e,t){"scroll"===e?this.toScrolling({initialChange:!t}):this.toPaged({initialChange:!t})},toPaged:function(){this.viewport||this.updateViewport(),this.pagedEvents[i+" .content-slidable"]="removeAnimateClass",this.delegateEvents(this.pagedEvents),this.unbindScroll(),u.bind("viewport:change",this.adjustColumns,this),o.defer(this.adjustColumns,{})},saveCurrentPosition:function(e){var t;e=e||{},this.isPreview()||"video"!==this.model.get("format")&&f.get("enableUsage")&&f.has("ready")&&(t=e.top_percentage||this.getTopPercentage(),this.model.set({top_percentage:t},{validate:!0}),u.trigger("position:change",this,this.model),p.triggerRead(this.model))},hideUrlBar:function(){window.scrollTo(0,1)},inBookLink:function(e){var t,n=e.currentTarget.getAttribute("href"),i=this;return 0===n.indexOf("http://")||0===n.indexOf("https://")||0===n.indexOf("mailto:")||"false"===e.currentTarget.getAttribute("data-push-state")||("video"===this.model.get("format")||(e.stopImmediatePropagation(),t=this.model.getSlug(n),0===n.indexOf("#")?(s.history.navigate(t),this.unbindScroll(),setTimeout(function(){i.bindScroll(),a(window).scrollTop(a(window).scrollTop()-100)},50),!0):(s.history.navigate(t,!0),!1)))},getNextChapter:function(e){var t,n,i="keydown"===e.originalEvent.type;if(u.trigger("usage:leaving_chapter",this.model),e&&e.currentTarget.getAttribute){if(e.stopImmediatePropagation(),"false"===e.currentTarget.getAttribute("data-push-state"))return!0;e.preventDefault(),t=this.$(e.currentTarget)}else t=this.$("a.next").first();if(n=t.attr("href"),n&&0===n.indexOf(l.BACKBONE_URL_ROOT)?n=n.slice(l.BACKBONE_URL_ROOT.length):i||(n=this.model.getSlug(n)),!n)return!1;this.saveCurrentPosition(),s.history.navigate(n,!0)},getPreviousChapter:function(e){var t,n,i="keydown"===e.originalEvent.type;if(u.trigger("usage:leaving_chapter",this.model),e&&e.currentTarget.getAttribute){if(e.stopImmediatePropagation(),"false"===e.currentTarget.getAttribute("data-push-state"))return!0;e.preventDefault(),t=this.$(e.currentTarget)}else t=this.$("a.prev").first();if(n=t.attr("href"),n&&0===n.indexOf(l.BACKBONE_URL_ROOT)?n=n.slice(l.BACKBONE_URL_ROOT.length):i||(n=this.model.getSlug(n)),f.isPaged()&&(this.jumpToEnd=!0),!n)return!1;this.saveCurrentPosition(),s.history.navigate(n,!0)},getTopPercentage:function(){return this.topPercentage()},topPercentage:function(e){var t,n,i=e?this.$(e):this.$content;return i&&i.length?(f.isPaged()?(n=Math.abs(i.offset().left),e||(n+=this.width),t=n/this.contentWidth*100):(n=e?i.offset().top:this.viewport.height+a(window).scrollTop(),t=(n-this.$content.offset().top)/this.$content.height()*100),t<0?0:t>100?100:t):0},inPreviousArea:function(e){var t=2*Math.floor(.2*this.viewport.width);return e.pageX<=t},inNextArea:function(e){var t=this.$el.width()-2*Math.floor(.2*this.viewport.width);return e.pageX>=t},screenClick:function(e){var t=!0;this.inPreviousArea(e)?(this._pageTo(this.previousPage(),t),this.hideUrlBar()):this.inNextArea(e)&&(this._pageTo(this.nextPage(),t),this.hideUrlBar())},_pageTo:function(e,t){this.hideUrlBar();var n;e>this.numberOfPages?this.getNextChapter():e<0?this.getPreviousChapter():(n=Math.round((this.width+this.columnOffset)*e),t&&this.$content.addClass("content-slidable"),this.$content.css(Modernizr.prefixed("transform"),"translate3d(-"+n+"px, 0, 0)"),this.currentPage=e)},pageForSelector:function(e){return Math.floor(this.$(e).offset().left/Math.round(this.width+this.columnOffset))},percentToPage:function(e){return this.numberOfPages||this.calculatePages(),Math.round(e/100*this.numberOfPages)},getCurrentPage:function(){return Math.abs(this.$content.offset().left)/Math.round(this.width+this.columnOffset)},previousPage:function(){return(this.currentPage||this.getCurrentPage())-1},nextPage:function(){return this.currentPage+1},removeAnimateClass:function(){this.$content.removeClass("content-slidable"),this.saveCurrentPosition()},touchStart:function(e){e=e.originalEvent,1===e.touches.length&&(this.touchStartX=e.touches[0].pageX,this.touchStartY=e.touches[0].pageY,this.isSwiping=!1)},touchMove:function(e){var t,n;if(e=e.originalEvent,1===e.touches.length)return this.touchEndX=e.touches[0].pageX,this.touchEndY=e.touches[0].pageY,t=this.touchEndX-this.touchStartX,n=this.touchEndY-this.touchStartY,!this.isSwiping&&Math.abs(t)>this.X_DELTA&&Math.abs(n)<this.Y_DELTA&&(this.isSwiping=!0),!1},touchEnd:function(){if(this.isSwiping){var e=this.touchEndX-this.touchStartX,t=!0;return e<-this.X_DELTA?this._pageTo(this.nextPage(),t):e>this.X_DELTA&&this._pageTo(this.previousPage(),t),!1}},setNavEvents:function(){var e=o.extend(this.clickEvents,this.keyEvents);this.delegateEvents(e)},toScrolling:function(e){var t=this;this.viewport||this.updateViewport(),this.setNavEvents(),this.bindScroll(),u.unbind("viewport:change",this.adjustColumns,this),e&&!e.initialChange&&o.defer(function(){var e=t.model.get("top_percentage");t._scrollTo(e)})},bindScroll:function(){o.defer(function(e){a(window).off("scroll.trackNestChapter").on("scroll.trackNestChapter",e)},o.debounce(this.saveCurrentPosition,l.SCROLL_READING_DEBOUNCE))},unbindScroll:function(){a(window).off("scroll.trackNestChapter")},_scrollTo:function(e){var t;e=e||0,(t=this.$content?0===e?e:this.$content.height()*(e/100)-this.viewport.height:0)>=0&&(this.unbindScroll(),window.scrollTo?window.scrollTo(0,t):a("html,body").animate({scrollTop:t},300),this.bindScroll())},moveTo:function(e){var t=o.isNumber(e)?e:this.topPercentage(e);f.isPaged()?this._pageTo(this.percentToPage(t)):this._scrollTo(t)}})}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(7),i=n(10),r=n(1),o=n(8),a=n(12);return t.Object.extend({initialize:function(e,t){e=e||{};var n={targetId:"js-kaltura-player-region",wid:"_"+r(o.IBIS_BOOK_CLASS).attr("data-partner-id"),uiconf_id:r(o.IBIS_BOOK_CLASS).attr("data-ui-id"),flashvars:{forceHDS:!0,autoPlay:!0,autoMute:!1,referenceId:r(o.IBIS_BOOK_CLASS).attr("data-reference-id"),stretchVideo:!1,playbackRateSelector:{defaultSpeed:"1",speeds:".5, .75, 1, 1.25, 1.5, 1.75, 2"},sourceSelector:{plugin:!0,switchOnResize:!1,simpleFormat:!0,displayMode:"sizebitrate"},strings:{"ks-FREE_PREVIEW_END":"You may not have permission to view this clip in full.","ks-FREE_PREVIEW_END_TITLE":"The preview has ended."}},params:{wmode:"transparent"}},s=parseFloat(a.browser.get(o.VIDEO_PREFERENCE_STORAGE_KEY.playback_quality)),l=parseFloat(a.browser.get(o.VIDEO_PREFERENCE_STORAGE_KEY.playback_rate));t&&(n.flashvars=i.assign(n.flashvars,t.flashvars)),s&&i.merge(n.flashvars,{"mediaProxy.preferedFlavorBR":s}),l&&(n.flashvars.playbackRateSelector.defaultSpeed=l),e.sessionError&&(n.readyCallback=function(e){var t=document.getElementById(e);t.kBind("playerReady",function(){i.delay(function(){t.sendNotification("alert",{title:"Very sorry, the video provider timed out generating a session.",message:"Reload the page to try again. A preview of the clip will now play."})},500)})}),i.has(e.ks,"session")&&(n.flashvars.ks=e.ks.session,kWidget.addReadyCallback(this.bindEvents.bind(this))),this.targetId=n.targetId,kWidget.embed(n)},getQueryString:function(){return window.location.search.substring(1)},parseQueryParams:function(){var e=this.getQueryString();return i.chain(e.split("&")).map(function(e){var t=e.split("=");return[t[0],decodeURIComponent(t[1])]}).zipObject().value()},getPlayer:function(e){return document.getElementById(e)},bindEvents:function(e){var t=this.parseQueryParams();this.kdp=this.getPlayer(e),this.startTime=parseInt(t.startTime,10)||0,this.stopTime=parseInt(t.stopTime,10)||0,this.kdp.kBind("playerUpdatePlayhead",this.onPlayerUpdatePlayhead.bind(this)),this.kdp.kBind("playerSeekStart",this.onPlayerChangingPlayhead.bind(this)),this.kdp.kBind("scrubberDragEnd",this.onPlayerChangingPlayhead.bind(this))},onPlayerChangingPlayhead:function(){this.ignoreNextPlayheadUpdate=!0},onPlayerUpdatePlayhead:function(e){var t;if(this.ignoreNextPlayheadUpdate)return this.ignoreNextPlayheadUpdate=!1,void(this.lastPositionInBounds=!1);this.startTime&&e<this.startTime&&this.kdp.sendNotification("doSeek",this.startTime),this.stopTime>0&&(t=this.stopTime-e,t<=0&&this.lastPositionInBounds&&this.kdp.sendNotification("doStop"),this.lastPositionInBounds=!(t<0))},destroy:function(){kWidget.destroy(this.targetId)}})}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a,s,l,c,u,d=n(10),p=n(4),h=n(1),f=n(8),_=n(19),m=n(11),g=n(279),v=n(315),y=n(375),b=n(630),T=n(376),w=n(347),C=n(234).get();return n(240),o=function(){t&&(t.destroy(),t=null),r&&(r.destroy(),r=null),i&&(i.collection.length&&i.collection.last().destroy(),i.destroy(),i=null),m.channel("reader").off("routeUpdate",o)},a=function(e,t){e=e||{},h(f.KALTURA_PLAYER_ID).length&&(r||(r=new b(e,t))),d.defer(function(e){m.channel("reader").on("routeUpdate",e)},o)},s=function(e){var n={};h(f.KALTURA_PLAYER_ID).length&&(l=e,n.success=function(e){d.has(e,"session")?(a({ks:e}),!t&&C.get("enableUsage")&&(t=new y({model:l})),!i&&C.get("enableUsage")&&(i=new T({model:g.get(),collection:v.get()}),i.isIOS=kWidget.isIOS())):a()},n.error=function(){a({sessionError:"Kaltura session timed out."})},n.forbidden=function(){a()},w.get(n))},c=function(e){switch(e){case"playerEvents":return t;case"playerObj":return r;case"playerUsage":return i;default:return!1}},u=function(e){"undefined"==typeof kWidget?m.channel("kaltura").trigger("initFailed"):_.loggedIn()&&e instanceof p.Model?s(e):a()},{trackPlayerUsage:s,createPlayer:a,destroyPlayer:o,get:c,init:u}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r=n(4),o=n(10),a=n(1),s=n(14);return t=r.Model.extend({defaults:{selected:!1,topPercentage:0}}),i=r.Collection.extend({model:t,fetch:function(e){var t,n=this,i=e.book_id,r=e.chapter_href;return s.trigger("loading:show"),t=a.ajax({dataType:"json",url:"/nest/epub/toc/?book_id="+i,success:function(t){var i,a=o.map(t.items,function(e){return e.href===r&&(e.selected=!0),e.uri=e.href,e});i=["title","title_safe","authors","publisher","pub_date","detail_url","detail_position","thumbnail_tag","book_id"],o.each(i,function(e){t[e]&&(n[e]=t[e])}),this.detail_position=t.detail_position,n.reset(a),e.success&&e.success(n,t)},type:"GET",complete:function(){s.trigger("loading:hide")}}),t.promise()}}),{Chapter:t,Chapters:i}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i,r,o;!function(a){r=[n(1)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(t){function e(e){for(var t=e.css("visibility");"inherit"===t;)e=e.parent(),t=e.css("visibility");return"hidden"!==t}t.ui=t.ui||{},t.ui.version="1.12.1";var n=0,o=Array.prototype.slice;t.cleanData=function(e){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{(i=t._data(r,"events"))&&i.remove&&t(r).triggerHandler("remove")}catch(e){}e(n)}}(t.cleanData),t.widget=function(e,i,r){var o,a,s,l={},c=e.split(".")[0];e=e.split(".")[1];var u=c+"-"+e;return r||(r=i,i=t.Widget),t.isArray(r)&&(r=t.extend.apply(null,[{}].concat(r))),t.expr[":"][u.toLowerCase()]=function(e){return!!t.data(e,u)},t[c]=t[c]||{},o=t[c][e],a=t[c][e]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},t.extend(a,o,{version:r.version,_proto:t.extend({},r),_childConstructors:[]}),s=new i,s.options=t.widget.extend({},s.options),t.each(r,function(e,r){return t.isFunction(r)?void(l[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=r.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(l[e]=r)}),a.prototype=t.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||e:e},l,{constructor:a,namespace:c,widgetName:e,widgetFullName:u}),o?(t.each(o._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var n,i,r=o.call(arguments,1),a=0,s=r.length;s>a;a++)for(n in r[a])i=r[a][n],r[a].hasOwnProperty(n)&&void 0!==i&&(e[n]=t.isPlainObject(i)?t.isPlainObject(e[n])?t.widget.extend({},e[n],i):t.widget.extend({},i):i);return e},t.widget.bridge=function(e,n){var i=n.prototype.widgetFullName||e;t.fn[e]=function(r){var a="string"==typeof r,s=o.call(arguments,1),l=this;return a?this.length||"instance"!==r?this.each(function(){var n,o=t.data(this,i);return"instance"===r?(l=o,!1):o?t.isFunction(o[r])&&"_"!==r.charAt(0)?(n=o[r].apply(o,s),n!==o&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+r+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")}):l=void 0:(s.length&&(r=t.widget.extend.apply(null,[r].concat(s))),this.each(function(){var e=t.data(this,i);e?(e.option(r||{}),e._init&&e._init()):t.data(this,i,new n(r,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,n){e._removeClass(n,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,r,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},i=e.split("."),e=i.shift(),i.length){for(r=a[e]=t.widget.extend({},this.options[e]),o=0;i.length-1>o;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(e=i.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(e){var n,i,r;for(n in e)r=this.classesElementLookup[n],e[n]!==this.options.classes[n]&&r&&r.length&&(i=t(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:e,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,s;for(s=0;i.length>s;s++)a=r.classesElementLookup[i[s]]||t(),a=t(e.add?t.unique(a.get().concat(e.element.get())):a.not(e.element).get()),r.classesElementLookup[i[s]]=a,n.push(i[s]),o&&e.classes[i[s]]&&n.push(e.classes[i[s]])}var n=[],r=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,function(i,r){-1!==t.inArray(e.target,r)&&(n.classesElementLookup[i]=t(r.not(e.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof e||null===e,o={extra:r?t:n,keys:r?e:t,element:r?this.element:e,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(e,n,i){var o,a=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=o=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),t.each(i,function(i,s){function r(){return e||!0!==a.options.disabled&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?a[s]:s).apply(a,arguments):void 0}"string"!=typeof s&&(r.guid=s.guid=s.guid||r.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.on(c,u,r):n.on(c,r)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(n).off(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var r,o,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?!0===r||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),a=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&t.effects&&t.effects.effect[s]?i[e](r):s!==e&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){t(this)[e](),o&&o.call(i[0]),n()})}}),t.widget,function(){function e(e,t,n){return[parseFloat(e[0])*(d.test(e[0])?t/100:1),parseFloat(e[1])*(d.test(e[1])?n/100:1)]}function i(e,n){return parseInt(t.css(e,n),10)||0}function s(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var n,r=Math.max,o=Math.abs,a=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,d=/%$/,p=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==n)return n;var e,i,r=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return t("body").append(r),e=o.offsetWidth,r.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=r[0].clientWidth),r.remove(),n=e-i},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:r,offset:i||r?{left:0,top:0}:t(e).offset(),scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},t.fn.position=function(n){if(!n||!n.of)return p.apply(this,arguments);n=t.extend({},n);var d,h,f,_,m,g,v=t(n.of),y=t.position.getWithinInfo(n.within),b=t.position.getScrollInfo(y),T=(n.collision||"flip").split(" "),w={};return g=s(v),v[0].preventDefault&&(n.at="left top"),h=g.width,f=g.height,_=g.offset,m=t.extend({},_),t.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=a.test(i[0])?i.concat(["center"]):l.test(i[0])?["center"].concat(i):["center","center"]),i[0]=a.test(i[0])?i[0]:"center",i[1]=l.test(i[1])?i[1]:"center",e=c.exec(i[0]),t=c.exec(i[1]),w[this]=[e?e[0]:0,t?t[0]:0],n[this]=[u.exec(i[0])[0],u.exec(i[1])[0]]}),1===T.length&&(T[1]=T[0]),"right"===n.at[0]?m.left+=h:"center"===n.at[0]&&(m.left+=h/2),"bottom"===n.at[1]?m.top+=f:"center"===n.at[1]&&(m.top+=f/2),d=e(w.at,h,f),m.left+=d[0],m.top+=d[1],this.each(function(){var a,s,l=t(this),c=l.outerWidth(),u=l.outerHeight(),p=i(this,"marginLeft"),g=i(this,"marginTop"),C=c+p+i(this,"marginRight")+b.width,M=u+g+i(this,"marginBottom")+b.height,k=t.extend({},m),L=e(w.my,l.outerWidth(),l.outerHeight());"right"===n.my[0]?k.left-=c:"center"===n.my[0]&&(k.left-=c/2),"bottom"===n.my[1]?k.top-=u:"center"===n.my[1]&&(k.top-=u/2),k.left+=L[0],k.top+=L[1],a={marginLeft:p,marginTop:g},t.each(["left","top"],function(e,i){t.ui.position[T[e]]&&t.ui.position[T[e]][i](k,{targetWidth:h,targetHeight:f,elemWidth:c,elemHeight:u,collisionPosition:a,collisionWidth:C,collisionHeight:M,offset:[d[0]+L[0],d[1]+L[1]],my:n.my,at:n.at,within:y,elem:l})}),n.using&&(s=function(e){var t=_.left-k.left,i=t+h-c,a=_.top-k.top,s=a+f-u,d={target:{element:v,left:_.left,top:_.top,width:h,height:f},element:{element:l,left:k.left,top:k.top,width:c,height:u},horizontal:0>i?"left":t>0?"right":"center",vertical:0>s?"top":a>0?"bottom":"middle"};c>h&&h>o(t+i)&&(d.horizontal="center"),u>f&&f>o(a+s)&&(d.vertical="middle"),d.important=r(o(t),o(i))>r(o(a),o(s))?"horizontal":"vertical",n.using.call(this,e,d)}),l.offset(t.extend(k,{using:s}))})},t.ui.position={fit:{left:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,s=e.left-t.collisionPosition.marginLeft,l=o-s,c=s+t.collisionWidth-a-o;t.collisionWidth>a?l>0&&0>=c?(n=e.left+l+t.collisionWidth-a-o,e.left+=l-n):e.left=c>0&&0>=l?o:l>c?o+a-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=r(e.left-s,e.left)},top:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollTop:i.offset.top,a=t.within.height,s=e.top-t.collisionPosition.marginTop,l=o-s,c=s+t.collisionHeight-a-o;t.collisionHeight>a?l>0&&0>=c?(n=e.top+l+t.collisionHeight-a-o,e.top+=l-n):e.top=c>0&&0>=l?o:l>c?o+a-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=r(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,a=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-s-l,p="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(0>(n=e.left+p+h+f+t.collisionWidth-s-a)||o(u)>n)&&(e.left+=p+h+f):d>0&&((i=e.left-t.collisionPosition.marginLeft+p+h+f-l)>0||d>o(i))&&(e.left+=p+h+f)},top:function(e,t){var n,i,r=t.within,a=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-s-l,p="top"===t.my[1],h=p?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,_=-2*t.offset[1];0>u?(0>(i=e.top+h+f+_+t.collisionHeight-s-a)||o(u)>i)&&(e.top+=h+f+_):d>0&&((n=e.top-t.collisionPosition.marginTop+h+f+_-l)>0||d>o(n))&&(e.top+=h+f+_)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])}}),t.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.ui.focusable=function(n,i){var r,o,a,s,l,c=n.nodeName.toLowerCase();return"area"===c?(r=n.parentNode,o=r.name,!(!n.href||!o||"map"!==r.nodeName.toLowerCase())&&(a=t("img[usemap='#"+o+"']"),a.length>0&&a.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(c)?(s=!n.disabled)&&(l=t(n).closest("fieldset")[0])&&(s=!l.disabled):s="a"===c?n.href||i:i,s&&t(n).is(":visible")&&e(t(n)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable,"1.7"===t.fn.jquery.substring(0,3)&&(t.each(["Width","Height"],function(e,n){function s(e,n,r,o){return t.each(i,function(){n-=parseFloat(t.css(e,"padding"+this))||0,r&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var i="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(e){return void 0===e?o["inner"+n].call(this):this.each(function(){t(this).css(r,s(this,e)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?o["outer"+n].call(this,e):this.each(function(){t(this).css(r,s(this,e,!0,i)+"px")})}}),t.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}(),t.fn.labels=function(){var e,n,i,r,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(r=this.eq(0).parents("label"),i=this.attr("id"),i&&(e=this.eq(0).parents().last(),o=e.add(e.length?e.siblings():this.siblings()),n="label[for='"+t.ui.escapeSelector(i)+"']",r=r.add(o.find(n).addBack(n))),this.pushStack(r))},t.fn.scrollParent=function(e){var n=this.css("position"),i="absolute"===n,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return(!i||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:t(this[0].ownerDocument||document)},t.extend(t.expr[":"],{tabbable:function(e){var n=t.attr(e,"tabindex"),i=null!=n;return(!i||n>=0)&&t.ui.focusable(e,i)}}),t.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var a=!1;t(document).on("mouseup",function(){a=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!a){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,i=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(i&&!r&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),a=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,a=!1,e.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,n,i){var r,o=t.ui[e].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n,i){var r,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;o.length>r;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}},t.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var n=this.options;return!(this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var n=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(n).length||t.ui.safeBlur(n)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==n._trigger("stop",e)&&n._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper),r=i?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options,o=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=t(r.containment),void((i=n[0])&&(e=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,i){var r=t.extend({},n,{item:i.element});i.sortables=[],t(i.options.connectToSortable).each(function(){var n=t(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",e,r))})},stop:function(e,n,i){var r=t.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,t.each(i.sortables,function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,r))})},drag:function(e,n,i){t.each(i.sortables,function(){var r=!1,o=this;o.positionAbs=i.positionAbs,o.helperProportions=i.helperProportions,o.offset.click=i.offset.click,o._intersectsWith(o.containerCache)&&(r=!0,t.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(r=!1),r})),r?(o.isOver||(o.isOver=1,i._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=i.offset.click.top,o.offset.click.left=i.offset.click.left,o.offset.parent.left-=i.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=i.offset.parent.top-o.offset.parent.top,i._trigger("toSortable",e),i.dropped=o.element,t.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,o.fromOutside=i),o.currentItem&&(o._mouseDrag(e),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(e),n.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,t.each(i.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,n,i){var r=t("body"),o=i.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(e,n,i){var r=i.options;r._cursor&&t("body").css("cursor",r._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n,i){var r=t(n.helper),o=i.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(e,n,i){var r=i.options;r._opacity&&t(n.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,n,i){var r=i.options,o=!1,a=i.scrollParentNotHidden[0],s=i.document[0];a!==s&&"HTML"!==a.tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+a.offsetHeight-e.pageY<r.scrollSensitivity?a.scrollTop=o=a.scrollTop+r.scrollSpeed:e.pageY-i.overflowOffset.top<r.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+a.offsetWidth-e.pageX<r.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+r.scrollSpeed:e.pageX-i.overflowOffset.left<r.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(s).scrollTop()<r.scrollSensitivity?o=t(s).scrollTop(t(s).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(s).scrollTop())<r.scrollSensitivity&&(o=t(s).scrollTop(t(s).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(s).scrollLeft()<r.scrollSensitivity?o=t(s).scrollLeft(t(s).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(s).scrollLeft())<r.scrollSensitivity&&(o=t(s).scrollLeft(t(s).scrollLeft()+r.scrollSpeed)))),!1!==o&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,n,i){var r=i.options;i.snapElements=[],t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var e=t(this),n=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(e,n,i){var r,o,a,s,l,c,u,d,p,h,f=i.options,_=f.snapTolerance,m=n.offset.left,g=m+i.helperProportions.width,v=n.offset.top,y=v+i.helperProportions.height;for(p=i.snapElements.length-1;p>=0;p--)l=i.snapElements[p].left-i.margins.left,c=l+i.snapElements[p].width,u=i.snapElements[p].top-i.margins.top,d=u+i.snapElements[p].height,l-_>g||m>c+_||u-_>y||v>d+_||!t.contains(i.snapElements[p].item.ownerDocument,i.snapElements[p].item)?(i.snapElements[p].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[p].item})),i.snapElements[p].snapping=!1):("inner"!==f.snapMode&&(r=_>=Math.abs(u-y),o=_>=Math.abs(d-v),a=_>=Math.abs(l-g),s=_>=Math.abs(c-m),r&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),h=r||o||a||s,"outer"!==f.snapMode&&(r=_>=Math.abs(u-v),o=_>=Math.abs(d-y),a=_>=Math.abs(l-m),s=_>=Math.abs(c-g),r&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[p].snapping&&(r||o||a||s||h)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[p].item})),i.snapElements[p].snapping=r||o||a||s||h)}}),t.ui.plugin.add("draggable","stack",{start:function(e,n,i){var r,o=i.options,a=t.makeArray(t(o.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});a.length&&(r=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",r+e)}),this.css("zIndex",r+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n,i){var r=t(n.helper),o=i.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(e,n,i){var r=i.options;r._zIndex&&t(n.helper).css("zIndex",r._zIndex)}}),t.ui.draggable})},function(e,t,n){"use strict";var i,r,o;!function(a){r=[n(1)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function simulateMouseEvent(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var n=e.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}if(e.support.touch="ontouchend"in document,e.support.touch){var t,n=e.ui.mouse.prototype,i=n._mouseInit,r=n._mouseDestroy;n._touchStart=function(e){var n=this;!t&&n._mouseCapture(e.originalEvent.changedTouches[0])&&(t=!0,n._touchMoved=!1,simulateMouseEvent(e,"mouseover"),simulateMouseEvent(e,"mousemove"),simulateMouseEvent(e,"mousedown"))},n._touchMove=function(e){t&&(this._touchMoved=!0,simulateMouseEvent(e,"mousemove"))},n._touchEnd=function(e){t&&(simulateMouseEvent(e,"mouseup"),simulateMouseEvent(e,"mouseout"),this._touchMoved||simulateMouseEvent(e,"click"),t=!1)},n._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),i.call(t)},n._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),r.call(t)}}})},function(e,t,n){"use strict";!function(e){var t,i,r,o,a,s,l,c="Close",u="BeforeClose",d="AfterClose",p="BeforeAppend",h="MarkupParse",f="Open",_="Change",m="mfp",g="."+m,v="mfp-ready",y="mfp-removing",b="mfp-prevent-close",T=function(){},e=n(1),w=!!window.jQuery,C=e(window),M=function(e,n){t.ev.on(m+e+g,n)},k=function(t,n,i,r){var o=document.createElement("div");return o.className="mfp-"+t,i&&(o.innerHTML=i),r?n&&n.appendChild(o):(o=e(o),n&&o.appendTo(n)),o},L=function(n,i){t.ev.triggerHandler(m+n,i),t.st.callbacks&&(n=n.charAt(0).toLowerCase()+n.slice(1),t.st.callbacks[n]&&t.st.callbacks[n].apply(t,e.isArray(i)?i:[i]))},E=function(n){return n===l&&t.currTemplate.closeBtn||(t.currTemplate.closeBtn=e(t.st.closeMarkup.replace("%title%",t.st.tClose)),l=n),t.currTemplate.closeBtn},S=function(){e.magnificPopup.instance||(t=new T,t.init(),e.magnificPopup.instance=t)},D=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1};T.prototype={constructor:T,init:function(){var n=navigator.appVersion;t.isIE7=-1!==n.indexOf("MSIE 7."),t.isIE8=-1!==n.indexOf("MSIE 8."),t.isLowIE=t.isIE7||t.isIE8,t.isAndroid=/android/gi.test(n),t.isIOS=/iphone|ipad|ipod/gi.test(n),t.supportsTransition=D(),t.probablyMobile=t.isAndroid||t.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),o=e(document),t.popupsCache={}},open:function(n){r||(r=e(document.body));var i;if(!1===n.isObj){t.items=n.items.toArray(),t.index=0;var a,l=n.items;for(i=0;i<l.length;i++)if(a=l[i],a.parsed&&(a=a.el[0]),a===n.el[0]){t.index=i;break}}else t.items=e.isArray(n.items)?n.items:[n.items],t.index=n.index||0;if(t.isOpen)return void t.updateItemHTML();t.types=[],s="",n.mainEl&&n.mainEl.length?t.ev=n.mainEl.eq(0):t.ev=o,n.key?(t.popupsCache[n.key]||(t.popupsCache[n.key]={}),t.currTemplate=t.popupsCache[n.key]):t.currTemplate={},t.st=e.extend(!0,{},e.magnificPopup.defaults,n),t.fixedContentPos="auto"===t.st.fixedContentPos?!t.probablyMobile:t.st.fixedContentPos,t.st.modal&&(t.st.closeOnContentClick=!1,t.st.closeOnBgClick=!1,t.st.showCloseBtn=!1,t.st.enableEscapeKey=!1),t.bgOverlay||(t.bgOverlay=k("bg").on("click"+g,function(){t.close()}),t.wrap=k("wrap").attr("tabindex",-1).on("click"+g,function(e){t._checkIfClose(e.target)&&t.close()}),t.container=k("container",t.wrap)),t.contentContainer=k("content"),t.st.preloader&&(t.preloader=k("preloader",t.container,t.st.tLoading));var c=e.magnificPopup.modules;for(i=0;i<c.length;i++){var u=c[i];u=u.charAt(0).toUpperCase()+u.slice(1),t["init"+u].call(t)}L("BeforeOpen"),t.st.showCloseBtn&&(t.st.closeBtnInside?(M(h,function(e,t,n,i){n.close_replaceWith=E(i.type)}),s+=" mfp-close-btn-in"):t.wrap.append(E())),t.st.alignTop&&(s+=" mfp-align-top"),t.fixedContentPos?t.wrap.css({overflow:t.st.overflowY,overflowX:"hidden",overflowY:t.st.overflowY}):t.wrap.css({top:C.scrollTop(),position:"absolute"}),(!1===t.st.fixedBgPos||"auto"===t.st.fixedBgPos&&!t.fixedContentPos)&&t.bgOverlay.css({height:o.height(),position:"absolute"}),t.st.enableEscapeKey&&o.on("keyup"+g,function(e){27===e.keyCode&&t.close()}),C.on("resize"+g,function(){t.updateSize()}),t.st.closeOnContentClick||(s+=" mfp-auto-cursor"),s&&t.wrap.addClass(s);var d=t.wH=C.height(),p={};if(t.fixedContentPos&&t._hasScrollBar(d)){var _=t._getScrollbarSize();_&&(p.marginRight=_)}t.fixedContentPos&&(t.isIE7?e("body, html").css("overflow","hidden"):p.overflow="hidden");var m=t.st.mainClass;return t.isIE7&&(m+=" mfp-ie7"),m&&t._addClassToMFP(m),t.updateItemHTML(),L("BuildControls"),e("html").css(p),t.bgOverlay.add(t.wrap).prependTo(t.st.prependTo||r),t._lastFocusedEl=document.activeElement,setTimeout(function(){t.content?(t._addClassToMFP(v),t._setFocus()):t.bgOverlay.addClass(v),o.on("focusin"+g,t._onFocusIn)},16),t.isOpen=!0,t.updateSize(d),L(f),n},close:function(){t.isOpen&&(L(u),t.isOpen=!1,t.st.removalDelay&&!t.isLowIE&&t.supportsTransition?(t._addClassToMFP(y),setTimeout(function(){t._close()},t.st.removalDelay)):t._close())},_close:function(){L(c);var n=y+" "+v+" ";if(t.bgOverlay.detach(),t.wrap.detach(),t.container.empty(),t.st.mainClass&&(n+=t.st.mainClass+" "),t._removeClassFromMFP(n),t.fixedContentPos){var i={marginRight:""};t.isIE7?e("body, html").css("overflow",""):i.overflow="",e("html").css(i)}o.off("keyup"+g+" focusin"+g),t.ev.off(g),t.wrap.attr("class","mfp-wrap").removeAttr("style"),t.bgOverlay.attr("class","mfp-bg"),t.container.attr("class","mfp-container"),!t.st.showCloseBtn||t.st.closeBtnInside&&!0!==t.currTemplate[t.currItem.type]||t.currTemplate.closeBtn&&t.currTemplate.closeBtn.detach(),t._lastFocusedEl&&e(t._lastFocusedEl).focus(),t.currItem=null,t.content=null,t.currTemplate=null,t.prevHeight=0,L(d)},updateSize:function(e){if(t.isIOS){var n=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*n;t.wrap.css("height",i),t.wH=i}else t.wH=e||C.height();t.fixedContentPos||t.wrap.css("height",t.wH),L("Resize")},updateItemHTML:function(){var n=t.items[t.index];t.contentContainer.detach(),t.content&&t.content.detach(),n.parsed||(n=t.parseEl(t.index));var i=n.type;if(L("BeforeChange",[t.currItem?t.currItem.type:"",i]),t.currItem=n,!t.currTemplate[i]){var r=!!t.st[i]&&t.st[i].markup;L("FirstMarkupParse",r),t.currTemplate[i]=!r||e(r)}a&&a!==n.type&&t.container.removeClass("mfp-"+a+"-holder");var o=t["get"+i.charAt(0).toUpperCase()+i.slice(1)](n,t.currTemplate[i]);t.appendContent(o,i),n.preloaded=!0,L(_,n),a=n.type,t.container.prepend(t.contentContainer),L("AfterChange")},appendContent:function(e,n){t.content=e,e?t.st.showCloseBtn&&t.st.closeBtnInside&&!0===t.currTemplate[n]?t.content.find(".mfp-close").length||t.content.append(E()):t.content=e:t.content="",L(p),t.container.addClass("mfp-"+n+"-holder"),t.contentContainer.append(t.content)},parseEl:function(n){var i,r=t.items[n];if(r.tagName?r={el:e(r)}:(i=r.type,r={data:r,src:r.src}),r.el){for(var o=t.types,a=0;a<o.length;a++)if(r.el.hasClass("mfp-"+o[a])){i=o[a];break}r.src=r.el.attr("data-mfp-src"),r.src||(r.src=r.el.attr("href"))}return r.type=i||t.st.type||"inline",r.index=n,r.parsed=!0,t.items[n]=r,L("ElementParse",r),t.items[n]},addGroup:function(e,n){var i=function(i){i.mfpEl=this,t._openClick(i,e,n)};n||(n={});var r="click.magnificPopup";n.mainEl=e,n.items?(n.isObj=!0,e.off(r).on(r,i)):(n.isObj=!1,n.delegate?e.off(r).on(r,n.delegate,i):(n.items=e,e.off(r).on(r,i)))},_openClick:function(n,i,r){if((void 0!==r.midClick?r.midClick:e.magnificPopup.defaults.midClick)||2!==n.which&&!n.ctrlKey&&!n.metaKey){var o=void 0!==r.disableOn?r.disableOn:e.magnificPopup.defaults.disableOn;if(o)if(e.isFunction(o)){if(!o.call(t))return!0}else if(C.width()<o)return!0;n.type&&(n.preventDefault(),t.isOpen&&n.stopPropagation()),r.el=e(n.mfpEl),r.delegate&&(r.items=i.find(r.delegate)),t.open(r)}},updateStatus:function(e,n){if(t.preloader){i!==e&&t.container.removeClass("mfp-s-"+i),n||"loading"!==e||(n=t.st.tLoading);var r={status:e,text:n};L("UpdateStatus",r),e=r.status,n=r.text,t.preloader.html(n),t.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),t.container.addClass("mfp-s-"+e),i=e}},_checkIfClose:function(n){if(!e(n).hasClass(b)){var i=t.st.closeOnContentClick,r=t.st.closeOnBgClick;if(i&&r)return!0;if(!t.content||e(n).hasClass("mfp-close")||t.preloader&&n===t.preloader[0])return!0;if(n===t.content[0]||e.contains(t.content[0],n)){if(i)return!0}else if(r&&e.contains(document,n))return!0;return!1}},_addClassToMFP:function(e){t.bgOverlay.addClass(e),t.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),t.wrap.removeClass(e)},_hasScrollBar:function(e){return(t.isIE7?o.height():document.body.scrollHeight)>(e||C.height())},_setFocus:function(){(t.st.focus?t.content.find(t.st.focus).eq(0):t.wrap).focus()},_onFocusIn:function(n){if(n.target!==t.wrap[0]&&!e.contains(t.wrap[0],n.target))return t._setFocus(),!1},_parseMarkup:function(t,n,i){var r;i.data&&(n=e.extend(i.data,n)),L(h,[t,n,i]),e.each(n,function(e,n){if(void 0===n||!1===n)return!0;if(r=e.split("_"),r.length>1){var i=t.find(g+"-"+r[0]);if(i.length>0){var o=r[1];"replaceWith"===o?i[0]!==n[0]&&i.replaceWith(n):"img"===o?i.is("img")?i.attr("src",n):i.replaceWith('<img src="'+n+'" class="'+i.attr("class")+'" />'):i.attr(r[1],n)}}else t.find(g+"-"+e).html(n)})},_getScrollbarSize:function(){if(void 0===t.scrollbarSize){var e=document.createElement("div");e.id="mfp-sbm",e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),t.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return t.scrollbarSize}},e.magnificPopup={instance:null,proto:T.prototype,modules:[],open:function(t,n){return S(),t=t?e.extend(!0,{},t):{},t.isObj=!0,t.index=n||0,this.instance.open(t)},close:function(){return e.magnificPopup.instance&&e.magnificPopup.instance.close()},registerModule:function(t,n){n.options&&(e.magnificPopup.defaults[t]=n.options),e.extend(this.proto,n.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},e.fn.magnificPopup=function(n){S();var i=e(this);if("string"==typeof n)if("open"===n){var r,o=w?i.data("magnificPopup"):i[0].magnificPopup,a=parseInt(arguments[1],10)||0;o.items?r=o.items[a]:(r=i,o.delegate&&(r=r.find(o.delegate)),r=r.eq(a)),t._openClick({mfpEl:r},i,o)}else t.isOpen&&t[n].apply(t,Array.prototype.slice.call(arguments,1));else n=e.extend(!0,{},n),w?i.data("magnificPopup",n):i.magnificPopup=n,t.addGroup(i,n);return i};var O,x=function(n){if(n.data&&void 0!==n.data.title)return n.data.title;var i=t.st.image.titleSrc;if(i){if(e.isFunction(i))return i.call(t,n);if(n.el)return n.el.attr(i)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=t.st.image,n=".image";t.types.push("image"),M(f+n,function(){"image"===t.currItem.type&&e.cursor&&r.addClass(e.cursor)}),M(c+n,function(){e.cursor&&r.removeClass(e.cursor),C.off("resize"+g)}),M("Resize"+n,t.resizeImage),t.isLowIE&&M("AfterChange",t.resizeImage)},resizeImage:function(){var e=t.currItem;if(e&&e.img&&t.st.image.verticalFit){var n=0;t.isLowIE&&(n=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",t.wH-n)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,O&&clearInterval(O),e.isCheckingImgSize=!1,L("ImageHasSize",e),e.imgHidden&&(t.content&&t.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var n=0,i=e.img[0];!function mfpSetInterval(r){O&&clearInterval(O),O=setInterval(function(){if(i.naturalWidth>0)return void t._onImageHasSize(e);n>200&&clearInterval(O),n++,3===n?mfpSetInterval(10):40===n?mfpSetInterval(50):100===n&&mfpSetInterval(500)},r)}(1)},getImage:function(n,i){var r=0,o=function onLoadComplete(){n&&(n.img[0].complete?(n.img.off(".mfploader"),n===t.currItem&&(t._onImageHasSize(n),t.updateStatus("ready")),n.hasSize=!0,n.loaded=!0,L("ImageLoadComplete")):(r++,r<200?setTimeout(onLoadComplete,100):a()))},a=function(){n&&(n.img.off(".mfploader"),n===t.currItem&&(t._onImageHasSize(n),t.updateStatus("error",s.tError.replace("%url%",n.src))),n.hasSize=!0,n.loaded=!0,n.loadError=!0)},s=t.st.image,l=i.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",n.img=e(c).on("load.mfploader",o).on("error.mfploader",a),c.src=n.src,l.is("img")&&(n.img=n.img.clone()),c=n.img[0],c.naturalWidth>0?n.hasSize=!0:c.width||(n.hasSize=!1)}return t._parseMarkup(i,{title:x(n),img_replaceWith:n.img},n),t.resizeImage(),n.hasSize?(O&&clearInterval(O),n.loadError?(i.addClass("mfp-loading"),t.updateStatus("error",s.tError.replace("%url%",n.src))):(i.removeClass("mfp-loading"),t.updateStatus("ready")),i):(t.updateStatus("loading"),n.loading=!0,n.hasSize||(n.imgHidden=!0,i.addClass("mfp-loading"),t.findImageSize(n)),i)}}});var R,A=function(){return void 0===R&&(R=void 0!==document.createElement("p").style.MozTransform),R};e.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,n=t.st.zoom,i=".zoom";if(n.enabled&&t.supportsTransition){var r,o,a=n.duration,s=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+n.duration/1e3+"s "+n.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},o="transition";return r["-webkit-"+o]=r["-moz-"+o]=r["-o-"+o]=r[o]=i,t.css(r),t},l=function(){t.content.css("visibility","visible")};M("BuildControls"+i,function(){if(t._allowZoom()){if(clearTimeout(r),t.content.css("visibility","hidden"),!(e=t._getItemToZoom()))return void l();o=s(e),o.css(t._getOffset()),t.wrap.append(o),r=setTimeout(function(){o.css(t._getOffset(!0)),r=setTimeout(function(){l(),setTimeout(function(){o.remove(),e=o=null,L("ZoomAnimationEnded")},16)},a)},16)}}),M(u+i,function(){if(t._allowZoom()){if(clearTimeout(r),t.st.removalDelay=a,!e){if(!(e=t._getItemToZoom()))return;o=s(e)}o.css(t._getOffset(!0)),t.wrap.append(o),t.content.css("visibility","hidden"),setTimeout(function(){o.css(t._getOffset())},16)}}),M(c+i,function(){t._allowZoom()&&(l(),o&&o.remove(),e=null)})}},_allowZoom:function(){return"image"===t.currItem.type},_getItemToZoom:function(){return!!t.currItem.hasSize&&t.currItem.img},_getOffset:function(n){var i;i=n?t.currItem.img:t.st.zoom.opener(t.currItem.el||t.currItem);var r=i.offset(),o=parseInt(i.css("padding-top"),10),a=parseInt(i.css("padding-bottom"),10);r.top-=e(window).scrollTop()-o;var s={width:i.width(),height:(w?i.innerHeight():i[0].offsetHeight)-a-o};return A()?s["-moz-transform"]=s.transform="translate("+r.left+"px,"+r.top+"px)":(s.left=r.left,s.top=r.top),s}}}),S()}(window.jQuery||window.Zepto)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a=n(1),s=n(14),l=n(118);return i=function(){var e=r.find("a");a(e).each(function(){l.attach(this),1===a(this).text().length&&a(this).addClass("totri-footnote")})},function(e,t){var n,i=".title, .FigCapt, .caption, .fig-caption, .figleg, .ex-caption, .caption1, .source, .TabCapt, .figcap, .tab-caption, .notetitle, .fig-title, .fig",r=".figure, .Figure, .image, .pageavoid, .table, .group, .image, .center1";t>e.width()&&t>50?(n=e.addClass("js-totri-lightbox").closest(r).addClass("totri-image-wrapper").find(i).text(),""===n&&(n=""!==e.parent().next(i).text()?e.parent().next(i).text():e.parent().prev(i).text()),e.attr("title",n)):e.off()},o=function(){var e=a("body"),t=e.hasClass("pdfdoc"),n=e.hasClass("video");t||n||(r=a("#sbo-rt-content"),i())},t=function(){s.on("document:render_complete",o,this)},{bind:t}}.call(t,n,t,e))&&(e.exports=i)},,,,,,function(e,t,n){"use strict";(function(i){var r,o;r=[n(1),n(2),n(4),n(8),n(6),n(622),n(14),n(1104),n(1108),n(1103),n(1105),n(1106),n(1107),n(307)],void 0!==(o=function(e,t,n,r,o,a,s,l,c,u,d,p,h){function browserSupportsCopy(){var e=o.getBrowser(),t="Chrome"===e.name&&e.version>43,n="Firefox"===e.name&&e.version>=41;return t||n}var f=i.prototype.onHighlightMouseover,_=i.Viewer.prototype.load,m=i.prototype.setupAnnotation,g=i.Viewer.prototype.onButtonClick,v=i.prototype.checkForEndSelection,y=i.prototype.onAdderClick,b="public"===e("html").attr("data-highlight-privacy"),T="annotator-hide",w="annotator-hl-has-note",C="expandUp";t.merge(i.prototype,{html:{adder:u({isContentCreator:window.USER_IS_CONTENT_CREATOR,isPreviewCreator:window.USER_IS_PREVIEW_CREATOR,browserSupportsCopy:browserSupportsCopy()}),wrapper:'<div class="annotator-wrapper"></div>'},events:{".annotator-adder .add-note a click":"onAdderClick",".annotator-adder .add-note a mousedown":"onAdderMousedown",".annotator-adder .add-highlight a mousedown":"onAdderMousedown"},onAdderClick:function(n){t.isNull(n)||n.stopPropagation(),e(n.target).parent().hasClass("add-preview-content")&&(this.editor.preview_annotation=!0),y.call(this,n)},checkForEndSelection:function(e){v.call(this,e),e&&this.selectedRanges.length?this.publish("adderShown"):this.publish("adderHide")},setupAnnotation:function(t){var n,i=t.text&&t.text.length;return n=m.call(this,t),i&&e(n.highlights).first().addClass(w),n},onHighlightMouseover:function(n){var i,r=e(this.viewer.element),o=r.data("annotationIds"),a=!e(this.editor.element).hasClass(T)&&e(this.editor.element).is(":visible"),s=!e(".annotator-delete-confirm-modal").hasClass(T)&&e(".annotator-delete-confirm-modal").is(":visible");if(a||s)return!1;i=e.makeArray(e(n.target).parents(".annotator-hl").addBack().map(function(){return e(this).data("annotation").id})),this.viewer.isShown()&&(0===t.intersection(i,o).length||t.difference(i,o).length>0)&&this.viewer.hide(),r.data("annotationIds",i),f.call(this,n)},startViewerHideTimer:function(){if(!this.viewerHideTimer)return this.viewerHideTimer=setTimeout(this.viewer.hide,1e3),this.viewerHideTimer}}),t.merge(i.Viewer.prototype,{html:{element:'<div class="annotator-outer annotator-viewer viewer">\n  <ul class="annotator-widget annotator-listing"></ul>\n</div>'},load:function(t){var n,i,r=t[0].text&&t[0].text.length>0;(3===t[0].annotation_type||"preview_annotation"===t[0].annotation_type)&&window.USER_IS_PREVIEW_CREATOR&&(n="previewAnnotation"),i={annotationType:n,browserSupportsCopy:browserSupportsCopy()},this.item=r?d(i):p(i),this.item=e(this.item)[0],_.call(this,t)},onButtonClick:function(e,t){e.preventDefault(),e.stopPropagation(),g.call(this,e,t)}}),t.merge(i.Editor.prototype,{html:h()}),i.Plugin.HeronExtensions=function(e,t){this.options=t,this.el=e,this.archiveModel=this.options.archiveModel},e.extend(i.Plugin.HeronExtensions.prototype,new i.Plugin,{events:{},options:{},pluginInit:function(){var t=l();this.range=void 0,this.alterEditor(),this.bind(),this.isPdfDoc=e("body").hasClass("pdfdoc"),this.isVideoDoc="video"===this.archiveModel.get("format"),this.$interfaceControls=e(".interface-controls-top"),this.annotator.element.find(".annotator-modal-wrapper").after(t),this.$deleteConfirm=e(".annotator-delete-confirm-modal")},bind:function(){this.annotator.subscribe("annotationCreated",e.proxy(this.onAnnotationCreated,this)),this.annotator.subscribe("annotationEditorShown",e.proxy(this.onAnnotationEditorShown,this)),this.annotator.subscribe("annotationStored",e.proxy(this.onAnnotationStored,this)),this.annotator.subscribe("annotationViewerShown",e.proxy(this.onAnnotationViewerShown,this)),this.annotator.subscribe("beforeAnnotationCreated",e.proxy(this.onBeforeAnnotationCreated,this)),this.annotator.editor.subscribe("hide",e.proxy(this.onEditorHide)),this.annotator.subscribe("adderShown",e.proxy(this.onAdderShown,this)),this.annotator.subscribe("adderHide",e.proxy(this.onAdderHide,this)),e(this.annotator.element).on("click touchstart",".annotator-cancel",e.proxy(this.onCancelClicked,this)),e(this.annotator.element).on("click touchstart",".annotator-save",e.proxy(this.onSaveClicked,this)),e(this.annotator.element).on("click touchstart",".copy a",e.proxy(this.onCopyToClipboardClick,this)),e(this.annotator.element).on("click touchstart",".annotator-delete-note",e.proxy(this.onDeleteNote,this)),e(this.annotator.element).on("click touchstart",".js-delete-confirm",e.proxy(this.onDeleteConfirm,this)),e(this.annotator.element).on("click touchstart",".js-cancel-delete-confirm",e.proxy(this.onDeleteConfirmCancel,this)),e(this.annotator.element).on("click touchstart",".js-close-delete-confirm",e.proxy(this.onDeleteConfirmClose,this)),e(this.annotator.element).on("click touchstart",".annotator-adder .add-highlight a",e.proxy(this.onAddHighlightWithOneClick,this)),e(".js-highlight-video").on("click touchstart",e.proxy(this.selectVideoContainer,this)),e("body").on("click",e.proxy(this.onTripleClick,this))},onEditorHide:function(){e(this).hide()},onTripleClick:function(e){var n=this;2===e.detail&&t.delay(function(){n.annotator.adder.hide()},200)},onAddHighlightWithOneClick:function(t){var n=this.annotator.setupAnnotation(this.annotator.createAnnotation()),i=this;t.preventDefault(),t.stopPropagation(),n.text="",e.post("/a/sanitize-fragment/",{fragment:n.fragment}).done(function(t){n.fragment=t,e(n.highlights).addClass("annotator-hl-temporary"),i.annotator.adder.hide(),i.annotator.publish("annotationCreated",[n]),i.annotator.ignoreMouseup=!1})},onDeleteConfirm:function(t){var n=this.annotator.editor.annotation;t.preventDefault(),t.stopPropagation(),n.text="",this.annotator.publish("annotationUpdated",[n]),this.$deleteConfirm.hide(),e(n.highlights).first().removeClass(w)},onDeleteConfirmCancel:function(e){e.preventDefault(),e.stopPropagation(),this.$deleteConfirm.hide(),this.annotator.editor.element.removeClass(T),this.annotator.editor.element.show()},onDeleteConfirmClose:function(e){e.preventDefault(),e.stopPropagation(),this.$deleteConfirm.hide()},onDeleteNote:function(e){var t=this.annotator.editor.element.attr("style");e.preventDefault(),e.stopPropagation(),this.annotator.editor.hide(),this.$deleteConfirm.attr("style",t),this.$deleteConfirm.show(),this.bodyClick.call(this)},onCopyToClipboardClick:function(t){var n=e("<input/>"),i=this.highlightedFragment||this.annotator.viewer.annotations[0].fragment,r=o.stripHtmlFromString(i);t.preventDefault(),t.stopPropagation(),n.val(r),e("body").append(n),n.select();try{document.execCommand("copy")}catch(e){}n.remove()},selectVideoContainer:function(t){t.preventDefault();var n=e(".video-toc-title");a.selectText(n),e(n).trigger("mouseup"),this.highlightedFragment=this.getHighlightedFragment(),e(".annotator-adder .add-note a").click()},onAnnotationCreated:function(e){var t=e.text&&e.text.length?"Create with Note":"Create with No Note",i=this.archiveModel.get("book_id")+":"+this.archiveModel.get("chapter_href");n.trigger("track",["send","event","Annotation",t,i])},onAnnotationEditorShown:function(t,n){var i,o=this,a=e(t.element),s=a.offset().top,l=s>200?s-200:s,c=n.text&&n.text.length>0;t.preview_annotation&&(n.annotation_type="preview_annotation"),c?(a.find(".annotator-save").text("Save Changes"),a.find(".delete").removeClass("annotator-hide")):(a.find(".delete").addClass("annotator-hide"),a.find(".annotator-save").text("Save Note")),a.find(".selected").length||a.find(".annotator-widget").prepend('<div class="selected"></div>'),n.id?n.sanitized_fragment?a.find(".selected").html(n.sanitized_fragment):(i=n.truncated_quote||n.quote,i.length>750&&(i=e.trim(i).substring(0,747).trim(this)+"..."),a.find(".selected").html(i)):e.post("/a/sanitize-fragment/",{fragment:this.highlightedFragment}).done(function(e){a.find(".selected").html(e)}),r.IS_MOBILE?a.css("top",l):a.css("top",e(window).scrollTop()),this.filterByPublic(t,n),a.fadeIn("slow",function(){a.find("textarea").focus()}).promise().done(function(){o.bodyClick.call(o)})},isElementHidden:function(e){return e.is(":hidden")||e.hasClass(T)},onBodyClick:function(t){e(t.target).closest(".annotator-modal-wrapper").length||(this.isElementHidden(this.annotator.editor.element)||this.annotator.editor.element.find(".annotator-cancel")[0].click(),this.isElementHidden(this.$deleteConfirm)||this.$deleteConfirm.hide(),e(window).off("click.annotationsBodyClick"))},bodyClick:function(){e(window).off("click.annotationsBodyClick").on("click.annotationsBodyClick",e.proxy(this.onBodyClick,this))},filterByPublic:function(t,n){function togglePublic(){n.is_public?(n.is_public=!1,o.find(".js-share").hide()):(n.is_public=!0,o.find(".js-share").show())}var i,r,o=e(t.element);n.card_url=n.card_url||!1,n.is_public=n.is_public||!1,n.epub_title=e("html").data("epub-title"),o.find(".js-privacy-filter").length?o.find(".js-privacy-filter").replaceWith(c(n)):o.find("textarea").after(c(n)),i=o.find(".js-private"),r=o.find(".js-public"),i.prop("checked",!n.is_public),r.prop("checked",n.is_public),i.off("click").on("click",function(){togglePublic()}),r.off("click").on("click",function(){togglePublic()})},onBeforeAnnotationCreated:function(e){e.fragment=this.highlightedFragment,e.is_public=b},getViewerAdderWidth:function(t){var n=0;return t.find("li").each(function(){n+=e(this).outerWidth()}),n+20},onAnnotationViewerShown:function(t,n){var i,r,o,a,s,l,c,u=e(document).height(),d=0;for(l=0;l<n.length;l+=1)for(c=0;c<n[l].highlights.length;c+=1)i=e(n[l].highlights[c]),s=i.closest(".footnote").length,r=this.isPdfDoc||s?i.offset():i.position(),r.top>0&&r.top<u&&(u=r.top);d=this.getViewerAdderWidth(t.element.find(".annotator-view-clicker")),t.element.css("width",d),a=u-50,o=e(this.annotator.element).width()/2-d/2,t.element.css("top",a),t.element.css("left",o),t.element.find(".annotator-edit").addClass(C),t.element.find(".annotator-controls").addClass(C)},onCancelClicked:function(t){t.stopPropagation(),e(t.target).parents(".annotator-modal-wrapper").hide()},addHighlightWithNoteClass:function(t){t.text&&t.text.length&&e(t.highlights).first().addClass(w)},onSaveClicked:function(e){e.stopPropagation(),this.addHighlightWithNoteClass(this.annotator.editor.annotation)},onAnnotationStored:function(t){this.addHighlightWithNoteClass(t),e(".annotator-editor-modal").hide()},onAdderHide:function(){this.annotator.adder.find("button").removeClass(C)},getRangePosition:function(e){var t,n=e.textNodes(),i=document.createRange();return i.selectNodeContents(n[0]),t=i.getClientRects(),!!t[0]&&t[0].top},onAdderShown:function(){var n,i,r=this.annotator.getSelectedRanges()[0],o=e(window).scrollTop()-150,a=0;if(t.isUndefined(r))return!1;this.highlightedFragment=this.getHighlightedFragment(),a=this.getViewerAdderWidth(this.annotator.adder),this.annotator.adder.css("width",a),i=this.getRangePosition(r),n=e(this.annotator.element).width()/2-a/2,e("body").one("mousedown",function(e){this.clearUserSelection(e)}.bind(this)),this.annotator.adder.css("top",o+i),this.annotator.adder.css("left",n),this.annotator.adder.find(".adders").addClass(C),this.annotator.adder.show()},expandSelectionToPages:function(){var t=window.getSelection(),n=e(t.anchorNode.parentElement).closest(".pdf-page"),i=e(t.focusNode.parentElement).closest(".pdf-page"),r=n.nextUntil(i,".pdf-page"),o=e();return o=n[0]===i[0]?n:o.add(n).add(r).add(i),t.removeAllRanges(),o.each(function(){var e=document.createRange();e.selectNode(this),t.addRange(e)}),t},alterEditor:function(){var t=e(this.annotator.editor.element).find(".annotator-widget"),n=e(this.annotator.adder);r.IS_MOBILE||this.onAdderShown(n),t.find("textarea").addClass("js-editor").attr("placeholder","Add a note using markdown (optional)").attr("maxlength",750),o.textareaTabs(t.find("textarea")),t.find("textarea").keydown(function(e){13===e.keyCode&&e.stopPropagation()})},getHighlightedFragment:function(){var t,n=e("<div/>");return t=this.isPdfDoc&&window.USER_IS_CONTENT_CREATOR?this.expandSelectionToPages():window.getSelection(),this.isVideoDoc?"[VIDEO CONTENT]":(t&&(n.append(t.getRangeAt(0).cloneContents()),n.find(".annotator-hl").contents().unwrap()),n.html())},clearUserSelection:function(t){window.getSelection().removeAllRanges(),this.annotator.adder.is(":visible")&&!e(t.target).closest(".annotator-adder").length&&this.annotator.adder.hide()},getAnnotationById:function(e){var n=this;return t.filter(n.annotator.plugins.Store.annotations,function(t){return t.id===e})[0]}})}.apply(t,r))&&(e.exports=o)}).call(t,n(307))},function(e,t,n){"use strict";(function(i){var r;void 0!==(r=function(e){var t=n(1);n(307),i.Plugin.StoreEvents=function(e,t){this.el=e,this.options=t},t.extend(i.Plugin.StoreEvents.prototype,new i.Plugin,{events:{},options:{},pluginInit:function(){this.storePlugin=this.annotator.plugins.Store,t(document).ajaxSuccess(t.proxy(this.onAjaxSuccess,this))},onAjaxSuccess:function(e,t,n){var i=this.storePlugin._urlFor("create"),r=this.storePlugin._urlFor("update");n.url===i&&"POST"===n.type?this.annotator.publish("annotationStored",[t.responseJSON]):n.url===r&&"PUT"===n.type&&this.annotator.publish("annotationUpdated",[t.responseJSON])}})}.call(t,n,t,e))&&(e.exports=r)}).call(t,n(307))},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r=n(8),o=n(624);return t=!r.IS_IE8,r.IS_MOBILE&&t&&(t=!1),i=!0,window.IS_NOISYMINER&&(t=!1),o.prototype.interfaceOptions={enableAnnotations:t,enableOffline:!1,enableDocmarks:!1,enableBookmarks:!1,enablePaging:!1,enableTOC:i,enableImageResizing:!1},o}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){return n(627)}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a,s,l=n(1),c=n(4),u=n(2),d=(n(346),n(14),n(1110)),p=n(628);return n(381),p.prototype.render=function(){var e="";return e=l("body").hasClass("pdfdoc")?this.$el.html(d):this.$el.html(this.template),u.defer(this.attach,{}),this.bindResize(),e},i=p.prototype.dayMode,p.prototype.dayMode=function(e){i.call(this,e),c.trigger("track",["send","event","Reader","Change Reading Mode","Day Mode"])},r=p.prototype.cloudyMode,p.prototype.cloudyMode=function(e){r.call(this,e),c.trigger("track",["send","event","Reader","Change Reading Mode","Cloudy Mode"])},o=p.prototype.nightMode,p.prototype.nightMode=function(e){o.call(this,e),c.trigger("track",["send","event","Reader","Change Reading Mode","Night Mode"])},a=p.prototype.createFontSizeDraggable,p.prototype.createFontSizeDraggable=function(){a.call(this,function(e){c.trigger("track",["send","event","Reader","Change Font Size",e+"em"],{store:!0})})},s=p.prototype.createColumnSizeDraggable,p.prototype.createColumnSizeDraggable=function(){s.call(this,function(e){c.trigger("track",["send","event","Reader","Change Column Width",e+"%"],{store:!0})}),navigator.userAgent.toLowerCase().indexOf("android")>-1&&(this.$el.find(".column-resizer").remove(),this.$el.addClass("is-android-device"))},p.prototype.position=function(){u.delay(l.proxy(function(){this.$el.position({my:"right top",at:"left top",of:l("#font-controls")})},this),1e3)},t=p.prototype.onOpen,p.prototype.onOpen=function(){t.call(this),this.position()},p}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a,s,l,c=n(4),u=n(7),d=n(11),p=n(1),h=n(2),f="/api/v1/book/",_=50,m=95,g=[];return i=c.Model.extend({defaults:{top_percentage:null,content:null},initialize:function(){this.get("content")||this.set("content",this.buildContentId())},buildContentId:function(){return f+this.get("identifier")+"/chapter/"+this.get("full_path")}}),t=c.Collection.extend({model:i,url:function(){return f+this.bookId+"/chapter-progress/?page_size="+_},initialize:function(e){h.bindAll(this),this.bookId=e.bookId,this.on("fetch:success",this.onPageFetchSuccess,this)},onPageFetchSuccess:function(e,t){g.push(t.results),t.count>_&&!h.isNull(t.next)?e.fetch({url:t.next}):(this.reset(h.flatten(g)),this.trigger("fetch:done",this))},fetch:function(e){var t=this;return e=e||{},e.success||(e.success=function(e,n){t.trigger("fetch:success",e,n)}),c.Collection.prototype.fetch.call(this,e)},parse:function(e){return e.results}}),r=u.CompositeView.extend({el:"body",collectionEvents:{"fetch:done":"onFetchDone"},initialize:function(){h.bindAll(this),d.channel("chapterProgress").on("ui:update",this.onInterfaceUpdate,this),d.channel("usage").on("sync:success",this.onUsageSyncSuccess,this),d.channel("video").on("toc:render_complete",this.onTOCRender,this)},onUsageSyncSuccess:function(e){var t;e.length&&(t=h.last(e),t.get("end_percentage")>=m&&this.updateDisplayCompleted(t.get("chapter")))},onTOCRender:function(){this.updateDisplayCompleted()},onFetchDone:function(){this.updateDisplayCompleted()},onInterfaceUpdate:function(){var e=this;h.delay(function(){e.updateDisplayCompleted(!1)},500)},updateDisplayCompleted:function(e){var t,n=this;h.isString(e)?this.$el.find("[data-api-id='"+e+"']").addClass("completed"):p(".js-display-completed").each(function(){(t=n.collection.findWhere({content:p(this).attr("data-api-id")}))instanceof c.Model&&t.get("top_percentage")&&(t.get("top_percentage")>m?p(this).addClass("completed"):p(this).removeClass("completed"))})}}),s=function(){o.collection.length&&o.collection.reset(),g=[],o=null},a=function(){return o},l=function(e){o||(o=new r({collection:new t({bookId:e})}),o.collection.fetch())},{Model:i,Collection:t,View:r,get:a,destroy:s,init:l}}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a,s,l=n(4),c=n(1),u=n(2),d=n(8),p=n(629),h=n(696),f=n(234).get(),_=n(470),m=(n(14),n(11)),g=n(6),v=n(1101),y="Reader Navigation";return t=p.prototype.getNextChapter,i=p.prototype.getPreviousChapter,o=p.prototype.render,m.channel("kaltura").on("initFailed",function(){g.notify({message:v(),type:"error",unescaped:!0})}),r=p.prototype.initialize,s=function(){f.get("enableAnnotations")&&(this.annotator=new _({parent:this,el:"#js-sbo-inpage-toc",model:this.model}),this.annotator.render())},p.prototype.initialize=function(){r.call(this),m.channel("video").on("toc:render_complete",u.bind(s,this)),this.$videoToc=c("#js-sbo-inpage-toc")},p.prototype.render=function(){var e="video"===this.model.get("format");o.call(this),c("#js-sbo-inpage-toc").length||c("[role='document']").append(this.$videoToc),!a&&e&&(a=new h({el:"#js-sbo-inpage-toc",parentView:this})),e||c(d.IBIS_BOOK_CLASS).find('[title!="undefined"]').removeAttr("title")},p.prototype.getNextChapter=function(e){var n=c(e.currentTarget).closest('[class*="sbo-nav-"]'),i=n.hasClass("sbo-nav-top")?"Top Nav":n.hasClass("sbo-nav-bottom")?"Bottom Nav":null;i&&l.trigger("track",["send","event",y,i,"Next"]),t.call(this,e)},p.prototype.getPreviousChapter=function(e){var t=c(e.currentTarget).closest('[class*="sbo-nav-"]'),n=t.hasClass("sbo-nav-top")?"Top Nav":t.hasClass("sbo-nav-bottom")?"Bottom Nav":null;n&&l.trigger("track",["send","event",y,n,"Previous"]),i.call(this,e)},p.prototype.updateChapterNav=function(e){var t=u.extend(e,{containerClass:"sbo-nav-top"}),n=c(this.renderPagTemplate(t));this.$el.find(".sbo-nav-top").detach(),this.$el.prepend(n)},p.prototype.setNavEvents=function(){var e,t="disabled"===c("html").data("shortcuts-disabled"),n=this.$el.find(this.videoContainerEl).length?this.videoEvents:this.keyEvents;t?this.delegateEvents(this.clickEvents):(e=u.extend(this.clickEvents,n),this.delegateEvents(e))},p}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a=n(466),s=n(1),l=n(2),c=n(19),u=n(4),d=n(14),p=n(6),h=n(565),f="open",_=a.prototype.show,m=a.prototype.hide,g=a.prototype.destroy,v=a.prototype.navToLink,y=a.prototype.initialize,b="Reader Navigation",T="TOC";return n(381),a.prototype.el=".js-toc",a.prototype.events={"click .tocList a.js-toc-link":"saveReadingProgress","click .sbo-toc-thumb":"toggle","click .resume":"destroy"},i=function(e){return function(){var t=e.find(".sbo-toc").outerHeight();e.closest(".toc-contents").css("max-height",t)}},t=function(e){var t,n,i,r,o;return t=Math.floor(e),n=t<10?"0"+t:t,i=e-t,o=(60*i).toFixed(0),r=("00"+o).slice(-2),("00"!==n||"00"!==r)&&n+":"+r+" mins"},a.prototype.initialize=function(e){y.call(this,e),e.template&&(this.template=e.template),e.chapterTemplate&&(this.chapterTemplate=e.chapterTemplate),e.templateHelpers&&(this.templateHelpers=e.templateHelpers)},a.prototype.render=function(){var e,n=this,i="video"===this.model.get("format"),r=this.chapters.toJSON(),o={},a=["book_id","title","title_safe","authors","publisher","pub_date","detail_url","detail_position","thumbnail_tag"],s={queueable:!!c.loggedIn()&&this.options.queueable,display_completed:!!c.loggedIn()&&this.options.display_completed,chapterTemplate:this.chapterTemplate||!1,isVideo:i};l.each(a,function(e){n.chapters[e]&&(o[e]=n.chapters[e])}),o.options=s,o.detail_position=this.chapters.detail_position,o.templateHelpers=!!l.isFunction(this.templateHelpers)&&this.templateHelpers(),l.each(r,function(e,n){i?l.isNull(r[n].minutes_required)&&(r[n].minutes_required=!1):r[n].minutes_required=t(e.minutes_required)}),l.merge(o,{chapters:r}),e=h({data:o}),this.$(".toc-contents").empty().append(e),this.renderID=this.model.get("book_id"),this.renderHref=this.model.get("chapter_href"),this.updateCurrentlyReading()},a.prototype.destroy=function(){d.off("route",this.hide,this),g.call(this)},a.prototype.show=function(e){var t,n=this,a=this.$(e.currentTarget),l=a.next(".toc-contents"),c=l.find(".sbo-toc-thumb"),h="TOC Show";s(window).on("click",{el:l,closeBtn:c,active_class:f},p.bodyClick),a.length&&(o=a.closest(".sbo-reading-menu").outerHeight(),l.css("max-height",o),r=i(l),u.trigger("track",["send","event",b,T,h])),l.addClass(f),_.call(this),d.on("route",this.hide,this),s(window).on("resize",r),this.renderID?r():(t=function(){r(),n.chapters.off("reset",t)},this.chapters.on("reset",t))},a.prototype.hide=function(e){e&&u.trigger("track",["send","event",b,T,"TOC Close"]),s(window).off("resize",r),s(window).off("click",p.bodyClick),this.$(".toc-contents").removeClass(f).css("max-height",0),m.call(this)},a.prototype.navToLink=function(e){var t,n,i=s(e.currentTarget),r=i.closest(".toc-contents"),o="TOC Position ";r.length&&(n=r.find("a").index(i)+1,t=o+n,u.trigger("track",["send","event",b,"TOC Nav",t]),v.call(this,e))},a}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(7),i=n(1),r=n(466),o=n(2),a=n(11),s=n(1113),l=n(1112),c=n(14),u=n(193),d="active-tab";return t.LayoutView.extend({events:{"click .to-top":"toTop","click .js-tab":"onTabClick","change .js-mobile-menu":"mobileMenu"},templateHelpers:function(){return{formatMinutesRequired:function(e){var t,n,i,r,o;return t=Math.floor(e),n=t<10?"0"+t:t,i=e-t,o=(60*i).toFixed(0),r=("00"+o).slice(-2),n+":"+r+" mins"}}},initialize:function(e){e=e||{},this.parentView=e.parentView,o.bindAll(this),c.on("document:render",this.updateChapter),this.render(),this.$mobileMenu=this.$el.find(".js-mobile-menu"),this.setTabPercentageLengths()},destroy:function(){c.off("document:render",this.updateChapter)},setTabPercentageLengths:function(){var e=this.$el.find(".tabs li"),t=100/e.length+"%";o.each(e,function(e,n){i(e).css("width",t).addClass("item-"+n)})},changeTab:function(e){var t=i(e.currentTarget),n=t.hasClass("js-mobile-menu")?t.find("option:selected"):t,r=n.attr("data-content-id");return this.$el.find("."+d).each(function(){i(this).removeClass(d)}),e.preventDefault(),{el:n,tabContentId:r}},mobileMenu:function(e){var t=this.changeTab(e);this.$el.find(t.tabContentId).addClass(d)},onTabClick:function(e){var t=this.changeTab(e);t.el.toggleClass(d),this.$el.find(t.tabContentId).addClass(d)},attachCollections:function(){u.initMenuDropdowns({el:".js-collections-video-toc-dropdown"}),i(".js-collections-video-toc-dropdown").on("click",".js-collections-menu",this.ensureCollectionsMenuDropdownInView)},ensureCollectionsMenuDropdownInView:function(){setTimeout(function(){var e,t,n,r,o,a,s,l,c,u;0!==i(".menu-dropdown-region").length&&(e=i(".tocList"),t=e.offset().top,n=e.height(),r=t+n,o=e.scrollTop(),a=i(".menu-dropdown-region"),s=a.offset().top,l=a.height(),c=s+l,u=0,t<s&&r>c||(u=s-15-t,e.animate({scrollTop:o+u})))},500)},render:function(){var e,t=this;"video"===this.parentView.model.get("format")&&(this.tocView=new r({el:this.$el,model:this.parentView.model,display_completed:!0,queueable:!0,chapterTemplate:l,templateHelpers:this.templateHelpers}),e=this.tocView.chapters.fetch({book_id:t.parentView.model.get("book_id"),chapter_href:t.parentView.model.get("chapter_href")}),i.when(e).done(function(){t.tocView.render(),t.tocView.$el.addClass("arrived"),t.updateChapter({init:!0}),a.channel("video").trigger("toc:render_complete"),t.attachCollections()}))},scrollTo:function(e,t){e.animate({scrollTop:t},1e3)},toSelected:function(){var e=this.$el.find(".currently-reading"),t=this.$el.find(".tocList"),n=e.offset().top-t.offset().top,i=t.height()/2;this.scrollTo(t,n-i)},toTop:function(e){var t=this.$el.find(".tocList");e.preventDefault(),this.scrollTo(t,0)},updateChapter:function(e){var t,n=this,i=o.flatten(this.tocView.chapters.map(function(e){return e.attributes.children})),r=o.isNull(i[0]),a=this.parentView.$el.find(".js-chapter-description").html(),l=this.parentView.$el.find(".js-chapter-transcript").html(),c=1;this.parentView.$el.find(".sbo-vid-wrapper").removeClass("arriving"),this.$el.find(".js-description-region").html(a),this.$el.find(".js-transcript-region").html(l),e=e||{},c+=r?o.findIndex(this.tocView.chapters.models,function(e){return e.get("href")===n.parentView.model.get("chapter_href")}):o.findIndex(i,function(e){if(e&&e.href)return e.href===n.parentView.model.get("chapter_href")}),t={index:c,total:i.length,link:this.tocView.chapters.detail_url,title:this.parentView.model.get("title")},this.parentView.$el.prepend(s(t)),e.init||this.tocView.updateCurrentlyReading(),this.toSelected(),this.delegateEvents()}})}.call(t,n,t,e))&&(e.exports=i)},,,,,,,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(1),i=n(2),r=n(7),o=n(115),a=n(383),s=n(23),l=n(474),c=s.SEARCH_SELECT_ENDPOINT,u=s.SEARCH_SELECT_TIMEOUT;return r.Behavior.extend({triggers:{trackSearchSelection:this.onTrackSearchSelection},initialize:function(){var e=this;i.bindAll(this),this.accountInfo=new a.Model,a.get().then(function(t){e.accountInfo=t})},addDefaultData:function(e){var t=e;return t.session_id=this.accountInfo.get("session_id"),t.user_identifier=this.accountInfo.get("user_uuid"),t.url=l.ensureAbsoluteUrl(e.url),t.query=this.view.getSearchQuery(),i.pick(t,function(e){return Boolean(e)})},onTrackSearchSelection:function(e,n,i){t.ajax(c,{type:"POST",data:JSON.stringify(this.addDefaultData(e)),contentType:"application/json",timeout:u}).fail(function(e){o.error({source:"search.app.ResultsView:"+n,errorStatus:e.status,responseText:e.responseText,userAgent:window.navigator.userAgent,falconUrl:c})}).always(i||l.noop)}})}.call(t,n,t,e))&&(e.exports=i)},,function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t=n(4),i=n(473),r=n(23);return t.Collection.extend({model:i,url:r.SITB_ENDPOINT,parse:function(e){return e.results}})}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";var i;void 0!==(i=function(e){var t,i,r,o,a,s,l,c=n(7),u=n(4),d=n(2),p=n(1),h=n(8),f=n(28),_=n(705),m=n(473),g=n(14),v=n(703),y=n(474),b=n(1117),T=n(1120),w=n(1118),C=n(1119),M=n(1121),k="sitb_find_snippet",L=5,E=p('input[type="search"]'),S="active",D="result-active",O=10;return n(5),t=c.ItemView.extend({tagName:"li",className:"sitb-item",model:m,template:function(e){return T(e)}}),o=c.ItemView.extend({tagName:"li",className:"no-results",template:function(){return w({query:E.val()})}}),i=c.CollectionView.extend({tagName:"ul",childView:t,emptyView:o,events:{"click .sitb-item a":"onSitbItemClick","mouseup .sitb-item a":"onSitbItemMiddleClick","click .js-next":"onNextClick","click .js-prev":"onPrevClick"},behaviors:[{behaviorClass:v}],onSitbItemMiddleClick:function(e){return y.isMiddleClick(e)&&this.onSitbItemClick(e)},onSitbItemClick:function(e){var t,n=p(e.target),i=n.closest("a").attr("href"),r=this.getResultItem(n),o=this.getIdentifier(),a=y.shouldStayOnPage(e),s=y.isMiddleClick(e);return e.preventDefault(),e.stopPropagation(),a&&!s&&window.open(i,o),p.cookie(k,n.text()),t={rank:this.calculateRank(r),epubarchive_identifier:o,scope:"title",content_type:"chapter",selection_type:"chapter",url:i},this.triggerMethod("trackSearchSelection",t,"onSitbItemClick",this.getRedirectHandler(i,a)),!1},getIdentifier:function(){return this.collection.pageableData.identifier},calculateRank:function(e){var t=e.closest("ul").children().index(e)+1;return this.getCurrentPage()*L+t},getCurrentPage:function(){return this.collection.pageableData.page},getSearchQuery:function(){return this.query||"*"},getResultItem:function(e){return e.closest(".sitb-item")},getRedirectHandler:function(e,t){var n=function(){return u.history.navigate(e,{trigger:!0})};return t&&(n=function(){return y.noop}),n},buildPagination:function(e){var t=parseInt(Math.floor(e.total/L),O),n=e.total,i=0===e.page?1:(e.page+1)*L-(L-1),r=0===e.page?L:(e.page+1)*L,o="query="+e.query+"&identifier="+e.identifier;return this.query=e.query,C({total:n,next:e.page<t&&{url:o+"&page="+(e.page+1)},prev:e.page>=1&&{url:o+"&page="+(e.page-1)},page:{start_index:i,end_index:r>n?n:r}})},onShow:function(){this.collection.length&&this.$el.append(this.buildPagination(this.collection.pageableData)),this.$el.append(M({query:E.val()})),this.$el.find(".js-search-whole-site-link").on("click",this.searchWholeSite),this.delegateEvents()},fetch:function(e){var t=this;this.collection.fetch({data:e}).done(function(e){t.collection.trigger("sync:success",d.merge(e,{query:t.query}))}).fail(function(){})},onNextClick:function(e){var t=p(e.target),n=t.attr("href");e.preventDefault(),this.fetch(n)},onPrevClick:function(e){var t=p(e.target),n=t.attr("href");e.preventDefault(),this.fetch(n)},searchWholeSite:function(){var e=E.val();e||(e=""),p.cookie.json=!0,p.cookie("query",JSON.stringify({query:e}),{expires:1,path:"/"})}}),r=c.CompositeView.extend({el:".js-search-in-archive",template:b,events:{"click .js-sitb-page":"search","submit .js-search-form":"search","click .js-search-controls":"openSearch","search .js-search-form":"onSearch","keyup [type='search']":"onKeyupSearch"},ui:{field:'input[type="search"]',form:".js-search-form",controls:".js-search-controls"},behaviors:{Analytics:{behaviorClass:f,type:"search"}},showLoading:function(){this.$el.addClass("loading")},hideLoading:function(){this.$el.removeClass("loading")},initialize:function(){this.mergeOptions(this,"archive"),this.bindUIElements(),g.on("document:render",this.reset,this),this.collection=new _,this.regions=new c.RegionManager,this.regions.addRegion("sitbResults",".js-sitb-results-region"),this.listenTo(this.collection,"request",this.showLoading),this.listenTo(this.collection,"sync",this.hideLoading),this.listenTo(this.collection,"sync:success",this.onFetchSuccess)},trimWords:function(e,t){return e.split(/\s+/,t).join(" ").toLowerCase()},afterArchiveRender:function(){var e,t,n=p.cookie(k),i="#sbo-rt-content p,#sbo-rt-content h1,#sbo-rt-content h2,#sbo-rt-content h3,#sbo-rt-content table,#sbo-rt-content li,#sbo-rt-content pre",r=p("body").hasClass("night-mode")?"#666":"#FCE4C5";n&&(e=this.trimWords(n,8),t=p(i).filter(function(){return p(this).text().toLowerCase().indexOf(e.toLowerCase())>=0}).last(),t.length||(e=this.trimWords(n,4),t=p(i).filter(function(){return p(this).text().toLowerCase().indexOf(e.toLowerCase())>=0}).last()),t.length&&p("html, body").animate({scrollTop:t.offset().top-200},{duration:500,complete:p.proxy(function(){t.css("background-color",r),setTimeout(function(){t.css("transition","2s"),t.css("background-color","transparent")},500),p.cookie(k,"")},this)}))},openSearch:function(e){e.preventDefault(),e.stopPropagation(),this.$el.addClass(S),this.ui.field.focus(),p(window).on("click.windowclick",d.bind(this.closeSearch,this))},onKeyupSearch:function(e){(27===e.keyCode||27===e.which)&&(this.reset(),p(window).off("click.windowclick"))},closeSearch:function(e){!p(e.target).closest(".js-search-in-archive").length&&this.$el.hasClass(S)&&(this.reset(),p(window).off("click.windowclick"))},reset:function(){this.$el.removeClass(S),this.$el.removeClass(D),this.regions.get("sitbResults").reset(),this.ui.field.val("")},onFetchSuccess:function(e){this.collection.reset(e.results),this.collection.pageableData={total:e.total,page:e.page,query:e.query,identifier:this.options.archive.get("book_id")},this.regions.get("sitbResults").reset(),this.regions.get("sitbResults").show(new i({collection:this.collection})),this.$el.addClass(D),this.triggerMethod("track",["send","event","SITB","Query",e.query])},onFetchError:function(e){this.$el.find(".js-sitb-results-region").html(this.template({query:e.query})),this.$el.addClass(D),this.hideLoading()},search:function(e){var t=this.$el.find("form").serialize(),n=t+"&identifier="+this.options.archive.get("book_id"),i=this.ui.field.val()||"",r=this;e.preventDefault(),e.stopPropagation(),this.collection.fetch({data:n}).done(function(e){r.onFetchSuccess(d.merge(e,{query:i}))}).fail(function(e){r.onFetchError(d.merge(e,{query:i}))})},onSearch:function(){""===this.ui.field.val()&&this.regions.get("sitbResults").reset()}}),l=function(e){return a||(a=new r({archive:e.archive})),a},s=function(){return a},h.TESTING?{CompositeView:r,init:l,get:s}:{init:l,get:s}}.call(t,n,t,e))&&(e.exports=i)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){var _=__webpack_require__(10);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<h3>You're reading</h3>\n<h4> "+(null==(__t=model.title)?"":__t)+" </h4>\n",model.label&&(__p+='\n<h5 class="title">'+(null==(__t=model.label)?"":__t)+"</h5>\n"),__p+='\n<span class="author">By '+(null==(__t=model.author_list)?"":__t)+"</span>\n\n";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(10);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",previousChapter.url&&(__p+='\n<a class="prev" href="'+(null==(__t=previousChapter.url)?"":__t)+'">'+(null==(__t=previousChapter.title)?"":__t)+"</a>\n"),__p+='\n<a class="top" href="/">Home</a>\n',previousChapter.url&&(__p+='\n<a class="next" href="'+(null==(__t=nextChapter.url)?"":__t)+'">'+(null==(__t=nextChapter.title)?"":__t)+"</a>\n"),__p+="\n";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='Sorry, were unable to load the requested video. There could be several reasons for this, including:<br />\n&bull; A blocking application or browser extension such as Ghostery may be blocking video data. Check that the Kaltura domain is enabled.<br />\n&bull; A network or server performance problem may be preventing access to the video. Please try again later.<br />\nIf you have any questions please contact us at <a href="mailto:support@safaribooksonline.com">support@safaribooksonline.com</a>.\n';return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},,function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="annotator-adder">\n\t<ul class="adders">\n\t\t',browserSupportsCopy&&(__p+='\n\t\t<li class="copy"><a href="#">Copy</a></li>\n\t\t'),__p+='\n\t\t<li class="add-highlight"><a href="#">Add Highlight</a></li>\n\t\t<li class="add-note"><a href="#">\n\t\t\tAdd Note\n\t\t</a></li>\n\t\t',isPreviewCreator&&(__p+='\n\t\t<li class="add-note add-preview-content"><a href="#">Add preview content</a></li>\n\t\t'),__p+="\n\t</ul>\n</div>\n";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">\n  <div class="annotator-outer">\n    <h2 class="title">Highlight</h2>\n      <a class="js-close-delete-confirm annotator-cancel close" href="#close">Close</a>\n      <div class="annotator-widget">\n         <div class="delete-confirm">\n            Are you sure you want to permanently delete this note?\n         </div>\n         <div class="annotator-controls">\n            <a href="#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>\n            <a href="#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>\n         </div>\n       </div>\n   </div>\n</div>';return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n<li class="annotator-annotation annotator-item annotator-view-clicker with-note">\n\t<ul class="annotator-controls">\n\t\t',browserSupportsCopy&&(__p+='\n\t\t<li class="copy"><a href="#" class="annotator-copy">Copy</a></li>\n\t\t'),__p+='\n\t\t<li><a href="#" title="Edit" class="annotator-edit">\n\t\t\t',"previewAnnotation"===annotationType?__p+="\n\t\t\t\tEdit Preview\n\t\t\t":__p+="\n\t\t\t\tEdit Note\n\t\t\t",__p+="\n\t\t</a></li>\n\t</ul>\n</li>\n";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n<li class="annotator-annotation annotator-item annotator-view-clicker without-note">\n\t<ul class="annotator-controls">\n    ',browserSupportsCopy&&(__p+='\n\t\t<li class="copy"><a href="#" class="annotator-copy">Copy</a></li>\n    '),__p+='\n    <li><a href="#" title="Delete" class="annotator-delete">Undo Highlight</a></li>\n\t\t<li>\n      <a href="#" title="Edit" class="annotator-edit">\n        ',"previewAnnotation"===annotationType?__p+="\n          Edit Preview\n        ":__p+="\n          Add Note\n        ",__p+="\n      </a></li>\n\t</ul>\n</li>\n";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="annotator-modal-wrapper annotator-editor-modal annotator-editor">\n\t<div class="annotator-outer editor">\n\t\t<h2 class="title">Highlight</h2>\n\t\t<form class="annotator-widget">\n\t\t\t<ul class="annotator-listing">\n\t\t\t</ul>\n\t\t\t<div class="annotator-controls">\n\t\t\t\t<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>\n\t\t\t\t<ul>\n\t\t\t\t\t<li class="delete annotator-hide"><a href="#delete" class="annotator-delete-note button positive">Delete Note</a></li>\n\t\t\t\t\t<li class="save"><a href="#save" class="annotator-save annotator-focus button positive">Save Note</a></li>\n\t\t\t\t\t<li class="cancel"><a href="#cancel" class="annotator-cancel button">Cancel</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</div>';return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="js-privacy-filter">\n  <div class="toggle_public js-toggle_public ',is_public||(__p+="is_private"),__p+='">\n  <ul><li> This note is: </li>\n    <li><input type="radio" name="privacy_options" value="private" checked="checked" class="form-radio js-private" /><span>Private</span></li>\n    <li><input type="radio" name="privacy_options" value="public" class="form-radio js-public disabled" disabled><span style="opacity: .25;">Public</span></li>\n  </ul>\n  </div>\n\n  ',card_url&&(__p+='\n    <div class="social-media row js-share" ',is_public||(__p+='style="display:none;"'),__p+='>\n    <div class="left">\n      <h4 class="uppercase">Share this highlight</h4>\n      <a class="sans" href="http://'+(null==(__t=window.location.host)?"":__t)+(null==(__t=card_url)?"":__t)+'">\n        http://'+(null==(__t=window.location.host)?"":__t)+(null==(__t=card_url)?"":__t)+'\n      </a>\n    </div>\n\n    <ul class="social-sharing button-group">\n      <li>\n        <a\n          class="twitter share-button"\n          title="Share this section on Twitter"\n          href="https://twitter.com/share?url=http://'+(null==(__t=window.location.host)?"":__t)+(null==(__t=encodeURIComponent(card_url))?"":__t)+"&text="+(null==(__t=encodeURIComponent(text))?"":__t)+'&via=safari&source=webclient"\n          data-share-action="Share Twitter">\n          <span>Twitter</span>\n        </a>\n      </li>\n      <li>\n        <a\n          class="facebook share-button"\n          title="Share this section on Facebook"\n          href="https://www.facebook.com/sharer/sharer.php?u=http://'+(null==(__t=window.location.host)?"":__t)+(null==(__t=encodeURIComponent(card_url))?"":__t)+'"\n          data-share-action="Share Facebook">\n          <span>Facebook</span>\n        </a>\n      </li>\n      <li>\n        <a\n          class="googleplus share-button"\n          title="Share this secton on Google Plus"\n          href="https://plus.google.com/share?url=http://'+(null==(__t=window.location.host)?"":__t)+(null==(__t=encodeURIComponent(card_url))?"":__t)+'"\n          data-share-action="Share Google+">\n          <span>Google Plus</span>\n        </a>\n      </li>\n      <li>\n        <a\n          class="email share-button"\n          title="Share this section via email"\n          href="mailto:?subject=Safari: '+(null==(__t=encodeURIComponent(document.title))?"":__t)+"&body=",text&&(__p+=(null==(__t=encodeURIComponent(text))?"":__t)+"%0D%0A"),__p+=""+(null==(__t=window.location.host)?"":__t)+(null==(__t=encodeURIComponent(card_url))?"":__t)+"%0D%0Afrom "+(null==(__t=encodeURIComponent(epub_title))?"":__t)+'"\n          data-share-action="Share Email">\n          <span>Email</span>\n        </a>\n      </li>\n    </ul>\n    </div>\n  '),__p+="\n</div>\n";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="font-controls-panel">\n\t<div class="nightmodes">\n\t\t<ul>\n\t\t\t<li class="day"><a href="#" id="day-mode" title="Day Mode">\n\t\t\t\t<i class="fa fa-sun-o"></i>\n\t\t\t\t<span>Day Mode</span></a></li>\n\t\t\t<li class="cloudy"><a href="#" id="cloudy-mode" title="Cloudy Mode">\n\t\t\t\t<i class="fa fa-cloud"></i>\n\t\t\t\t<span>Cloud Mode</span>\n\t\t\t</a></li>\n\t\t\t<li class="night"><a href="#" id="night-mode" title="Night Mode">\n\t\t\t\t<i class="fa fa-moon-o"></i>\n\t\t\t\t<span>Night Mode</span>\n\t\t\t</a></li>\n\t\t</ul>\n\t</div>\n\n\t<div class="font-resizer resizer">\n\t\t<div class="draggable-containment-wrapper">\n\t\t\t<i class="fa fa-font left"></i>\n\t\t\t<span class="filler"></span>\n\t\t\t<div id="js-font-size-draggable" class="draggable ui-widget-content"></div>\n\t\t\t<i class="fa fa-font right"></i>\n\t\t</div>\n\t</div>\n\n\t<div class="column-resizer resizer">\n\t\t<div class="draggable-containment-wrapper">\n\t\t\t<i class="fa fa-compress left"></i>\n\t\t\t<span class="filler"></span>\n\t\t\t<div id="js-column-size-draggable" class="draggable ui-widget-content"></div>\n\t\t\t<i class="fa fa-expand right"></i>\n\t\t</div>\n\t</div>\n\n\t<a id="reset" class="button" href="#">Reset</a>\n</div>\n';return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<a href="#" id="increase-font" class="font-size-changer icnTxLr pdf-size-changer">\n  <span>Zoom in</span>\n</a>\x3c!--\n--\x3e<a href="#" id="decrease-font" class="font-size-changer icnTxSm pdf-size-changer">\n  <span>Zoom out</span>\n</a>\n\n';return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<li data-archive="'+(null==(__t=archive.book_id)?"":__t)+'"',"video"!==archive.format?__p+=' data-reference-id=""':__p+=' data-full-path=""',__p+='>\n<button type="button" class="rec-fav hide-offline ss-star',archive.is_starred&&print(" active"),__p+='" aria-label="Star">Star</button>\n</li>\x3c!--\n',"video"!==archive.format&&"application/pdf"!==archive.source?__p+='\n--\x3e<li class="js-font-control-panel"><a href="#" data-push-state="false" id="font-controls"><span>Toggle Font Controls</span></a></li>\n':__p+="\n--\x3e\n",__p+="";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",chapter.label&&(__p+="\n     ",chapter.depth>1&&chapter===_.first(list)&&(__p+='\n        <ul class="toc-level-'+(null==(__t=chapter.depth)?"":__t)+'">\n     '),__p+='\n\n     <li class="toc-level'+(null==(__t=chapter.depth)?"":__t),chapter.selected&&print(" currently-reading"),__p+='">\n        ',data.options.display_completed&&_.isNull(chapter.children)&&(__p+='\n            <span class="ss-check progress-indicator js-display-completed" data-api-id="/api/v1/book/'+(null==(__t=data.book_id)?"":__t)+"/chapter/"+(null==(__t=chapter.full_path)?"":__t)+'">\n            </span>\n        '),__p+="\n\n        ",_.isObject(chapter.children)?__p+='\n            <span class="section-title">'+(null==(__t=chapter.label)?"":_.escape(__t))+"</span>\n        ":(__p+='\n          <a href="/library/view/',print(data.title_safe),__p+="/"+(null==(__t=data.book_id)?"":__t)+"/"+(null==(__t=chapter.full_path)?"":__t)+'" class="js-toc-link toc-link">\n            '+(null==(__t=chapter.label)?"":__t)+" ",chapter.minutes_required&&(__p+='<span class="minutes">('+(null==(__t=data.templateHelpers.formatMinutesRequired(chapter.minutes_required))?"":__t)+")</span>"),__p+="\n          </a>\n        "),__p+="\n\n        ",data.options.queueable&&_.isNull(chapter.children)?__p+='\n         <button type="button" class="rec-fav ss-queue js-queue js-reader-toc-queue" aria-label="Add to Queue" title="Add to Queue" data-queue-endpoint="'+(null==(__t=chapter.url)?"":__t)+'">\n          <span>Add to Queue</span>\n        </button>\n        ':!data.options.queueable&&_.isNull(chapter.children)&&(__p+='\n          <span class="js-content-uri" data-content-uri="/api/v1/book/'+(null==(__t=data.book_id)?"":__t)+"/chapter/"+(null==(__t=chapter.full_path)?"":__t)+'">\n            <div class="js-collections-video-toc-dropdown collections-dropdown menu-bit-cards">\n              \x3c!-- collections js rendered here --\x3e\n            </div>\n          </span>\n        '),__p+="\n\n        ",chapter.children&&(__p+="\n            ",_.each(chapter.children,function(e,t,n){__p+="\n              ",print(data.options.chapterTemplate({chapter:e,i:t,list:n,data:data,chapterTemplate:data.options.chapterTemplate})),__p+="\n            "}),__p+="\n        "),__p+="\n\n    ",chapter===_.last(list)&&(__p+="\n        </ul>\n    "),__p+="\n\n    </li>\n"),__p+="";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h1 class="video-toc-title">Video '+(null==(__t=index)?"":_.escape(__t))+" of "+(null==(__t=total)?"":_.escape(__t))+' from <a href="'+(null==(__t=link)?"":_.escape(__t))+'" title="'+(null==(__t=title)?"":_.escape(__t))+'">'+(null==(__t=title)?"":_.escape(__t))+"</a></h1>";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},,,,function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="js-search-results search-archive-results results-error">\n  <ul>\n    <li class="error js-error">\n     <h2>Something has gone wrong... please try again later.</h2>\n     <span class="js-query"></span>\n     </li>\n     <li class="search-whole-site">\n       <a class="js-search-whole-site-link" href="/search/?q">Search the whole site</a>\n      </li>\n   </ul>\n</div>\n';return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='No results for "<span class="js-query">'+(null==(__t=query)?"":__t)+'</span>"\n';return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <li class="pagination">\n    ',prev&&(__p+='\n      <a href="'+(null==(__t=prev.url)?"":__t)+'" class="js-prev">&lt;</a>\n    '),__p+='\n  <span class="indexes">'+(null==(__t=page.start_index)?"":__t)+"-"+(null==(__t=page.end_index)?"":__t)+'</span>\n  of\n  <span class="total">'+(null==(__t=total)?"":__t)+"</span>\n    ",next&&(__p+='\n    <a href="'+(null==(__t=next.url)?"":__t)+'" class="js-next">&gt;</a>\n    '),__p+="\n  </li>";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n<span data-rank="" data-bit="'+(null==(__t=archive_id)?"":__t)+"/"+(null==(__t=full_path)?"":__t)+'">\n  <a href="'+(null==(__t=web_url)?"":__t)+'" class="title js-search-link">\n    ',highlighted_content&&(__p+='<span class="description t-description">'+(null==(__t=highlighted_content)?"":__t)+"</span>"),__p+='\n    <span class="sitb-title">in '+(null==(__t=chapter_title)?"":__t)+" ",minutes_required&&(__p+='<span class="t-minutes">('+(null==(__t=minutes_required)?"":__t)+" mins)</span>"),__p+="</span>\n  </a>\n</span>\n";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <li class="search-whole-site">\n    <a class="search-whole-link js-search-whole-site-link" href="/search/?q='+(null==(__t=query)?"":__t)+'">Search the whole site</a>\n  </li>';return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},,,,,,function(e,t,n){n(117),e.exports=n(568)}],[1127]);